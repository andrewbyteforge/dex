{"timestamp": "2025-08-26T07:19:16.392473Z", "level": "ERROR", "trace_id": "6349d018-73ec-4765-b715-443e7d697a48", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T07:19:16.392473Z", "level": "ERROR", "trace_id": "6349d018-73ec-4765-b715-443e7d697a48", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T07:19:51.793008Z", "level": "ERROR", "trace_id": "6349d018-73ec-4765-b715-443e7d697a48", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T07:19:51.794004Z", "level": "ERROR", "trace_id": "6349d018-73ec-4765-b715-443e7d697a48", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T07:19:51.908869Z", "level": "ERROR", "trace_id": "6349d018-73ec-4765-b715-443e7d697a48", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T07:19:55.866272Z", "level": "ERROR", "trace_id": "6349d018-73ec-4765-b715-443e7d697a48", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T07:19:55.866783Z", "level": "ERROR", "trace_id": "6349d018-73ec-4765-b715-443e7d697a48", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T07:19:55.990413Z", "level": "ERROR", "trace_id": "6349d018-73ec-4765-b715-443e7d697a48", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T07:32:33.741836Z", "level": "ERROR", "trace_id": "bf6c8403-4bb3-4774-96fb-d6edf179da3f", "module": "app.api", "message": "\u274c Price Quotes with Token Resolution API registration failed: invalid syntax (quotes.py, line 1519)", "location": {"file": "D:\\dex\\backend\\app\\api\\__init__.py", "line": 51, "function": "_register_router"}}
{"timestamp": "2025-08-26T07:32:33.741836Z", "level": "ERROR", "trace_id": "bf6c8403-4bb3-4774-96fb-d6edf179da3f", "module": "app.api", "message": "\ud83d\udea8 Quotes router registration failed - trading will use mock data", "location": {"file": "D:\\dex\\backend\\app\\api\\__init__.py", "line": 72, "function": "<module>"}}
{"timestamp": "2025-08-26T07:32:34.039406Z", "level": "ERROR", "trace_id": "bf6c8403-4bb3-4774-96fb-d6edf179da3f", "module": "app.api", "message": "\ud83d\udea8 TRADING LIMITED: Quotes router failed - check logs above", "location": {"file": "D:\\dex\\backend\\app\\api\\__init__.py", "line": 134, "function": "<module>"}}
{"timestamp": "2025-08-26T07:32:38.174990Z", "level": "ERROR", "trace_id": "bf6c8403-4bb3-4774-96fb-d6edf179da3f", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T07:32:38.174990Z", "level": "ERROR", "trace_id": "bf6c8403-4bb3-4774-96fb-d6edf179da3f", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T07:32:49.780282Z", "level": "ERROR", "trace_id": "c6dd0011-e012-4f5c-8c4f-10edcbeac9c4", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T07:32:49.780282Z", "level": "ERROR", "trace_id": "c6dd0011-e012-4f5c-8c4f-10edcbeac9c4", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T07:32:56.701860Z", "level": "ERROR", "trace_id": "f58135c1-8e55-4cf2-a56c-a138a9fd8460", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T07:32:56.703091Z", "level": "ERROR", "trace_id": "f58135c1-8e55-4cf2-a56c-a138a9fd8460", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T07:33:05.283499Z", "level": "ERROR", "trace_id": "b34681f7-c545-405a-aa71-358dbe64055f", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T07:33:05.283499Z", "level": "ERROR", "trace_id": "b34681f7-c545-405a-aa71-358dbe64055f", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T07:33:12.563101Z", "level": "ERROR", "trace_id": "b34681f7-c545-405a-aa71-358dbe64055f", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T07:33:12.564192Z", "level": "ERROR", "trace_id": "b34681f7-c545-405a-aa71-358dbe64055f", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T07:33:12.658671Z", "level": "ERROR", "trace_id": "b34681f7-c545-405a-aa71-358dbe64055f", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T07:33:14.752016Z", "level": "ERROR", "trace_id": "b34681f7-c545-405a-aa71-358dbe64055f", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T07:33:14.753069Z", "level": "ERROR", "trace_id": "b34681f7-c545-405a-aa71-358dbe64055f", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T07:33:14.842116Z", "level": "ERROR", "trace_id": "b34681f7-c545-405a-aa71-358dbe64055f", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T07:41:06.419760Z", "level": "ERROR", "trace_id": "fbd33b18-56e8-4219-a07d-1927841ae184", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T07:41:06.419760Z", "level": "ERROR", "trace_id": "fbd33b18-56e8-4219-a07d-1927841ae184", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T07:41:20.122470Z", "level": "ERROR", "trace_id": "5ffe2487-46b0-42f6-a479-9d852c94d51d", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T07:41:20.122470Z", "level": "ERROR", "trace_id": "5ffe2487-46b0-42f6-a479-9d852c94d51d", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T07:41:27.692142Z", "level": "ERROR", "trace_id": "5ffe2487-46b0-42f6-a479-9d852c94d51d", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T07:41:27.692142Z", "level": "ERROR", "trace_id": "5ffe2487-46b0-42f6-a479-9d852c94d51d", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T07:41:27.786965Z", "level": "ERROR", "trace_id": "5ffe2487-46b0-42f6-a479-9d852c94d51d", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T07:55:05.197250Z", "level": "ERROR", "trace_id": "6d951c64-dae7-4a6c-9b93-24522b80dc01", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T07:55:05.197250Z", "level": "ERROR", "trace_id": "6d951c64-dae7-4a6c-9b93-24522b80dc01", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T07:55:18.645183Z", "level": "ERROR", "trace_id": "6d951c64-dae7-4a6c-9b93-24522b80dc01", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T07:55:18.645183Z", "level": "ERROR", "trace_id": "6d951c64-dae7-4a6c-9b93-24522b80dc01", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T07:55:18.765784Z", "level": "ERROR", "trace_id": "6d951c64-dae7-4a6c-9b93-24522b80dc01", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T07:56:07.931203Z", "level": "ERROR", "trace_id": "a3e4e83d-3711-4233-8ff6-34b598532bb5", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T07:56:07.931203Z", "level": "ERROR", "trace_id": "a3e4e83d-3711-4233-8ff6-34b598532bb5", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T07:56:18.364356Z", "level": "ERROR", "trace_id": "a3e4e83d-3711-4233-8ff6-34b598532bb5", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T07:56:18.364356Z", "level": "ERROR", "trace_id": "a3e4e83d-3711-4233-8ff6-34b598532bb5", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T07:56:18.487899Z", "level": "ERROR", "trace_id": "a3e4e83d-3711-4233-8ff6-34b598532bb5", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T08:04:37.418429Z", "level": "ERROR", "trace_id": "a3e4e83d-3711-4233-8ff6-34b598532bb5", "module": "app.api.quotes", "message": "Quote requests timed out after 20 seconds", "location": {"file": "D:\\dex\\backend\\app\\api\\quotes.py", "line": 957, "function": "get_aggregate_quotes"}}
{"timestamp": "2025-08-26T08:04:40.602047Z", "level": "ERROR", "trace_id": "a3e4e83d-3711-4233-8ff6-34b598532bb5", "module": "app.dex.uniswap_v2", "message": "Failed to get Web3 instance for ethereum: Failed to connect to ethereum RPC: https://ethereum.publicnode.com", "exception": {"type": "ValueError", "message": "Failed to connect to ethereum RPC: https://ethereum.publicnode.com", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\dex\\uniswap_v2.py\", line 676, in _get_web3_instance\n    raise ValueError(f\"Failed to connect to {chain} RPC: {rpc_url}\")\n", "ValueError: Failed to connect to ethereum RPC: https://ethereum.publicnode.com\n"]}, "location": {"file": "D:\\dex\\backend\\app\\dex\\uniswap_v2.py", "line": 686, "function": "_get_web3_instance"}}
{"timestamp": "2025-08-26T08:04:40.603056Z", "level": "ERROR", "trace_id": "a3e4e83d-3711-4233-8ff6-34b598532bb5", "module": "app.dex.uniswap_v2", "message": "Validation error for uniswap_v2: Cannot get Web3 instance for ethereum: Failed to connect to ethereum RPC: https://ethereum.publicnode.com", "location": {"file": "D:\\dex\\backend\\app\\dex\\uniswap_v2.py", "line": 559, "function": "get_quote"}}
{"timestamp": "2025-08-26T08:06:03.287307Z", "level": "ERROR", "trace_id": "ec949bb8-d92e-4e7e-8337-7737664d0b0b", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T08:06:03.288327Z", "level": "ERROR", "trace_id": "ec949bb8-d92e-4e7e-8337-7737664d0b0b", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T08:07:26.459056Z", "level": "ERROR", "trace_id": "14f3920b-9e8c-4c92-8112-8e230e1f2b81", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T08:07:26.461060Z", "level": "ERROR", "trace_id": "14f3920b-9e8c-4c92-8112-8e230e1f2b81", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T08:07:33.414690Z", "level": "ERROR", "trace_id": "54201ca4-a78f-4f04-8f8f-b6e0fdcf0aaa", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T08:07:33.416318Z", "level": "ERROR", "trace_id": "54201ca4-a78f-4f04-8f8f-b6e0fdcf0aaa", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T08:07:40.413648Z", "level": "ERROR", "trace_id": "16264eb0-a661-45bf-a41b-a8fe92be1e2b", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T08:07:40.414765Z", "level": "ERROR", "trace_id": "16264eb0-a661-45bf-a41b-a8fe92be1e2b", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T08:08:44.046624Z", "level": "ERROR", "trace_id": "0b768d7c-e7eb-4937-acdb-6400ce87436c", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T08:08:44.047142Z", "level": "ERROR", "trace_id": "0b768d7c-e7eb-4937-acdb-6400ce87436c", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T08:12:30.974693Z", "level": "ERROR", "trace_id": "83f0d217-3085-4ea3-8a01-b6d36150dcda", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T08:12:30.975601Z", "level": "ERROR", "trace_id": "83f0d217-3085-4ea3-8a01-b6d36150dcda", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T08:12:43.235603Z", "level": "ERROR", "trace_id": "dddc8995-9c14-48e2-947d-e77dc16a2abe", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T08:12:43.235603Z", "level": "ERROR", "trace_id": "dddc8995-9c14-48e2-947d-e77dc16a2abe", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T08:12:48.295064Z", "level": "ERROR", "trace_id": "dddc8995-9c14-48e2-947d-e77dc16a2abe", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T08:12:48.296034Z", "level": "ERROR", "trace_id": "dddc8995-9c14-48e2-947d-e77dc16a2abe", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T08:12:48.405556Z", "level": "ERROR", "trace_id": "dddc8995-9c14-48e2-947d-e77dc16a2abe", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T08:22:21.078730Z", "level": "ERROR", "trace_id": "70088fa1-412d-4625-956e-55f00c3cfaf2", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T08:22:21.080422Z", "level": "ERROR", "trace_id": "70088fa1-412d-4625-956e-55f00c3cfaf2", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T08:22:43.292944Z", "level": "ERROR", "trace_id": "8a974c2b-15ff-443a-adce-5c65fa2e878b", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T08:22:43.294006Z", "level": "ERROR", "trace_id": "8a974c2b-15ff-443a-adce-5c65fa2e878b", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T08:23:04.569171Z", "level": "ERROR", "trace_id": "8a974c2b-15ff-443a-adce-5c65fa2e878b", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T08:23:04.569171Z", "level": "ERROR", "trace_id": "8a974c2b-15ff-443a-adce-5c65fa2e878b", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T08:23:04.677867Z", "level": "ERROR", "trace_id": "8a974c2b-15ff-443a-adce-5c65fa2e878b", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T08:23:18.896252Z", "level": "ERROR", "trace_id": "8a974c2b-15ff-443a-adce-5c65fa2e878b", "module": "app.dex.uniswap_v2", "message": "Failed to get Web3 instance for ethereum: Failed to connect to ethereum RPC: https://ethereum.publicnode.com", "exception": {"type": "ValueError", "message": "Failed to connect to ethereum RPC: https://ethereum.publicnode.com", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\dex\\uniswap_v2.py\", line 676, in _get_web3_instance\n    raise ValueError(f\"Failed to connect to {chain} RPC: {rpc_url}\")\n", "ValueError: Failed to connect to ethereum RPC: https://ethereum.publicnode.com\n"]}, "location": {"file": "D:\\dex\\backend\\app\\dex\\uniswap_v2.py", "line": 686, "function": "_get_web3_instance"}}
{"timestamp": "2025-08-26T08:23:18.899613Z", "level": "ERROR", "trace_id": "8a974c2b-15ff-443a-adce-5c65fa2e878b", "module": "app.dex.uniswap_v2", "message": "Validation error for uniswap_v2: Cannot get Web3 instance for ethereum: Failed to connect to ethereum RPC: https://ethereum.publicnode.com", "location": {"file": "D:\\dex\\backend\\app\\dex\\uniswap_v2.py", "line": 559, "function": "get_quote"}}
{"timestamp": "2025-08-26T08:25:52.468008Z", "level": "ERROR", "trace_id": "3096351b-eaac-432f-986f-3f49d247855e", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T08:25:52.468547Z", "level": "ERROR", "trace_id": "3096351b-eaac-432f-986f-3f49d247855e", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T08:26:28.601438Z", "level": "ERROR", "trace_id": "2a5bcb4d-1b76-4b90-bae3-bce8851a78ba", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T08:26:28.601946Z", "level": "ERROR", "trace_id": "2a5bcb4d-1b76-4b90-bae3-bce8851a78ba", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T08:26:33.996994Z", "level": "ERROR", "trace_id": "2a5bcb4d-1b76-4b90-bae3-bce8851a78ba", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T08:26:33.996994Z", "level": "ERROR", "trace_id": "2a5bcb4d-1b76-4b90-bae3-bce8851a78ba", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T08:26:34.105524Z", "level": "ERROR", "trace_id": "2a5bcb4d-1b76-4b90-bae3-bce8851a78ba", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T08:31:15.324394Z", "level": "ERROR", "trace_id": "fc2fe78c-82de-4ae2-b0ad-2acc3816dbb5", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T08:31:15.324394Z", "level": "ERROR", "trace_id": "fc2fe78c-82de-4ae2-b0ad-2acc3816dbb5", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T08:31:49.853317Z", "level": "ERROR", "trace_id": "45f9044f-9c81-496d-8219-38ff9d1b9b06", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T08:31:49.854323Z", "level": "ERROR", "trace_id": "45f9044f-9c81-496d-8219-38ff9d1b9b06", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T08:31:55.792045Z", "level": "ERROR", "trace_id": "45f9044f-9c81-496d-8219-38ff9d1b9b06", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T08:31:55.793015Z", "level": "ERROR", "trace_id": "45f9044f-9c81-496d-8219-38ff9d1b9b06", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T08:31:55.905682Z", "level": "ERROR", "trace_id": "45f9044f-9c81-496d-8219-38ff9d1b9b06", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T08:32:31.091401Z", "level": "ERROR", "trace_id": "45f9044f-9c81-496d-8219-38ff9d1b9b06", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T08:32:31.092398Z", "level": "ERROR", "trace_id": "45f9044f-9c81-496d-8219-38ff9d1b9b06", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T08:32:31.198495Z", "level": "ERROR", "trace_id": "45f9044f-9c81-496d-8219-38ff9d1b9b06", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T08:32:33.387170Z", "level": "ERROR", "trace_id": "45f9044f-9c81-496d-8219-38ff9d1b9b06", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T08:32:33.387170Z", "level": "ERROR", "trace_id": "45f9044f-9c81-496d-8219-38ff9d1b9b06", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T08:32:33.489955Z", "level": "ERROR", "trace_id": "45f9044f-9c81-496d-8219-38ff9d1b9b06", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T08:34:41.884547Z", "level": "ERROR", "trace_id": "45f9044f-9c81-496d-8219-38ff9d1b9b06", "module": "app.api.quotes", "message": "Invalid token address format for uniswap_v3", "location": {"file": "D:\\dex\\backend\\app\\api\\quotes.py", "line": 463, "function": "_get_real_quote_from_adapter"}}
{"timestamp": "2025-08-26T08:34:41.885133Z", "level": "ERROR", "trace_id": "45f9044f-9c81-496d-8219-38ff9d1b9b06", "module": "app.api.quotes", "message": "Invalid token address format for pancake_v3", "location": {"file": "D:\\dex\\backend\\app\\api\\quotes.py", "line": 463, "function": "_get_real_quote_from_adapter"}}
{"timestamp": "2025-08-26T08:34:41.885133Z", "level": "ERROR", "trace_id": "45f9044f-9c81-496d-8219-38ff9d1b9b06", "module": "app.api.quotes", "message": "Invalid token address format for pancake_v2", "location": {"file": "D:\\dex\\backend\\app\\api\\quotes.py", "line": 463, "function": "_get_real_quote_from_adapter"}}
{"timestamp": "2025-08-26T08:34:41.885649Z", "level": "ERROR", "trace_id": "45f9044f-9c81-496d-8219-38ff9d1b9b06", "module": "app.api.quotes", "message": "Invalid token address format for uniswap_v2", "location": {"file": "D:\\dex\\backend\\app\\api\\quotes.py", "line": 463, "function": "_get_real_quote_from_adapter"}}
{"timestamp": "2025-08-26T08:34:41.901868Z", "level": "ERROR", "trace_id": "45f9044f-9c81-496d-8219-38ff9d1b9b06", "module": "app.api.quotes", "message": "Invalid token address format for uniswap_v3", "location": {"file": "D:\\dex\\backend\\app\\api\\quotes.py", "line": 463, "function": "_get_real_quote_from_adapter"}}
{"timestamp": "2025-08-26T08:34:41.902888Z", "level": "ERROR", "trace_id": "45f9044f-9c81-496d-8219-38ff9d1b9b06", "module": "app.api.quotes", "message": "Invalid token address format for pancake_v3", "location": {"file": "D:\\dex\\backend\\app\\api\\quotes.py", "line": 463, "function": "_get_real_quote_from_adapter"}}
{"timestamp": "2025-08-26T08:34:41.903251Z", "level": "ERROR", "trace_id": "45f9044f-9c81-496d-8219-38ff9d1b9b06", "module": "app.api.quotes", "message": "Invalid token address format for pancake_v2", "location": {"file": "D:\\dex\\backend\\app\\api\\quotes.py", "line": 463, "function": "_get_real_quote_from_adapter"}}
{"timestamp": "2025-08-26T08:34:41.903480Z", "level": "ERROR", "trace_id": "45f9044f-9c81-496d-8219-38ff9d1b9b06", "module": "app.api.quotes", "message": "Invalid token address format for uniswap_v2", "location": {"file": "D:\\dex\\backend\\app\\api\\quotes.py", "line": 463, "function": "_get_real_quote_from_adapter"}}
{"timestamp": "2025-08-26T08:34:53.850655Z", "level": "ERROR", "trace_id": "45f9044f-9c81-496d-8219-38ff9d1b9b06", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T08:34:53.851204Z", "level": "ERROR", "trace_id": "45f9044f-9c81-496d-8219-38ff9d1b9b06", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T08:34:53.948822Z", "level": "ERROR", "trace_id": "45f9044f-9c81-496d-8219-38ff9d1b9b06", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T08:35:02.637306Z", "level": "ERROR", "trace_id": "45f9044f-9c81-496d-8219-38ff9d1b9b06", "module": "app.api.quotes", "message": "Invalid token address format for uniswap_v3", "location": {"file": "D:\\dex\\backend\\app\\api\\quotes.py", "line": 463, "function": "_get_real_quote_from_adapter"}}
{"timestamp": "2025-08-26T08:35:02.638315Z", "level": "ERROR", "trace_id": "45f9044f-9c81-496d-8219-38ff9d1b9b06", "module": "app.api.quotes", "message": "Invalid token address format for pancake_v3", "location": {"file": "D:\\dex\\backend\\app\\api\\quotes.py", "line": 463, "function": "_get_real_quote_from_adapter"}}
{"timestamp": "2025-08-26T08:35:02.638731Z", "level": "ERROR", "trace_id": "45f9044f-9c81-496d-8219-38ff9d1b9b06", "module": "app.api.quotes", "message": "Invalid token address format for pancake_v2", "location": {"file": "D:\\dex\\backend\\app\\api\\quotes.py", "line": 463, "function": "_get_real_quote_from_adapter"}}
{"timestamp": "2025-08-26T08:35:02.639100Z", "level": "ERROR", "trace_id": "45f9044f-9c81-496d-8219-38ff9d1b9b06", "module": "app.api.quotes", "message": "Invalid token address format for uniswap_v2", "location": {"file": "D:\\dex\\backend\\app\\api\\quotes.py", "line": 463, "function": "_get_real_quote_from_adapter"}}
{"timestamp": "2025-08-26T08:35:02.654761Z", "level": "ERROR", "trace_id": "45f9044f-9c81-496d-8219-38ff9d1b9b06", "module": "app.api.quotes", "message": "Invalid token address format for uniswap_v3", "location": {"file": "D:\\dex\\backend\\app\\api\\quotes.py", "line": 463, "function": "_get_real_quote_from_adapter"}}
{"timestamp": "2025-08-26T08:35:02.655273Z", "level": "ERROR", "trace_id": "45f9044f-9c81-496d-8219-38ff9d1b9b06", "module": "app.api.quotes", "message": "Invalid token address format for pancake_v3", "location": {"file": "D:\\dex\\backend\\app\\api\\quotes.py", "line": 463, "function": "_get_real_quote_from_adapter"}}
{"timestamp": "2025-08-26T08:35:02.655273Z", "level": "ERROR", "trace_id": "45f9044f-9c81-496d-8219-38ff9d1b9b06", "module": "app.api.quotes", "message": "Invalid token address format for pancake_v2", "location": {"file": "D:\\dex\\backend\\app\\api\\quotes.py", "line": 463, "function": "_get_real_quote_from_adapter"}}
{"timestamp": "2025-08-26T08:35:02.655273Z", "level": "ERROR", "trace_id": "45f9044f-9c81-496d-8219-38ff9d1b9b06", "module": "app.api.quotes", "message": "Invalid token address format for uniswap_v2", "location": {"file": "D:\\dex\\backend\\app\\api\\quotes.py", "line": 463, "function": "_get_real_quote_from_adapter"}}
{"timestamp": "2025-08-26T08:35:18.036246Z", "level": "ERROR", "trace_id": "45f9044f-9c81-496d-8219-38ff9d1b9b06", "module": "app.api.quotes", "message": "Invalid token address format for uniswap_v3", "location": {"file": "D:\\dex\\backend\\app\\api\\quotes.py", "line": 463, "function": "_get_real_quote_from_adapter"}}
{"timestamp": "2025-08-26T08:35:18.036562Z", "level": "ERROR", "trace_id": "45f9044f-9c81-496d-8219-38ff9d1b9b06", "module": "app.api.quotes", "message": "Invalid token address format for pancake_v3", "location": {"file": "D:\\dex\\backend\\app\\api\\quotes.py", "line": 463, "function": "_get_real_quote_from_adapter"}}
{"timestamp": "2025-08-26T08:35:18.036909Z", "level": "ERROR", "trace_id": "45f9044f-9c81-496d-8219-38ff9d1b9b06", "module": "app.api.quotes", "message": "Invalid token address format for pancake_v2", "location": {"file": "D:\\dex\\backend\\app\\api\\quotes.py", "line": 463, "function": "_get_real_quote_from_adapter"}}
{"timestamp": "2025-08-26T08:35:18.037337Z", "level": "ERROR", "trace_id": "45f9044f-9c81-496d-8219-38ff9d1b9b06", "module": "app.api.quotes", "message": "Invalid token address format for uniswap_v2", "location": {"file": "D:\\dex\\backend\\app\\api\\quotes.py", "line": 463, "function": "_get_real_quote_from_adapter"}}
{"timestamp": "2025-08-26T08:35:18.054093Z", "level": "ERROR", "trace_id": "45f9044f-9c81-496d-8219-38ff9d1b9b06", "module": "app.api.quotes", "message": "Invalid token address format for uniswap_v3", "location": {"file": "D:\\dex\\backend\\app\\api\\quotes.py", "line": 463, "function": "_get_real_quote_from_adapter"}}
{"timestamp": "2025-08-26T08:35:18.055090Z", "level": "ERROR", "trace_id": "45f9044f-9c81-496d-8219-38ff9d1b9b06", "module": "app.api.quotes", "message": "Invalid token address format for pancake_v3", "location": {"file": "D:\\dex\\backend\\app\\api\\quotes.py", "line": 463, "function": "_get_real_quote_from_adapter"}}
{"timestamp": "2025-08-26T08:35:18.055090Z", "level": "ERROR", "trace_id": "45f9044f-9c81-496d-8219-38ff9d1b9b06", "module": "app.api.quotes", "message": "Invalid token address format for pancake_v2", "location": {"file": "D:\\dex\\backend\\app\\api\\quotes.py", "line": 463, "function": "_get_real_quote_from_adapter"}}
{"timestamp": "2025-08-26T08:35:18.055090Z", "level": "ERROR", "trace_id": "45f9044f-9c81-496d-8219-38ff9d1b9b06", "module": "app.api.quotes", "message": "Invalid token address format for uniswap_v2", "location": {"file": "D:\\dex\\backend\\app\\api\\quotes.py", "line": 463, "function": "_get_real_quote_from_adapter"}}
{"timestamp": "2025-08-26T08:39:26.297028Z", "level": "ERROR", "trace_id": "01034bf5-9fb0-42f8-bfb7-0d89138c42e0", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T08:39:26.297028Z", "level": "ERROR", "trace_id": "01034bf5-9fb0-42f8-bfb7-0d89138c42e0", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T08:40:03.473024Z", "level": "ERROR", "trace_id": "77bdc059-db38-4e3a-af9d-49c30c039b03", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T08:40:03.473024Z", "level": "ERROR", "trace_id": "77bdc059-db38-4e3a-af9d-49c30c039b03", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T08:41:58.810286Z", "level": "ERROR", "trace_id": "4a49e702-5ce1-46ba-b21a-64cdad4be14a", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T08:41:58.810286Z", "level": "ERROR", "trace_id": "4a49e702-5ce1-46ba-b21a-64cdad4be14a", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T08:42:05.772407Z", "level": "ERROR", "trace_id": "a612184b-3614-41ba-b306-41460ca553d5", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T08:42:05.773639Z", "level": "ERROR", "trace_id": "a612184b-3614-41ba-b306-41460ca553d5", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T08:42:20.303837Z", "level": "ERROR", "trace_id": "6b63b827-9a14-4252-8827-c593e1cab73a", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T08:42:20.304350Z", "level": "ERROR", "trace_id": "6b63b827-9a14-4252-8827-c593e1cab73a", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T08:42:22.477769Z", "level": "ERROR", "trace_id": "6b63b827-9a14-4252-8827-c593e1cab73a", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T08:42:22.478276Z", "level": "ERROR", "trace_id": "6b63b827-9a14-4252-8827-c593e1cab73a", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T08:42:22.581833Z", "level": "ERROR", "trace_id": "6b63b827-9a14-4252-8827-c593e1cab73a", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T08:44:27.102474Z", "level": "ERROR", "trace_id": "6b63b827-9a14-4252-8827-c593e1cab73a", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T08:44:27.102474Z", "level": "ERROR", "trace_id": "6b63b827-9a14-4252-8827-c593e1cab73a", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T08:44:27.199445Z", "level": "ERROR", "trace_id": "6b63b827-9a14-4252-8827-c593e1cab73a", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T08:45:27.957254Z", "level": "ERROR", "trace_id": "411f73ef-afb0-4c92-b9cf-ee0e69068765", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T08:45:27.958935Z", "level": "ERROR", "trace_id": "411f73ef-afb0-4c92-b9cf-ee0e69068765", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T08:45:34.904518Z", "level": "ERROR", "trace_id": "2b09f7c0-87d4-4009-8984-eb5da45767a7", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T08:45:34.904518Z", "level": "ERROR", "trace_id": "2b09f7c0-87d4-4009-8984-eb5da45767a7", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T08:45:42.825332Z", "level": "ERROR", "trace_id": "3f0464ab-cc9e-4d31-aec3-c4845cc57d3b", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T08:45:42.826462Z", "level": "ERROR", "trace_id": "3f0464ab-cc9e-4d31-aec3-c4845cc57d3b", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T08:45:52.608843Z", "level": "ERROR", "trace_id": "3f0464ab-cc9e-4d31-aec3-c4845cc57d3b", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T08:45:52.609840Z", "level": "ERROR", "trace_id": "3f0464ab-cc9e-4d31-aec3-c4845cc57d3b", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T08:45:52.710403Z", "level": "ERROR", "trace_id": "3f0464ab-cc9e-4d31-aec3-c4845cc57d3b", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T08:46:01.201747Z", "level": "ERROR", "trace_id": "3f0464ab-cc9e-4d31-aec3-c4845cc57d3b", "module": "app.dex.uniswap_v3", "message": "Quote failed for uniswap_v3 on ethereum: 'UniswapV3Adapter' object has no attribute '_get_web3_instance'", "exception": {"type": "AttributeError", "message": "'UniswapV3Adapter' object has no attribute '_get_web3_instance'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\dex\\uniswap_v3.py\", line 204, in get_quote\n    w3 = await self._get_web3_instance(chain, chain_clients)\n               ^^^^^^^^^^^^^^^^^^^^^^^\n", "AttributeError: 'UniswapV3Adapter' object has no attribute '_get_web3_instance'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\dex\\uniswap_v3.py", "line": 376, "function": "get_quote"}}
{"timestamp": "2025-08-26T08:46:01.202791Z", "level": "ERROR", "trace_id": "3f0464ab-cc9e-4d31-aec3-c4845cc57d3b", "module": "app.dex.uniswap_v3", "message": "Quote failed for pancake_v3 on ethereum: 'UniswapV3Adapter' object has no attribute '_get_web3_instance'", "exception": {"type": "AttributeError", "message": "'UniswapV3Adapter' object has no attribute '_get_web3_instance'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\dex\\uniswap_v3.py\", line 204, in get_quote\n    w3 = await self._get_web3_instance(chain, chain_clients)\n               ^^^^^^^^^^^^^^^^^^^^^^^\n", "AttributeError: 'UniswapV3Adapter' object has no attribute '_get_web3_instance'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\dex\\uniswap_v3.py", "line": 376, "function": "get_quote"}}
{"timestamp": "2025-08-26T08:46:21.233842Z", "level": "ERROR", "trace_id": "3f0464ab-cc9e-4d31-aec3-c4845cc57d3b", "module": "app.dex.uniswap_v3", "message": "Quote failed for uniswap_v3 on ethereum: 'UniswapV3Adapter' object has no attribute '_get_web3_instance'", "exception": {"type": "AttributeError", "message": "'UniswapV3Adapter' object has no attribute '_get_web3_instance'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\dex\\uniswap_v3.py\", line 204, in get_quote\n    w3 = await self._get_web3_instance(chain, chain_clients)\n               ^^^^^^^^^^^^^^^^^^^^^^^\n", "AttributeError: 'UniswapV3Adapter' object has no attribute '_get_web3_instance'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\dex\\uniswap_v3.py", "line": 376, "function": "get_quote"}}
{"timestamp": "2025-08-26T08:46:21.235342Z", "level": "ERROR", "trace_id": "3f0464ab-cc9e-4d31-aec3-c4845cc57d3b", "module": "app.dex.uniswap_v3", "message": "Quote failed for pancake_v3 on ethereum: 'UniswapV3Adapter' object has no attribute '_get_web3_instance'", "exception": {"type": "AttributeError", "message": "'UniswapV3Adapter' object has no attribute '_get_web3_instance'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\dex\\uniswap_v3.py\", line 204, in get_quote\n    w3 = await self._get_web3_instance(chain, chain_clients)\n               ^^^^^^^^^^^^^^^^^^^^^^^\n", "AttributeError: 'UniswapV3Adapter' object has no attribute '_get_web3_instance'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\dex\\uniswap_v3.py", "line": 376, "function": "get_quote"}}
{"timestamp": "2025-08-26T08:46:24.359092Z", "level": "ERROR", "trace_id": "3f0464ab-cc9e-4d31-aec3-c4845cc57d3b", "module": "app.dex.uniswap_v2", "message": "Failed to get Web3 instance for ethereum: Failed to connect to ethereum RPC: https://ethereum.publicnode.com", "exception": {"type": "ValueError", "message": "Failed to connect to ethereum RPC: https://ethereum.publicnode.com", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\dex\\uniswap_v2.py\", line 676, in _get_web3_instance\n    raise ValueError(f\"Failed to connect to {chain} RPC: {rpc_url}\")\n", "ValueError: Failed to connect to ethereum RPC: https://ethereum.publicnode.com\n"]}, "location": {"file": "D:\\dex\\backend\\app\\dex\\uniswap_v2.py", "line": 686, "function": "_get_web3_instance"}}
{"timestamp": "2025-08-26T08:46:24.360684Z", "level": "ERROR", "trace_id": "3f0464ab-cc9e-4d31-aec3-c4845cc57d3b", "module": "app.dex.uniswap_v2", "message": "Validation error for uniswap_v2: Cannot get Web3 instance for ethereum: Failed to connect to ethereum RPC: https://ethereum.publicnode.com", "location": {"file": "D:\\dex\\backend\\app\\dex\\uniswap_v2.py", "line": 559, "function": "get_quote"}}
{"timestamp": "2025-08-26T08:47:30.803764Z", "level": "ERROR", "trace_id": "1cf5612d-972a-46bb-bfc0-f4aa30cb8057", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T08:47:30.803764Z", "level": "ERROR", "trace_id": "1cf5612d-972a-46bb-bfc0-f4aa30cb8057", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T08:48:11.801701Z", "level": "ERROR", "trace_id": "4ae1c34e-a402-4aa5-bea5-e3ce11f40c72", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T08:48:11.801701Z", "level": "ERROR", "trace_id": "4ae1c34e-a402-4aa5-bea5-e3ce11f40c72", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T08:48:28.247488Z", "level": "ERROR", "trace_id": "b4097fba-f1c5-4fea-bf75-6acedc3a1309", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T08:48:28.248640Z", "level": "ERROR", "trace_id": "b4097fba-f1c5-4fea-bf75-6acedc3a1309", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T08:48:41.092234Z", "level": "ERROR", "trace_id": "072838eb-45d7-4b45-9e11-5e1328c1b981", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T08:48:41.092234Z", "level": "ERROR", "trace_id": "072838eb-45d7-4b45-9e11-5e1328c1b981", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T08:48:43.365328Z", "level": "ERROR", "trace_id": "072838eb-45d7-4b45-9e11-5e1328c1b981", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T08:48:43.365328Z", "level": "ERROR", "trace_id": "072838eb-45d7-4b45-9e11-5e1328c1b981", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T08:48:43.460490Z", "level": "ERROR", "trace_id": "072838eb-45d7-4b45-9e11-5e1328c1b981", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T08:50:15.923136Z", "level": "ERROR", "trace_id": "072838eb-45d7-4b45-9e11-5e1328c1b981", "module": "app.api.quotes", "message": "Invalid token address format for uniswap_v3", "location": {"file": "D:\\dex\\backend\\app\\api\\quotes.py", "line": 463, "function": "_get_real_quote_from_adapter"}}
{"timestamp": "2025-08-26T08:50:15.924131Z", "level": "ERROR", "trace_id": "072838eb-45d7-4b45-9e11-5e1328c1b981", "module": "app.api.quotes", "message": "Invalid token address format for pancake_v3", "location": {"file": "D:\\dex\\backend\\app\\api\\quotes.py", "line": 463, "function": "_get_real_quote_from_adapter"}}
{"timestamp": "2025-08-26T08:50:15.924131Z", "level": "ERROR", "trace_id": "072838eb-45d7-4b45-9e11-5e1328c1b981", "module": "app.api.quotes", "message": "Invalid token address format for pancake_v2", "location": {"file": "D:\\dex\\backend\\app\\api\\quotes.py", "line": 463, "function": "_get_real_quote_from_adapter"}}
{"timestamp": "2025-08-26T08:50:15.925250Z", "level": "ERROR", "trace_id": "072838eb-45d7-4b45-9e11-5e1328c1b981", "module": "app.api.quotes", "message": "Invalid token address format for uniswap_v2", "location": {"file": "D:\\dex\\backend\\app\\api\\quotes.py", "line": 463, "function": "_get_real_quote_from_adapter"}}
{"timestamp": "2025-08-26T08:50:15.942394Z", "level": "ERROR", "trace_id": "072838eb-45d7-4b45-9e11-5e1328c1b981", "module": "app.api.quotes", "message": "Invalid token address format for uniswap_v3", "location": {"file": "D:\\dex\\backend\\app\\api\\quotes.py", "line": 463, "function": "_get_real_quote_from_adapter"}}
{"timestamp": "2025-08-26T08:50:15.942600Z", "level": "ERROR", "trace_id": "072838eb-45d7-4b45-9e11-5e1328c1b981", "module": "app.api.quotes", "message": "Invalid token address format for pancake_v3", "location": {"file": "D:\\dex\\backend\\app\\api\\quotes.py", "line": 463, "function": "_get_real_quote_from_adapter"}}
{"timestamp": "2025-08-26T08:50:15.943109Z", "level": "ERROR", "trace_id": "072838eb-45d7-4b45-9e11-5e1328c1b981", "module": "app.api.quotes", "message": "Invalid token address format for pancake_v2", "location": {"file": "D:\\dex\\backend\\app\\api\\quotes.py", "line": 463, "function": "_get_real_quote_from_adapter"}}
{"timestamp": "2025-08-26T08:50:15.943152Z", "level": "ERROR", "trace_id": "072838eb-45d7-4b45-9e11-5e1328c1b981", "module": "app.api.quotes", "message": "Invalid token address format for uniswap_v2", "location": {"file": "D:\\dex\\backend\\app\\api\\quotes.py", "line": 463, "function": "_get_real_quote_from_adapter"}}
{"timestamp": "2025-08-26T08:50:25.914144Z", "level": "ERROR", "trace_id": "072838eb-45d7-4b45-9e11-5e1328c1b981", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T08:50:25.914144Z", "level": "ERROR", "trace_id": "072838eb-45d7-4b45-9e11-5e1328c1b981", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T08:50:26.009178Z", "level": "ERROR", "trace_id": "072838eb-45d7-4b45-9e11-5e1328c1b981", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T08:50:34.991293Z", "level": "ERROR", "trace_id": "072838eb-45d7-4b45-9e11-5e1328c1b981", "module": "app.api.quotes", "message": "Invalid token address format for uniswap_v3", "location": {"file": "D:\\dex\\backend\\app\\api\\quotes.py", "line": 463, "function": "_get_real_quote_from_adapter"}}
{"timestamp": "2025-08-26T08:50:34.991293Z", "level": "ERROR", "trace_id": "072838eb-45d7-4b45-9e11-5e1328c1b981", "module": "app.api.quotes", "message": "Invalid token address format for pancake_v3", "location": {"file": "D:\\dex\\backend\\app\\api\\quotes.py", "line": 463, "function": "_get_real_quote_from_adapter"}}
{"timestamp": "2025-08-26T08:50:34.991293Z", "level": "ERROR", "trace_id": "072838eb-45d7-4b45-9e11-5e1328c1b981", "module": "app.api.quotes", "message": "Invalid token address format for pancake_v2", "location": {"file": "D:\\dex\\backend\\app\\api\\quotes.py", "line": 463, "function": "_get_real_quote_from_adapter"}}
{"timestamp": "2025-08-26T08:50:34.992793Z", "level": "ERROR", "trace_id": "072838eb-45d7-4b45-9e11-5e1328c1b981", "module": "app.api.quotes", "message": "Invalid token address format for uniswap_v2", "location": {"file": "D:\\dex\\backend\\app\\api\\quotes.py", "line": 463, "function": "_get_real_quote_from_adapter"}}
{"timestamp": "2025-08-26T08:50:35.010654Z", "level": "ERROR", "trace_id": "072838eb-45d7-4b45-9e11-5e1328c1b981", "module": "app.api.quotes", "message": "Invalid token address format for uniswap_v3", "location": {"file": "D:\\dex\\backend\\app\\api\\quotes.py", "line": 463, "function": "_get_real_quote_from_adapter"}}
{"timestamp": "2025-08-26T08:50:35.011534Z", "level": "ERROR", "trace_id": "072838eb-45d7-4b45-9e11-5e1328c1b981", "module": "app.api.quotes", "message": "Invalid token address format for pancake_v3", "location": {"file": "D:\\dex\\backend\\app\\api\\quotes.py", "line": 463, "function": "_get_real_quote_from_adapter"}}
{"timestamp": "2025-08-26T08:50:35.012101Z", "level": "ERROR", "trace_id": "072838eb-45d7-4b45-9e11-5e1328c1b981", "module": "app.api.quotes", "message": "Invalid token address format for pancake_v2", "location": {"file": "D:\\dex\\backend\\app\\api\\quotes.py", "line": 463, "function": "_get_real_quote_from_adapter"}}
{"timestamp": "2025-08-26T08:50:35.012101Z", "level": "ERROR", "trace_id": "072838eb-45d7-4b45-9e11-5e1328c1b981", "module": "app.api.quotes", "message": "Invalid token address format for uniswap_v2", "location": {"file": "D:\\dex\\backend\\app\\api\\quotes.py", "line": 463, "function": "_get_real_quote_from_adapter"}}
{"timestamp": "2025-08-26T08:57:25.093626Z", "level": "ERROR", "trace_id": "bace93dd-a158-47bf-8116-28c07d1c3fa8", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T08:57:25.094773Z", "level": "ERROR", "trace_id": "bace93dd-a158-47bf-8116-28c07d1c3fa8", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T08:57:46.798536Z", "level": "ERROR", "trace_id": "0786b670-d7cd-4fb7-a83a-50c6d0170456", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T08:57:46.800785Z", "level": "ERROR", "trace_id": "0786b670-d7cd-4fb7-a83a-50c6d0170456", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T08:58:24.867841Z", "level": "ERROR", "trace_id": "9207ba50-6f49-4a83-9da1-4601c6713e69", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T08:58:24.867841Z", "level": "ERROR", "trace_id": "9207ba50-6f49-4a83-9da1-4601c6713e69", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T08:58:40.432057Z", "level": "ERROR", "trace_id": "768adc09-ccd3-4faa-b4de-38601562ee45", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T08:58:40.432057Z", "level": "ERROR", "trace_id": "768adc09-ccd3-4faa-b4de-38601562ee45", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T08:58:47.402970Z", "level": "ERROR", "trace_id": "07141a65-6ed1-44cb-9a4a-c3416ac2d330", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T08:58:47.404279Z", "level": "ERROR", "trace_id": "07141a65-6ed1-44cb-9a4a-c3416ac2d330", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T08:58:55.184994Z", "level": "ERROR", "trace_id": "b6085c80-5c15-4146-a18b-5070bb99424f", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T08:58:55.187271Z", "level": "ERROR", "trace_id": "b6085c80-5c15-4146-a18b-5070bb99424f", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T08:59:10.877749Z", "level": "ERROR", "trace_id": "d1294937-d991-42f8-a28a-e11991e93f6e", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T08:59:10.877749Z", "level": "ERROR", "trace_id": "d1294937-d991-42f8-a28a-e11991e93f6e", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T08:59:17.822931Z", "level": "ERROR", "trace_id": "a26293f0-45fd-4a2f-94d1-5bd6dd7e2616", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T08:59:17.823543Z", "level": "ERROR", "trace_id": "a26293f0-45fd-4a2f-94d1-5bd6dd7e2616", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T08:59:45.900414Z", "level": "ERROR", "trace_id": "648fedec-6dbc-4dec-b2db-cf4379dda160", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T08:59:45.901524Z", "level": "ERROR", "trace_id": "648fedec-6dbc-4dec-b2db-cf4379dda160", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T08:59:58.691986Z", "level": "ERROR", "trace_id": "e3db0448-2c06-49ac-a250-a6951c1f6533", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T08:59:58.692254Z", "level": "ERROR", "trace_id": "e3db0448-2c06-49ac-a250-a6951c1f6533", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T09:00:05.614730Z", "level": "ERROR", "trace_id": "1668a6ab-a0e5-45c1-a18a-c76e2e04190d", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T09:00:05.616012Z", "level": "ERROR", "trace_id": "1668a6ab-a0e5-45c1-a18a-c76e2e04190d", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T09:00:12.604906Z", "level": "ERROR", "trace_id": "fde26dcf-8bd4-460e-8d53-9c77b08b3576", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T09:00:12.607213Z", "level": "ERROR", "trace_id": "fde26dcf-8bd4-460e-8d53-9c77b08b3576", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T09:00:19.645722Z", "level": "ERROR", "trace_id": "3ad50133-9c86-402e-9d7a-af01379f45bf", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T09:00:19.645722Z", "level": "ERROR", "trace_id": "3ad50133-9c86-402e-9d7a-af01379f45bf", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T09:00:26.620664Z", "level": "ERROR", "trace_id": "c2f3c0e8-b15f-4882-99ba-2a3b74fd9534", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T09:00:26.621171Z", "level": "ERROR", "trace_id": "c2f3c0e8-b15f-4882-99ba-2a3b74fd9534", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T09:00:33.646037Z", "level": "ERROR", "trace_id": "c2f3c0e8-b15f-4882-99ba-2a3b74fd9534", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T09:00:33.646037Z", "level": "ERROR", "trace_id": "c2f3c0e8-b15f-4882-99ba-2a3b74fd9534", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T09:00:33.747963Z", "level": "ERROR", "trace_id": "c2f3c0e8-b15f-4882-99ba-2a3b74fd9534", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T09:03:35.347341Z", "level": "ERROR", "trace_id": "b9486147-3a90-4aac-b190-186f4868107d", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T09:03:35.347341Z", "level": "ERROR", "trace_id": "b9486147-3a90-4aac-b190-186f4868107d", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T09:06:12.838045Z", "level": "ERROR", "trace_id": "9d897fc4-b20a-4e4b-94f9-c4875b5ca73b", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T09:06:12.838045Z", "level": "ERROR", "trace_id": "9d897fc4-b20a-4e4b-94f9-c4875b5ca73b", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T09:06:30.694188Z", "level": "ERROR", "trace_id": "3d594bab-1420-4dc5-a312-5ae0d7c65362", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T09:06:30.694816Z", "level": "ERROR", "trace_id": "3d594bab-1420-4dc5-a312-5ae0d7c65362", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T09:06:50.531637Z", "level": "ERROR", "trace_id": "a730bb44-627a-4528-b626-1afcb7d1438d", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T09:06:50.531637Z", "level": "ERROR", "trace_id": "a730bb44-627a-4528-b626-1afcb7d1438d", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T09:06:56.592410Z", "level": "ERROR", "trace_id": "a730bb44-627a-4528-b626-1afcb7d1438d", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T09:06:56.593480Z", "level": "ERROR", "trace_id": "a730bb44-627a-4528-b626-1afcb7d1438d", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T09:06:56.682507Z", "level": "ERROR", "trace_id": "a730bb44-627a-4528-b626-1afcb7d1438d", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T09:07:06.297733Z", "level": "ERROR", "trace_id": "a730bb44-627a-4528-b626-1afcb7d1438d", "module": "app.dex.uniswap_v3", "message": "Failed to fetch pool state for 0x1ac1A8FEaAEa1900C4166dEeed0C11cC10669D36: Could not decode contract function call to slot0() with return data: b\"\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00:\\xbcF)R'\\x02\\xbb\\x81vF\\x1b\\xcc\\xbf\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x02\\xefv\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x02\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x0b\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x0b\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\rH\\rH\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x01\", output_types: ['uint160', 'int24', 'uint16', 'uint16', 'uint16', 'uint8', 'bool']", "location": {"file": "D:\\dex\\backend\\app\\dex\\uniswap_v3.py", "line": 692, "function": "_get_quote_from_pool_direct"}}
{"timestamp": "2025-08-26T09:07:07.620445Z", "level": "ERROR", "trace_id": "a730bb44-627a-4528-b626-1afcb7d1438d", "module": "app.api.quotes", "message": "Invalid quote from uniswap_v3: zero output", "location": {"file": "D:\\dex\\backend\\app\\api\\quotes.py", "line": 530, "function": "_get_real_quote_from_adapter"}}
{"timestamp": "2025-08-26T09:10:33.228475Z", "level": "ERROR", "trace_id": "5880d718-fdb7-4243-b80e-9a410b729bc7", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T09:10:33.228475Z", "level": "ERROR", "trace_id": "5880d718-fdb7-4243-b80e-9a410b729bc7", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T09:10:45.136833Z", "level": "ERROR", "trace_id": "8c3b77d8-11ec-4682-9904-9e653f08fa0a", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T09:10:45.136833Z", "level": "ERROR", "trace_id": "8c3b77d8-11ec-4682-9904-9e653f08fa0a", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T09:11:22.172078Z", "level": "ERROR", "trace_id": "ba10d12b-309b-4b1d-a2e2-ae8e2508f46b", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T09:11:22.173878Z", "level": "ERROR", "trace_id": "ba10d12b-309b-4b1d-a2e2-ae8e2508f46b", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T09:11:25.617378Z", "level": "ERROR", "trace_id": "ba10d12b-309b-4b1d-a2e2-ae8e2508f46b", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T09:11:25.618375Z", "level": "ERROR", "trace_id": "ba10d12b-309b-4b1d-a2e2-ae8e2508f46b", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T09:11:25.732551Z", "level": "ERROR", "trace_id": "ba10d12b-309b-4b1d-a2e2-ae8e2508f46b", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T09:11:35.413336Z", "level": "ERROR", "trace_id": "ba10d12b-309b-4b1d-a2e2-ae8e2508f46b", "module": "app.dex.uniswap_v3", "message": "Failed to fetch pool state for 0x1ac1A8FEaAEa1900C4166dEeed0C11cC10669D36: Could not decode contract function call to slot0() with return data: b'\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00:\\xb7\\xfc\\xcexa?j\\xe2D\\x83\\xd1\\xd5K\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x02\\xefp\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x05\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x0b\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x0b\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\rH\\rH\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x01', output_types: ['uint160', 'int24', 'uint16', 'uint16', 'uint16', 'uint8', 'bool']", "location": {"file": "D:\\dex\\backend\\app\\dex\\uniswap_v3.py", "line": 692, "function": "_get_quote_from_pool_direct"}}
{"timestamp": "2025-08-26T09:17:29.929168Z", "level": "ERROR", "trace_id": "f660d35e-de43-42d8-86ec-23941830b5e7", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T09:17:29.929168Z", "level": "ERROR", "trace_id": "f660d35e-de43-42d8-86ec-23941830b5e7", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T09:17:36.841021Z", "level": "ERROR", "trace_id": "b727391a-2371-45c6-b205-c2c12359b60a", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T09:17:36.842110Z", "level": "ERROR", "trace_id": "b727391a-2371-45c6-b205-c2c12359b60a", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T09:17:51.653633Z", "level": "ERROR", "trace_id": "b727391a-2371-45c6-b205-c2c12359b60a", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T09:17:51.654631Z", "level": "ERROR", "trace_id": "b727391a-2371-45c6-b205-c2c12359b60a", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T09:17:51.765227Z", "level": "ERROR", "trace_id": "b727391a-2371-45c6-b205-c2c12359b60a", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T09:18:01.359906Z", "level": "ERROR", "trace_id": "b727391a-2371-45c6-b205-c2c12359b60a", "module": "app.dex.uniswap_v3", "message": "Failed to fetch pool state for 0x1ac1A8FEaAEa1900C4166dEeed0C11cC10669D36: Could not decode contract function call to slot0() with return data: b'\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00:\\xae\\x04[\\x0e\\xa9=\\x99ifi\\xb5\\x00\\xf0\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x02\\xefc\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x06\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x0b\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x0b\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\rH\\rH\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x01', output_types: ['uint160', 'int24', 'uint16', 'uint16', 'uint16', 'uint8', 'bool']", "location": {"file": "D:\\dex\\backend\\app\\dex\\uniswap_v3.py", "line": 692, "function": "_get_quote_from_pool_direct"}}
{"timestamp": "2025-08-26T09:22:28.388452Z", "level": "ERROR", "trace_id": "37b62291-2929-4130-a234-3a28b88cc35f", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T09:22:28.389572Z", "level": "ERROR", "trace_id": "37b62291-2929-4130-a234-3a28b88cc35f", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T09:22:30.618141Z", "level": "ERROR", "trace_id": "37b62291-2929-4130-a234-3a28b88cc35f", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T09:22:30.618141Z", "level": "ERROR", "trace_id": "37b62291-2929-4130-a234-3a28b88cc35f", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T09:22:30.724951Z", "level": "ERROR", "trace_id": "37b62291-2929-4130-a234-3a28b88cc35f", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T09:46:14.031867Z", "level": "ERROR", "trace_id": "37b62291-2929-4130-a234-3a28b88cc35f", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T09:46:14.033022Z", "level": "ERROR", "trace_id": "37b62291-2929-4130-a234-3a28b88cc35f", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T09:46:14.117992Z", "level": "ERROR", "trace_id": "37b62291-2929-4130-a234-3a28b88cc35f", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T09:48:27.295880Z", "level": "ERROR", "trace_id": "37b62291-2929-4130-a234-3a28b88cc35f", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T09:48:27.295880Z", "level": "ERROR", "trace_id": "37b62291-2929-4130-a234-3a28b88cc35f", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T09:48:27.407665Z", "level": "ERROR", "trace_id": "37b62291-2929-4130-a234-3a28b88cc35f", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T09:49:35.240412Z", "level": "ERROR", "trace_id": "37b62291-2929-4130-a234-3a28b88cc35f", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T09:49:35.240412Z", "level": "ERROR", "trace_id": "37b62291-2929-4130-a234-3a28b88cc35f", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T09:49:35.359048Z", "level": "ERROR", "trace_id": "37b62291-2929-4130-a234-3a28b88cc35f", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T09:51:00.735842Z", "level": "ERROR", "trace_id": "37b62291-2929-4130-a234-3a28b88cc35f", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T09:51:00.736797Z", "level": "ERROR", "trace_id": "37b62291-2929-4130-a234-3a28b88cc35f", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T09:51:00.834171Z", "level": "ERROR", "trace_id": "37b62291-2929-4130-a234-3a28b88cc35f", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T09:55:21.829172Z", "level": "ERROR", "trace_id": "37b62291-2929-4130-a234-3a28b88cc35f", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T09:55:21.829172Z", "level": "ERROR", "trace_id": "37b62291-2929-4130-a234-3a28b88cc35f", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T09:55:21.917317Z", "level": "ERROR", "trace_id": "37b62291-2929-4130-a234-3a28b88cc35f", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T09:57:38.215052Z", "level": "ERROR", "trace_id": "d0faa162-de3d-4a3c-8c72-e5741d7fbd67", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T09:57:38.216238Z", "level": "ERROR", "trace_id": "d0faa162-de3d-4a3c-8c72-e5741d7fbd67", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T09:58:01.913126Z", "level": "ERROR", "trace_id": "d0faa162-de3d-4a3c-8c72-e5741d7fbd67", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T09:58:01.913634Z", "level": "ERROR", "trace_id": "d0faa162-de3d-4a3c-8c72-e5741d7fbd67", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T09:58:02.033567Z", "level": "ERROR", "trace_id": "d0faa162-de3d-4a3c-8c72-e5741d7fbd67", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T10:10:35.929155Z", "level": "ERROR", "trace_id": "d0faa162-de3d-4a3c-8c72-e5741d7fbd67", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T10:10:35.930237Z", "level": "ERROR", "trace_id": "d0faa162-de3d-4a3c-8c72-e5741d7fbd67", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T10:10:36.048151Z", "level": "ERROR", "trace_id": "d0faa162-de3d-4a3c-8c72-e5741d7fbd67", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T10:14:05.848058Z", "level": "ERROR", "trace_id": "d0faa162-de3d-4a3c-8c72-e5741d7fbd67", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T10:14:05.849145Z", "level": "ERROR", "trace_id": "d0faa162-de3d-4a3c-8c72-e5741d7fbd67", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T10:14:05.946870Z", "level": "ERROR", "trace_id": "d0faa162-de3d-4a3c-8c72-e5741d7fbd67", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T10:15:47.167081Z", "level": "ERROR", "trace_id": "d0faa162-de3d-4a3c-8c72-e5741d7fbd67", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T10:15:47.168170Z", "level": "ERROR", "trace_id": "d0faa162-de3d-4a3c-8c72-e5741d7fbd67", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T10:15:47.284634Z", "level": "ERROR", "trace_id": "d0faa162-de3d-4a3c-8c72-e5741d7fbd67", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T10:17:22.473326Z", "level": "ERROR", "trace_id": "6e58c947-56de-43b0-9971-70b4c60aceb3", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T10:17:22.473326Z", "level": "ERROR", "trace_id": "6e58c947-56de-43b0-9971-70b4c60aceb3", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T10:17:52.886997Z", "level": "ERROR", "trace_id": "f8e0cca7-2bd8-4e0a-82f8-43fc321b878a", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T10:17:52.886997Z", "level": "ERROR", "trace_id": "f8e0cca7-2bd8-4e0a-82f8-43fc321b878a", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T10:18:11.245328Z", "level": "ERROR", "trace_id": "b9551e50-6c44-4dba-9389-4fcaca9fea7a", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T10:18:11.245917Z", "level": "ERROR", "trace_id": "b9551e50-6c44-4dba-9389-4fcaca9fea7a", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 446, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T10:19:59.049371Z", "level": "ERROR", "trace_id": "5fa4b360-49a9-411c-a747-ec8d45d0917e", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T10:19:59.049878Z", "level": "ERROR", "trace_id": "5fa4b360-49a9-411c-a747-ec8d45d0917e", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 446, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T10:20:05.997148Z", "level": "ERROR", "trace_id": "73b60754-1bc5-4173-8a0f-2e58c9891b0c", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T10:20:05.997148Z", "level": "ERROR", "trace_id": "73b60754-1bc5-4173-8a0f-2e58c9891b0c", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 446, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T10:20:12.911486Z", "level": "ERROR", "trace_id": "87b3dd64-0be7-4adb-a837-f232596f013c", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T10:20:12.911486Z", "level": "ERROR", "trace_id": "87b3dd64-0be7-4adb-a837-f232596f013c", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 446, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T10:20:31.128609Z", "level": "ERROR", "trace_id": "53b6aa8e-de24-45f0-9eb4-991552c71e5d", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T10:20:31.129847Z", "level": "ERROR", "trace_id": "53b6aa8e-de24-45f0-9eb4-991552c71e5d", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 446, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T10:22:17.568753Z", "level": "ERROR", "trace_id": "2cedd0c3-431f-4a47-9ae6-699db8a5ad10", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T10:22:17.568753Z", "level": "ERROR", "trace_id": "2cedd0c3-431f-4a47-9ae6-699db8a5ad10", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 446, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T10:23:44.284196Z", "level": "ERROR", "trace_id": "bbb7854a-7bd0-4b88-b599-6a4c9c6975a3", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T10:23:44.285332Z", "level": "ERROR", "trace_id": "bbb7854a-7bd0-4b88-b599-6a4c9c6975a3", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 446, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T10:23:51.261157Z", "level": "ERROR", "trace_id": "1df760c3-1065-4d8a-a933-bacc2ee70cda", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T10:23:51.262099Z", "level": "ERROR", "trace_id": "1df760c3-1065-4d8a-a933-bacc2ee70cda", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 446, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T10:24:01.596672Z", "level": "ERROR", "trace_id": "1df760c3-1065-4d8a-a933-bacc2ee70cda", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T10:24:01.597815Z", "level": "ERROR", "trace_id": "1df760c3-1065-4d8a-a933-bacc2ee70cda", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T10:24:01.698940Z", "level": "ERROR", "trace_id": "1df760c3-1065-4d8a-a933-bacc2ee70cda", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T10:32:41.544208Z", "level": "ERROR", "trace_id": "cbfff9be-8663-4eb8-80bd-762d21e98263", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T10:32:41.544208Z", "level": "ERROR", "trace_id": "cbfff9be-8663-4eb8-80bd-762d21e98263", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 446, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T10:37:25.279350Z", "level": "ERROR", "trace_id": "44ccb314-1b60-4752-a2ec-752b36f362ca", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T10:37:25.279885Z", "level": "ERROR", "trace_id": "44ccb314-1b60-4752-a2ec-752b36f362ca", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 446, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T10:38:13.377552Z", "level": "ERROR", "trace_id": "96c7dc35-bff6-473b-b401-cc23e3f220be", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T10:38:13.378609Z", "level": "ERROR", "trace_id": "96c7dc35-bff6-473b-b401-cc23e3f220be", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 446, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T10:40:19.666494Z", "level": "ERROR", "trace_id": "b90ee346-2505-41b5-b2b4-e50fbe67731c", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T10:40:19.666494Z", "level": "ERROR", "trace_id": "b90ee346-2505-41b5-b2b4-e50fbe67731c", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 446, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T10:57:50.380389Z", "level": "ERROR", "trace_id": "cc87862f-9a30-41a2-be83-f5bd0d24f7f1", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T10:57:50.381530Z", "level": "ERROR", "trace_id": "cc87862f-9a30-41a2-be83-f5bd0d24f7f1", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 446, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T10:57:51.074627Z", "level": "ERROR", "trace_id": "cc87862f-9a30-41a2-be83-f5bd0d24f7f1", "module": "main", "message": "Request validation error: 'Address' object has no attribute 'get'", "location": {"file": "D:\\dex\\backend\\main.py", "line": 140, "function": "dispatch"}}
{"timestamp": "2025-08-26T10:57:51.075656Z", "level": "ERROR", "trace_id": "cc87862f-9a30-41a2-be83-f5bd0d24f7f1", "module": "main", "message": "Unhandled exception: AttributeError: 'Address' object has no attribute 'get'", "location": {"file": "D:\\dex\\backend\\main.py", "line": 937, "function": "global_exception_handler"}}
{"timestamp": "2025-08-26T10:57:51.231881Z", "level": "ERROR", "trace_id": "cc87862f-9a30-41a2-be83-f5bd0d24f7f1", "module": "main", "message": "Request validation error: 'Address' object has no attribute 'get'", "location": {"file": "D:\\dex\\backend\\main.py", "line": 140, "function": "dispatch"}}
{"timestamp": "2025-08-26T10:57:51.232880Z", "level": "ERROR", "trace_id": "cc87862f-9a30-41a2-be83-f5bd0d24f7f1", "module": "main", "message": "Unhandled exception: AttributeError: 'Address' object has no attribute 'get'", "location": {"file": "D:\\dex\\backend\\main.py", "line": 937, "function": "global_exception_handler"}}
{"timestamp": "2025-08-26T10:57:51.245263Z", "level": "ERROR", "trace_id": "cc87862f-9a30-41a2-be83-f5bd0d24f7f1", "module": "main", "message": "Request validation error: 'Address' object has no attribute 'get'", "location": {"file": "D:\\dex\\backend\\main.py", "line": 140, "function": "dispatch"}}
{"timestamp": "2025-08-26T10:57:51.246731Z", "level": "ERROR", "trace_id": "cc87862f-9a30-41a2-be83-f5bd0d24f7f1", "module": "main", "message": "Unhandled exception: AttributeError: 'Address' object has no attribute 'get'", "location": {"file": "D:\\dex\\backend\\main.py", "line": 937, "function": "global_exception_handler"}}
{"timestamp": "2025-08-26T10:57:51.256594Z", "level": "ERROR", "trace_id": "cc87862f-9a30-41a2-be83-f5bd0d24f7f1", "module": "main", "message": "Request validation error: 'Address' object has no attribute 'get'", "location": {"file": "D:\\dex\\backend\\main.py", "line": 140, "function": "dispatch"}}
{"timestamp": "2025-08-26T10:57:51.258137Z", "level": "ERROR", "trace_id": "cc87862f-9a30-41a2-be83-f5bd0d24f7f1", "module": "main", "message": "Unhandled exception: AttributeError: 'Address' object has no attribute 'get'", "location": {"file": "D:\\dex\\backend\\main.py", "line": 937, "function": "global_exception_handler"}}
{"timestamp": "2025-08-26T10:59:07.071091Z", "level": "ERROR", "trace_id": "d6fc776f-8064-48f5-80f2-c96b22a13571", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T10:59:07.071091Z", "level": "ERROR", "trace_id": "d6fc776f-8064-48f5-80f2-c96b22a13571", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 446, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T10:59:24.540514Z", "level": "ERROR", "trace_id": "d5000ece-13a9-4791-b2f9-ff5e972032ed", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T10:59:24.541704Z", "level": "ERROR", "trace_id": "d5000ece-13a9-4791-b2f9-ff5e972032ed", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 446, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T11:02:46.156229Z", "level": "ERROR", "trace_id": "b847bab3-6dc0-4e4c-8e6e-93b14883bbb4", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T11:02:46.157307Z", "level": "ERROR", "trace_id": "b847bab3-6dc0-4e4c-8e6e-93b14883bbb4", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 446, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T11:02:53.114565Z", "level": "ERROR", "trace_id": "4e5f4d97-11a2-4e4a-ac17-203bb1145e98", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T11:02:53.116339Z", "level": "ERROR", "trace_id": "4e5f4d97-11a2-4e4a-ac17-203bb1145e98", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 446, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T11:03:21.493682Z", "level": "ERROR", "trace_id": "8644c345-8bb0-4c8c-95cc-201e45b1ac87", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T11:03:21.493682Z", "level": "ERROR", "trace_id": "8644c345-8bb0-4c8c-95cc-201e45b1ac87", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 446, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T11:04:41.390443Z", "level": "ERROR", "trace_id": "cc118adc-3ac6-4a02-b595-e9f06070458c", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T11:04:41.390443Z", "level": "ERROR", "trace_id": "cc118adc-3ac6-4a02-b595-e9f06070458c", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 446, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T11:04:48.440433Z", "level": "ERROR", "trace_id": "52b03677-1bea-4af4-a357-07fa268aa891", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T11:04:48.440433Z", "level": "ERROR", "trace_id": "52b03677-1bea-4af4-a357-07fa268aa891", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 446, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T11:06:38.190734Z", "level": "ERROR", "trace_id": "3de0ca05-3111-4300-b39c-65347e51629b", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T11:06:38.191240Z", "level": "ERROR", "trace_id": "3de0ca05-3111-4300-b39c-65347e51629b", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 446, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T11:11:05.388419Z", "level": "ERROR", "trace_id": "b650dcb5-7852-4ea9-b2b2-ad200c0dc84d", "module": "main", "message": "CORS configuration failed: `BaseSettings` has been moved to the `pydantic-settings` package. See https://docs.pydantic.dev/2.11/migration/#basesettings-has-moved-to-pydantic-settings for more details.\n\nFor further information visit https://errors.pydantic.dev/2.11/u/import-error", "location": {"file": "D:\\dex\\backend\\main.py", "line": 875, "function": "<module>"}}
{"timestamp": "2025-08-26T11:11:09.547445Z", "level": "ERROR", "trace_id": "b650dcb5-7852-4ea9-b2b2-ad200c0dc84d", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T11:11:09.547445Z", "level": "ERROR", "trace_id": "b650dcb5-7852-4ea9-b2b2-ad200c0dc84d", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 446, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T11:11:18.021697Z", "level": "ERROR", "trace_id": "2c749787-1361-4b0f-a9a0-822c002c3d95", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T11:11:18.022233Z", "level": "ERROR", "trace_id": "2c749787-1361-4b0f-a9a0-822c002c3d95", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 446, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T11:11:25.074558Z", "level": "ERROR", "trace_id": "a58275c8-4be6-4435-9360-4e4179fcaef0", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T11:11:25.074558Z", "level": "ERROR", "trace_id": "a58275c8-4be6-4435-9360-4e4179fcaef0", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 446, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T11:12:35.674010Z", "level": "ERROR", "trace_id": "00643e72-2c48-471e-82d5-a07877956cb7", "module": "main", "message": "CORS configuration failed: `BaseSettings` has been moved to the `pydantic-settings` package. See https://docs.pydantic.dev/2.11/migration/#basesettings-has-moved-to-pydantic-settings for more details.\n\nFor further information visit https://errors.pydantic.dev/2.11/u/import-error", "location": {"file": "D:\\dex\\backend\\main.py", "line": 875, "function": "<module>"}}
{"timestamp": "2025-08-26T11:12:39.831015Z", "level": "ERROR", "trace_id": "00643e72-2c48-471e-82d5-a07877956cb7", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T11:12:39.831015Z", "level": "ERROR", "trace_id": "00643e72-2c48-471e-82d5-a07877956cb7", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 446, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T11:12:46.904795Z", "level": "ERROR", "trace_id": "e035ca94-3d3d-460e-9d10-6c8bad4a47a9", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T11:12:46.904795Z", "level": "ERROR", "trace_id": "e035ca94-3d3d-460e-9d10-6c8bad4a47a9", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 446, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T11:12:53.942332Z", "level": "ERROR", "trace_id": "0451a434-d45c-498f-ad2f-eadce8fa264c", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T11:12:53.942332Z", "level": "ERROR", "trace_id": "0451a434-d45c-498f-ad2f-eadce8fa264c", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 446, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T11:14:05.181455Z", "level": "ERROR", "trace_id": "7dc487d1-d85f-4d45-8910-fedb9cf5c15b", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T11:14:05.181455Z", "level": "ERROR", "trace_id": "7dc487d1-d85f-4d45-8910-fedb9cf5c15b", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 446, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T11:14:21.589759Z", "level": "ERROR", "trace_id": "f0191a2d-a745-4665-99f5-101b63093333", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T11:14:21.589759Z", "level": "ERROR", "trace_id": "f0191a2d-a745-4665-99f5-101b63093333", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 446, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T11:15:55.045261Z", "level": "ERROR", "trace_id": "a67b2f2c-b721-47d7-b74d-6c1bd716cab6", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T11:15:55.046806Z", "level": "ERROR", "trace_id": "a67b2f2c-b721-47d7-b74d-6c1bd716cab6", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 446, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T11:16:02.157361Z", "level": "ERROR", "trace_id": "22a36041-015a-424f-bf57-72fbcd845abf", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T11:16:02.157361Z", "level": "ERROR", "trace_id": "22a36041-015a-424f-bf57-72fbcd845abf", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 446, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T11:17:57.707959Z", "level": "ERROR", "trace_id": "29c22e73-deba-4e4d-8986-66d6154672b7", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T11:17:57.707959Z", "level": "ERROR", "trace_id": "29c22e73-deba-4e4d-8986-66d6154672b7", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 446, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T11:21:21.271213Z", "level": "ERROR", "trace_id": "4aa0f31f-d63f-4c53-8c04-1c5df849b9a0", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T11:21:21.272594Z", "level": "ERROR", "trace_id": "4aa0f31f-d63f-4c53-8c04-1c5df849b9a0", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 446, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T11:22:35.802507Z", "level": "ERROR", "trace_id": "2b1ea372-b5f1-4569-b3a2-d03907c9ca80", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T11:22:35.803458Z", "level": "ERROR", "trace_id": "2b1ea372-b5f1-4569-b3a2-d03907c9ca80", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 446, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T11:22:42.800369Z", "level": "ERROR", "trace_id": "50249381-4c19-4716-a246-f451ac006a10", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T11:22:42.801227Z", "level": "ERROR", "trace_id": "50249381-4c19-4716-a246-f451ac006a10", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 446, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T11:22:44.853737Z", "level": "ERROR", "trace_id": "50249381-4c19-4716-a246-f451ac006a10", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T11:22:44.853737Z", "level": "ERROR", "trace_id": "50249381-4c19-4716-a246-f451ac006a10", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T11:22:44.951353Z", "level": "ERROR", "trace_id": "50249381-4c19-4716-a246-f451ac006a10", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T11:22:48.271955Z", "level": "ERROR", "trace_id": "50249381-4c19-4716-a246-f451ac006a10", "module": "app.core.dependencies", "message": "Authentication system error: 1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing", "exception": {"type": "ValidationError", "message": "1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 315, in get_current_user\n    current_user = CurrentUser(\n                   ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 253, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "pydantic_core._pydantic_core.ValidationError: 1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 353, "function": "get_current_user"}}
{"timestamp": "2025-08-26T11:22:48.282025Z", "level": "ERROR", "trace_id": "50249381-4c19-4716-a246-f451ac006a10", "module": "app.core.dependencies", "message": "Authentication system error: 1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing", "exception": {"type": "ValidationError", "message": "1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 315, in get_current_user\n    current_user = CurrentUser(\n                   ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 253, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "pydantic_core._pydantic_core.ValidationError: 1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 353, "function": "get_current_user"}}
{"timestamp": "2025-08-26T11:22:48.302402Z", "level": "ERROR", "trace_id": "50249381-4c19-4716-a246-f451ac006a10", "module": "app.core.dependencies", "message": "Authentication system error: 1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing", "exception": {"type": "ValidationError", "message": "1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 315, in get_current_user\n    current_user = CurrentUser(\n                   ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 253, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "pydantic_core._pydantic_core.ValidationError: 1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 353, "function": "get_current_user"}}
{"timestamp": "2025-08-26T11:22:48.345464Z", "level": "ERROR", "trace_id": "50249381-4c19-4716-a246-f451ac006a10", "module": "app.core.dependencies", "message": "Authentication system error: 1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing", "exception": {"type": "ValidationError", "message": "1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 315, in get_current_user\n    current_user = CurrentUser(\n                   ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 253, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "pydantic_core._pydantic_core.ValidationError: 1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 353, "function": "get_current_user"}}
{"timestamp": "2025-08-26T11:22:48.354016Z", "level": "ERROR", "trace_id": "50249381-4c19-4716-a246-f451ac006a10", "module": "app.core.dependencies", "message": "Authentication system error: 1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing", "exception": {"type": "ValidationError", "message": "1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 315, in get_current_user\n    current_user = CurrentUser(\n                   ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 253, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "pydantic_core._pydantic_core.ValidationError: 1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 353, "function": "get_current_user"}}
{"timestamp": "2025-08-26T11:22:48.373607Z", "level": "ERROR", "trace_id": "50249381-4c19-4716-a246-f451ac006a10", "module": "app.core.dependencies", "message": "Authentication system error: 1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing", "exception": {"type": "ValidationError", "message": "1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 315, in get_current_user\n    current_user = CurrentUser(\n                   ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 253, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "pydantic_core._pydantic_core.ValidationError: 1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 353, "function": "get_current_user"}}
{"timestamp": "2025-08-26T16:36:42.081957Z", "level": "ERROR", "trace_id": "976a92f6-1deb-4b2b-a1fd-6eb3e12166c9", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T16:36:42.099929Z", "level": "ERROR", "trace_id": "976a92f6-1deb-4b2b-a1fd-6eb3e12166c9", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 446, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T16:36:57.913550Z", "level": "ERROR", "trace_id": "976a92f6-1deb-4b2b-a1fd-6eb3e12166c9", "module": "app.core.dependencies", "message": "Authentication system error: 1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing", "exception": {"type": "ValidationError", "message": "1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 315, in get_current_user\n    current_user = CurrentUser(\n                   ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 253, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "pydantic_core._pydantic_core.ValidationError: 1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 353, "function": "get_current_user"}}
{"timestamp": "2025-08-26T16:36:57.922518Z", "level": "ERROR", "trace_id": "976a92f6-1deb-4b2b-a1fd-6eb3e12166c9", "module": "app.core.dependencies", "message": "Authentication system error: 1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing", "exception": {"type": "ValidationError", "message": "1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 315, in get_current_user\n    current_user = CurrentUser(\n                   ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 253, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "pydantic_core._pydantic_core.ValidationError: 1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 353, "function": "get_current_user"}}
{"timestamp": "2025-08-26T16:36:57.936459Z", "level": "ERROR", "trace_id": "976a92f6-1deb-4b2b-a1fd-6eb3e12166c9", "module": "app.core.dependencies", "message": "Authentication system error: 1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing", "exception": {"type": "ValidationError", "message": "1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 315, in get_current_user\n    current_user = CurrentUser(\n                   ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 253, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "pydantic_core._pydantic_core.ValidationError: 1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 353, "function": "get_current_user"}}
{"timestamp": "2025-08-26T16:36:57.948440Z", "level": "ERROR", "trace_id": "976a92f6-1deb-4b2b-a1fd-6eb3e12166c9", "module": "app.core.dependencies", "message": "Authentication system error: 1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing", "exception": {"type": "ValidationError", "message": "1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 315, in get_current_user\n    current_user = CurrentUser(\n                   ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 253, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "pydantic_core._pydantic_core.ValidationError: 1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 353, "function": "get_current_user"}}
{"timestamp": "2025-08-26T16:36:57.957003Z", "level": "ERROR", "trace_id": "976a92f6-1deb-4b2b-a1fd-6eb3e12166c9", "module": "app.core.dependencies", "message": "Authentication system error: 1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing", "exception": {"type": "ValidationError", "message": "1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 315, in get_current_user\n    current_user = CurrentUser(\n                   ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 253, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "pydantic_core._pydantic_core.ValidationError: 1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 353, "function": "get_current_user"}}
{"timestamp": "2025-08-26T16:36:57.964987Z", "level": "ERROR", "trace_id": "976a92f6-1deb-4b2b-a1fd-6eb3e12166c9", "module": "app.core.dependencies", "message": "Authentication system error: 1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing", "exception": {"type": "ValidationError", "message": "1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 315, in get_current_user\n    current_user = CurrentUser(\n                   ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 253, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "pydantic_core._pydantic_core.ValidationError: 1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 353, "function": "get_current_user"}}
{"timestamp": "2025-08-26T16:37:03.709555Z", "level": "ERROR", "trace_id": "976a92f6-1deb-4b2b-a1fd-6eb3e12166c9", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T16:37:03.709555Z", "level": "ERROR", "trace_id": "976a92f6-1deb-4b2b-a1fd-6eb3e12166c9", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T16:37:03.810457Z", "level": "ERROR", "trace_id": "976a92f6-1deb-4b2b-a1fd-6eb3e12166c9", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T16:37:06.784972Z", "level": "ERROR", "trace_id": "976a92f6-1deb-4b2b-a1fd-6eb3e12166c9", "module": "app.core.dependencies", "message": "Authentication system error: 1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing", "exception": {"type": "ValidationError", "message": "1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 315, in get_current_user\n    current_user = CurrentUser(\n                   ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 253, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "pydantic_core._pydantic_core.ValidationError: 1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 353, "function": "get_current_user"}}
{"timestamp": "2025-08-26T16:37:06.797527Z", "level": "ERROR", "trace_id": "976a92f6-1deb-4b2b-a1fd-6eb3e12166c9", "module": "app.core.dependencies", "message": "Authentication system error: 1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing", "exception": {"type": "ValidationError", "message": "1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 315, in get_current_user\n    current_user = CurrentUser(\n                   ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 253, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "pydantic_core._pydantic_core.ValidationError: 1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 353, "function": "get_current_user"}}
{"timestamp": "2025-08-26T16:37:06.807233Z", "level": "ERROR", "trace_id": "976a92f6-1deb-4b2b-a1fd-6eb3e12166c9", "module": "app.core.dependencies", "message": "Authentication system error: 1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing", "exception": {"type": "ValidationError", "message": "1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 315, in get_current_user\n    current_user = CurrentUser(\n                   ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 253, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "pydantic_core._pydantic_core.ValidationError: 1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 353, "function": "get_current_user"}}
{"timestamp": "2025-08-26T16:37:17.949967Z", "level": "ERROR", "trace_id": "976a92f6-1deb-4b2b-a1fd-6eb3e12166c9", "module": "app.core.dependencies", "message": "Authentication system error: 1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing", "exception": {"type": "ValidationError", "message": "1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 315, in get_current_user\n    current_user = CurrentUser(\n                   ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 253, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "pydantic_core._pydantic_core.ValidationError: 1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 353, "function": "get_current_user"}}
{"timestamp": "2025-08-26T16:37:17.957510Z", "level": "ERROR", "trace_id": "976a92f6-1deb-4b2b-a1fd-6eb3e12166c9", "module": "app.core.dependencies", "message": "Authentication system error: 1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing", "exception": {"type": "ValidationError", "message": "1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 315, in get_current_user\n    current_user = CurrentUser(\n                   ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 253, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "pydantic_core._pydantic_core.ValidationError: 1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 353, "function": "get_current_user"}}
{"timestamp": "2025-08-26T16:37:18.006374Z", "level": "ERROR", "trace_id": "976a92f6-1deb-4b2b-a1fd-6eb3e12166c9", "module": "app.core.dependencies", "message": "Authentication system error: 1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing", "exception": {"type": "ValidationError", "message": "1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 315, in get_current_user\n    current_user = CurrentUser(\n                   ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 253, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "pydantic_core._pydantic_core.ValidationError: 1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 353, "function": "get_current_user"}}
{"timestamp": "2025-08-26T16:37:18.037866Z", "level": "ERROR", "trace_id": "976a92f6-1deb-4b2b-a1fd-6eb3e12166c9", "module": "app.core.dependencies", "message": "Authentication system error: 1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing", "exception": {"type": "ValidationError", "message": "1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 315, in get_current_user\n    current_user = CurrentUser(\n                   ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 253, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "pydantic_core._pydantic_core.ValidationError: 1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 353, "function": "get_current_user"}}
{"timestamp": "2025-08-26T16:37:18.045407Z", "level": "ERROR", "trace_id": "976a92f6-1deb-4b2b-a1fd-6eb3e12166c9", "module": "app.core.dependencies", "message": "Authentication system error: 1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing", "exception": {"type": "ValidationError", "message": "1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 315, in get_current_user\n    current_user = CurrentUser(\n                   ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 253, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "pydantic_core._pydantic_core.ValidationError: 1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 353, "function": "get_current_user"}}
{"timestamp": "2025-08-26T16:37:18.056633Z", "level": "ERROR", "trace_id": "976a92f6-1deb-4b2b-a1fd-6eb3e12166c9", "module": "app.core.dependencies", "message": "Authentication system error: 1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing", "exception": {"type": "ValidationError", "message": "1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 315, in get_current_user\n    current_user = CurrentUser(\n                   ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 253, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "pydantic_core._pydantic_core.ValidationError: 1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 353, "function": "get_current_user"}}
{"timestamp": "2025-08-26T16:37:36.668195Z", "level": "ERROR", "trace_id": "976a92f6-1deb-4b2b-a1fd-6eb3e12166c9", "module": "app.core.dependencies", "message": "Authentication system error: 1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing", "exception": {"type": "ValidationError", "message": "1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 315, in get_current_user\n    current_user = CurrentUser(\n                   ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 253, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "pydantic_core._pydantic_core.ValidationError: 1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 353, "function": "get_current_user"}}
{"timestamp": "2025-08-26T16:37:36.674842Z", "level": "ERROR", "trace_id": "976a92f6-1deb-4b2b-a1fd-6eb3e12166c9", "module": "app.core.dependencies", "message": "Authentication system error: 1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing", "exception": {"type": "ValidationError", "message": "1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 315, in get_current_user\n    current_user = CurrentUser(\n                   ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 253, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "pydantic_core._pydantic_core.ValidationError: 1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 353, "function": "get_current_user"}}
{"timestamp": "2025-08-26T16:37:36.724513Z", "level": "ERROR", "trace_id": "976a92f6-1deb-4b2b-a1fd-6eb3e12166c9", "module": "app.core.dependencies", "message": "Authentication system error: 1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing", "exception": {"type": "ValidationError", "message": "1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 315, in get_current_user\n    current_user = CurrentUser(\n                   ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 253, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "pydantic_core._pydantic_core.ValidationError: 1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 353, "function": "get_current_user"}}
{"timestamp": "2025-08-26T16:37:36.735283Z", "level": "ERROR", "trace_id": "976a92f6-1deb-4b2b-a1fd-6eb3e12166c9", "module": "app.core.dependencies", "message": "Authentication system error: 1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing", "exception": {"type": "ValidationError", "message": "1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 315, in get_current_user\n    current_user = CurrentUser(\n                   ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 253, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "pydantic_core._pydantic_core.ValidationError: 1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 353, "function": "get_current_user"}}
{"timestamp": "2025-08-26T16:37:36.742614Z", "level": "ERROR", "trace_id": "976a92f6-1deb-4b2b-a1fd-6eb3e12166c9", "module": "app.core.dependencies", "message": "Authentication system error: 1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing", "exception": {"type": "ValidationError", "message": "1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 315, in get_current_user\n    current_user = CurrentUser(\n                   ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 253, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "pydantic_core._pydantic_core.ValidationError: 1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 353, "function": "get_current_user"}}
{"timestamp": "2025-08-26T16:37:36.752742Z", "level": "ERROR", "trace_id": "976a92f6-1deb-4b2b-a1fd-6eb3e12166c9", "module": "app.core.dependencies", "message": "Authentication system error: 1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing", "exception": {"type": "ValidationError", "message": "1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 315, in get_current_user\n    current_user = CurrentUser(\n                   ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 253, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "pydantic_core._pydantic_core.ValidationError: 1 validation error for CurrentUser\nuser_id\n  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='dev_user', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 353, "function": "get_current_user"}}
{"timestamp": "2025-08-26T16:37:39.870309Z", "level": "ERROR", "trace_id": "976a92f6-1deb-4b2b-a1fd-6eb3e12166c9", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T16:37:39.870309Z", "level": "ERROR", "trace_id": "976a92f6-1deb-4b2b-a1fd-6eb3e12166c9", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T16:37:39.985324Z", "level": "ERROR", "trace_id": "976a92f6-1deb-4b2b-a1fd-6eb3e12166c9", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T16:39:54.898233Z", "level": "ERROR", "trace_id": "d711ab77-8ca1-4c51-bbeb-415a5269d5bc", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T16:39:54.899362Z", "level": "ERROR", "trace_id": "d711ab77-8ca1-4c51-bbeb-415a5269d5bc", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 446, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T16:40:09.999215Z", "level": "ERROR", "trace_id": "9eafb782-ec1e-48fe-a1e8-cbd62f0b356a", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T16:40:09.999760Z", "level": "ERROR", "trace_id": "9eafb782-ec1e-48fe-a1e8-cbd62f0b356a", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 446, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T16:40:28.286522Z", "level": "ERROR", "trace_id": "9eafb782-ec1e-48fe-a1e8-cbd62f0b356a", "module": "main", "message": "Request validation error: name 'uuid' is not defined", "location": {"file": "D:\\dex\\backend\\main.py", "line": 140, "function": "dispatch"}}
{"timestamp": "2025-08-26T16:40:28.286522Z", "level": "ERROR", "trace_id": "9eafb782-ec1e-48fe-a1e8-cbd62f0b356a", "module": "main", "message": "Unhandled exception: NameError: name 'uuid' is not defined", "location": {"file": "D:\\dex\\backend\\main.py", "line": 937, "function": "global_exception_handler"}}
{"timestamp": "2025-08-26T16:40:28.424588Z", "level": "ERROR", "trace_id": "9eafb782-ec1e-48fe-a1e8-cbd62f0b356a", "module": "main", "message": "Request validation error: name 'uuid' is not defined", "location": {"file": "D:\\dex\\backend\\main.py", "line": 140, "function": "dispatch"}}
{"timestamp": "2025-08-26T16:40:28.425634Z", "level": "ERROR", "trace_id": "9eafb782-ec1e-48fe-a1e8-cbd62f0b356a", "module": "main", "message": "Unhandled exception: NameError: name 'uuid' is not defined", "location": {"file": "D:\\dex\\backend\\main.py", "line": 937, "function": "global_exception_handler"}}
{"timestamp": "2025-08-26T16:40:28.445436Z", "level": "ERROR", "trace_id": "9eafb782-ec1e-48fe-a1e8-cbd62f0b356a", "module": "main", "message": "Request validation error: name 'uuid' is not defined", "location": {"file": "D:\\dex\\backend\\main.py", "line": 140, "function": "dispatch"}}
{"timestamp": "2025-08-26T16:40:28.446597Z", "level": "ERROR", "trace_id": "9eafb782-ec1e-48fe-a1e8-cbd62f0b356a", "module": "main", "message": "Unhandled exception: NameError: name 'uuid' is not defined", "location": {"file": "D:\\dex\\backend\\main.py", "line": 937, "function": "global_exception_handler"}}
{"timestamp": "2025-08-26T16:40:28.455695Z", "level": "ERROR", "trace_id": "9eafb782-ec1e-48fe-a1e8-cbd62f0b356a", "module": "main", "message": "Request validation error: name 'uuid' is not defined", "location": {"file": "D:\\dex\\backend\\main.py", "line": 140, "function": "dispatch"}}
{"timestamp": "2025-08-26T16:40:28.458118Z", "level": "ERROR", "trace_id": "9eafb782-ec1e-48fe-a1e8-cbd62f0b356a", "module": "main", "message": "Unhandled exception: NameError: name 'uuid' is not defined", "location": {"file": "D:\\dex\\backend\\main.py", "line": 937, "function": "global_exception_handler"}}
{"timestamp": "2025-08-26T16:40:28.468553Z", "level": "ERROR", "trace_id": "9eafb782-ec1e-48fe-a1e8-cbd62f0b356a", "module": "main", "message": "Request validation error: name 'uuid' is not defined", "location": {"file": "D:\\dex\\backend\\main.py", "line": 140, "function": "dispatch"}}
{"timestamp": "2025-08-26T16:40:28.468553Z", "level": "ERROR", "trace_id": "9eafb782-ec1e-48fe-a1e8-cbd62f0b356a", "module": "main", "message": "Request validation error: name 'uuid' is not defined", "location": {"file": "D:\\dex\\backend\\main.py", "line": 140, "function": "dispatch"}}
{"timestamp": "2025-08-26T16:40:28.469597Z", "level": "ERROR", "trace_id": "9eafb782-ec1e-48fe-a1e8-cbd62f0b356a", "module": "main", "message": "Unhandled exception: NameError: name 'uuid' is not defined", "location": {"file": "D:\\dex\\backend\\main.py", "line": 937, "function": "global_exception_handler"}}
{"timestamp": "2025-08-26T16:40:28.477494Z", "level": "ERROR", "trace_id": "9eafb782-ec1e-48fe-a1e8-cbd62f0b356a", "module": "main", "message": "Unhandled exception: NameError: name 'uuid' is not defined", "location": {"file": "D:\\dex\\backend\\main.py", "line": 937, "function": "global_exception_handler"}}
{"timestamp": "2025-08-26T16:44:36.557552Z", "level": "ERROR", "trace_id": "d5b88a5f-d9fd-4e91-b9c3-2dcba2e47475", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T16:44:36.557552Z", "level": "ERROR", "trace_id": "d5b88a5f-d9fd-4e91-b9c3-2dcba2e47475", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 446, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T16:45:07.355187Z", "level": "ERROR", "trace_id": "d5b88a5f-d9fd-4e91-b9c3-2dcba2e47475", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T16:45:07.355187Z", "level": "ERROR", "trace_id": "d5b88a5f-d9fd-4e91-b9c3-2dcba2e47475", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T16:45:07.460672Z", "level": "ERROR", "trace_id": "d5b88a5f-d9fd-4e91-b9c3-2dcba2e47475", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T16:51:39.732693Z", "level": "ERROR", "trace_id": "d5b88a5f-d9fd-4e91-b9c3-2dcba2e47475", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T16:51:39.732693Z", "level": "ERROR", "trace_id": "d5b88a5f-d9fd-4e91-b9c3-2dcba2e47475", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T16:51:39.834111Z", "level": "ERROR", "trace_id": "d5b88a5f-d9fd-4e91-b9c3-2dcba2e47475", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T17:06:16.825204Z", "level": "ERROR", "trace_id": "716c6ccd-85bf-4202-a0b4-a6f8b73a4ee9", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T17:06:16.826494Z", "level": "ERROR", "trace_id": "716c6ccd-85bf-4202-a0b4-a6f8b73a4ee9", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 446, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T17:08:28.768835Z", "level": "ERROR", "trace_id": "f61699af-0a97-4868-9171-1a85a4059cb7", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T17:08:28.768835Z", "level": "ERROR", "trace_id": "f61699af-0a97-4868-9171-1a85a4059cb7", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 446, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T17:08:31.827576Z", "level": "ERROR", "trace_id": "2250ce84-20bc-4f84-990f-9dc3340d1e25", "module": "main", "message": "Failed to include Ledger API router: name 'fallback_success_count' is not defined", "location": {"file": "D:\\dex\\backend\\main.py", "line": 998, "function": "<module>"}}
{"timestamp": "2025-08-26T17:08:38.325763Z", "level": "ERROR", "trace_id": "5c2b61ac-579c-4c79-b08f-ad95fbabc187", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T17:08:38.326874Z", "level": "ERROR", "trace_id": "5c2b61ac-579c-4c79-b08f-ad95fbabc187", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 446, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T17:08:48.879061Z", "level": "ERROR", "trace_id": "7e000748-57ec-45a2-ba5f-806e61628773", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T17:08:48.879567Z", "level": "ERROR", "trace_id": "7e000748-57ec-45a2-ba5f-806e61628773", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 446, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T17:08:58.484592Z", "level": "ERROR", "trace_id": "e556a174-c110-4fdc-9f9d-ba368398e10b", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T17:08:58.484592Z", "level": "ERROR", "trace_id": "e556a174-c110-4fdc-9f9d-ba368398e10b", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 446, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T17:09:05.736279Z", "level": "ERROR", "trace_id": "7a4c7cf6-3e1f-48a1-87d8-cfa3b4e035c2", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T17:09:05.736279Z", "level": "ERROR", "trace_id": "7a4c7cf6-3e1f-48a1-87d8-cfa3b4e035c2", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 446, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T17:15:46.080165Z", "level": "ERROR", "trace_id": "945fa9dd-e088-425e-acfa-e74a91911add", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T17:15:46.080165Z", "level": "ERROR", "trace_id": "945fa9dd-e088-425e-acfa-e74a91911add", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T17:19:22.574880Z", "level": "ERROR", "trace_id": "ee8b24d7-fa4c-4967-b387-507a028251df", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T17:19:22.574880Z", "level": "ERROR", "trace_id": "ee8b24d7-fa4c-4967-b387-507a028251df", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T17:21:20.166782Z", "level": "ERROR", "trace_id": "03d02ac2-087d-452f-b54a-facb942e063c", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T17:21:20.167290Z", "level": "ERROR", "trace_id": "03d02ac2-087d-452f-b54a-facb942e063c", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T17:21:20.623262Z", "level": "ERROR", "trace_id": "03d02ac2-087d-452f-b54a-facb942e063c", "module": "app.api.ledger", "message": "Unexpected error fetching positions: type object 'LedgerEntry' has no attribute 'user_id'", "exception": {"type": "AttributeError", "message": "type object 'LedgerEntry' has no attribute 'user_id'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 130, in get_positions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 651, in get_user_ledger\n    conditions = [LedgerEntry.user_id == user_id]\n                  ^^^^^^^^^^^^^^^^^^^\n", "AttributeError: type object 'LedgerEntry' has no attribute 'user_id'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 189, "function": "get_positions"}}
{"timestamp": "2025-08-26T17:21:20.630980Z", "level": "ERROR", "trace_id": "03d02ac2-087d-452f-b54a-facb942e063c", "module": "app.api.ledger", "message": "Unexpected error calculating portfolio summary: type object 'LedgerEntry' has no attribute 'user_id'", "exception": {"type": "AttributeError", "message": "type object 'LedgerEntry' has no attribute 'user_id'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 409, in get_portfolio_summary\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 651, in get_user_ledger\n    conditions = [LedgerEntry.user_id == user_id]\n                  ^^^^^^^^^^^^^^^^^^^\n", "AttributeError: type object 'LedgerEntry' has no attribute 'user_id'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 456, "function": "get_portfolio_summary"}}
{"timestamp": "2025-08-26T17:21:20.637467Z", "level": "ERROR", "trace_id": "03d02ac2-087d-452f-b54a-facb942e063c", "module": "app.api.ledger", "message": "Unexpected error calculating portfolio summary: type object 'LedgerEntry' has no attribute 'user_id'", "exception": {"type": "AttributeError", "message": "type object 'LedgerEntry' has no attribute 'user_id'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 409, in get_portfolio_summary\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 651, in get_user_ledger\n    conditions = [LedgerEntry.user_id == user_id]\n                  ^^^^^^^^^^^^^^^^^^^\n", "AttributeError: type object 'LedgerEntry' has no attribute 'user_id'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 456, "function": "get_portfolio_summary"}}
{"timestamp": "2025-08-26T17:21:20.643726Z", "level": "ERROR", "trace_id": "03d02ac2-087d-452f-b54a-facb942e063c", "module": "app.api.ledger", "message": "Unexpected error calculating portfolio summary: type object 'LedgerEntry' has no attribute 'user_id'", "exception": {"type": "AttributeError", "message": "type object 'LedgerEntry' has no attribute 'user_id'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 409, in get_portfolio_summary\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 651, in get_user_ledger\n    conditions = [LedgerEntry.user_id == user_id]\n                  ^^^^^^^^^^^^^^^^^^^\n", "AttributeError: type object 'LedgerEntry' has no attribute 'user_id'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 456, "function": "get_portfolio_summary"}}
{"timestamp": "2025-08-26T17:21:20.676099Z", "level": "ERROR", "trace_id": "03d02ac2-087d-452f-b54a-facb942e063c", "module": "app.api.ledger", "message": "Unexpected error fetching transactions: type object 'LedgerEntry' has no attribute 'user_id'", "exception": {"type": "AttributeError", "message": "type object 'LedgerEntry' has no attribute 'user_id'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 263, in get_transactions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 651, in get_user_ledger\n    conditions = [LedgerEntry.user_id == user_id]\n                  ^^^^^^^^^^^^^^^^^^^\n", "AttributeError: type object 'LedgerEntry' has no attribute 'user_id'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 354, "function": "get_transactions"}}
{"timestamp": "2025-08-26T17:21:20.678101Z", "level": "ERROR", "trace_id": "03d02ac2-087d-452f-b54a-facb942e063c", "module": "main", "message": "Request validation error: 'str' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'", "location": {"file": "D:\\dex\\backend\\main.py", "line": 139, "function": "dispatch"}}
{"timestamp": "2025-08-26T17:21:20.685137Z", "level": "ERROR", "trace_id": "03d02ac2-087d-452f-b54a-facb942e063c", "module": "app.api.ledger", "message": "Unexpected error fetching transactions: type object 'LedgerEntry' has no attribute 'user_id'", "exception": {"type": "AttributeError", "message": "type object 'LedgerEntry' has no attribute 'user_id'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 263, in get_transactions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 651, in get_user_ledger\n    conditions = [LedgerEntry.user_id == user_id]\n                  ^^^^^^^^^^^^^^^^^^^\n", "AttributeError: type object 'LedgerEntry' has no attribute 'user_id'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 354, "function": "get_transactions"}}
{"timestamp": "2025-08-26T17:21:20.686134Z", "level": "ERROR", "trace_id": "03d02ac2-087d-452f-b54a-facb942e063c", "module": "main", "message": "Unhandled exception: AttributeError: 'str' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'", "location": {"file": "D:\\dex\\backend\\main.py", "line": 936, "function": "global_exception_handler"}}
{"timestamp": "2025-08-26T17:21:20.741895Z", "level": "ERROR", "trace_id": "03d02ac2-087d-452f-b54a-facb942e063c", "module": "app.api.ledger", "message": "Unexpected error calculating portfolio summary: type object 'LedgerEntry' has no attribute 'user_id'", "exception": {"type": "AttributeError", "message": "type object 'LedgerEntry' has no attribute 'user_id'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 409, in get_portfolio_summary\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 651, in get_user_ledger\n    conditions = [LedgerEntry.user_id == user_id]\n                  ^^^^^^^^^^^^^^^^^^^\n", "AttributeError: type object 'LedgerEntry' has no attribute 'user_id'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 456, "function": "get_portfolio_summary"}}
{"timestamp": "2025-08-26T17:21:44.788888Z", "level": "ERROR", "trace_id": "1e5982c5-ec55-4931-a99b-02542a952ca9", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T17:21:44.790522Z", "level": "ERROR", "trace_id": "1e5982c5-ec55-4931-a99b-02542a952ca9", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T17:21:49.909644Z", "level": "ERROR", "trace_id": "1e5982c5-ec55-4931-a99b-02542a952ca9", "module": "app.api.ledger", "message": "Unexpected error fetching positions: type object 'LedgerEntry' has no attribute 'user_id'", "exception": {"type": "AttributeError", "message": "type object 'LedgerEntry' has no attribute 'user_id'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 130, in get_positions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 651, in get_user_ledger\n    conditions = [LedgerEntry.user_id == user_id]\n                  ^^^^^^^^^^^^^^^^^^^\n", "AttributeError: type object 'LedgerEntry' has no attribute 'user_id'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 189, "function": "get_positions"}}
{"timestamp": "2025-08-26T17:21:49.932412Z", "level": "ERROR", "trace_id": "1e5982c5-ec55-4931-a99b-02542a952ca9", "module": "app.api.ledger", "message": "Unexpected error fetching transactions: type object 'LedgerEntry' has no attribute 'user_id'", "exception": {"type": "AttributeError", "message": "type object 'LedgerEntry' has no attribute 'user_id'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 263, in get_transactions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 651, in get_user_ledger\n    conditions = [LedgerEntry.user_id == user_id]\n                  ^^^^^^^^^^^^^^^^^^^\n", "AttributeError: type object 'LedgerEntry' has no attribute 'user_id'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 354, "function": "get_transactions"}}
{"timestamp": "2025-08-26T17:21:49.933487Z", "level": "ERROR", "trace_id": "1e5982c5-ec55-4931-a99b-02542a952ca9", "module": "main", "message": "Request validation error: 'str' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'", "location": {"file": "D:\\dex\\backend\\main.py", "line": 139, "function": "dispatch"}}
{"timestamp": "2025-08-26T17:21:49.940007Z", "level": "ERROR", "trace_id": "1e5982c5-ec55-4931-a99b-02542a952ca9", "module": "app.api.ledger", "message": "Unexpected error fetching transactions: type object 'LedgerEntry' has no attribute 'user_id'", "exception": {"type": "AttributeError", "message": "type object 'LedgerEntry' has no attribute 'user_id'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 263, in get_transactions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 651, in get_user_ledger\n    conditions = [LedgerEntry.user_id == user_id]\n                  ^^^^^^^^^^^^^^^^^^^\n", "AttributeError: type object 'LedgerEntry' has no attribute 'user_id'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 354, "function": "get_transactions"}}
{"timestamp": "2025-08-26T17:21:49.941079Z", "level": "ERROR", "trace_id": "1e5982c5-ec55-4931-a99b-02542a952ca9", "module": "main", "message": "Unhandled exception: AttributeError: 'str' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'", "location": {"file": "D:\\dex\\backend\\main.py", "line": 936, "function": "global_exception_handler"}}
{"timestamp": "2025-08-26T17:21:49.971015Z", "level": "ERROR", "trace_id": "1e5982c5-ec55-4931-a99b-02542a952ca9", "module": "app.api.ledger", "message": "Unexpected error calculating portfolio summary: type object 'LedgerEntry' has no attribute 'user_id'", "exception": {"type": "AttributeError", "message": "type object 'LedgerEntry' has no attribute 'user_id'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 409, in get_portfolio_summary\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 651, in get_user_ledger\n    conditions = [LedgerEntry.user_id == user_id]\n                  ^^^^^^^^^^^^^^^^^^^\n", "AttributeError: type object 'LedgerEntry' has no attribute 'user_id'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 456, "function": "get_portfolio_summary"}}
{"timestamp": "2025-08-26T17:22:19.881305Z", "level": "ERROR", "trace_id": "1e5982c5-ec55-4931-a99b-02542a952ca9", "module": "app.api.ledger", "message": "Unexpected error fetching positions: type object 'LedgerEntry' has no attribute 'user_id'", "exception": {"type": "AttributeError", "message": "type object 'LedgerEntry' has no attribute 'user_id'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 130, in get_positions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 651, in get_user_ledger\n    conditions = [LedgerEntry.user_id == user_id]\n                  ^^^^^^^^^^^^^^^^^^^\n", "AttributeError: type object 'LedgerEntry' has no attribute 'user_id'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 189, "function": "get_positions"}}
{"timestamp": "2025-08-26T17:22:19.896765Z", "level": "ERROR", "trace_id": "1e5982c5-ec55-4931-a99b-02542a952ca9", "module": "app.api.ledger", "message": "Unexpected error fetching transactions: type object 'LedgerEntry' has no attribute 'user_id'", "exception": {"type": "AttributeError", "message": "type object 'LedgerEntry' has no attribute 'user_id'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 263, in get_transactions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 651, in get_user_ledger\n    conditions = [LedgerEntry.user_id == user_id]\n                  ^^^^^^^^^^^^^^^^^^^\n", "AttributeError: type object 'LedgerEntry' has no attribute 'user_id'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 354, "function": "get_transactions"}}
{"timestamp": "2025-08-26T17:22:19.897929Z", "level": "ERROR", "trace_id": "1e5982c5-ec55-4931-a99b-02542a952ca9", "module": "main", "message": "Request validation error: 'str' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'", "location": {"file": "D:\\dex\\backend\\main.py", "line": 139, "function": "dispatch"}}
{"timestamp": "2025-08-26T17:22:19.903470Z", "level": "ERROR", "trace_id": "1e5982c5-ec55-4931-a99b-02542a952ca9", "module": "app.api.ledger", "message": "Unexpected error fetching transactions: type object 'LedgerEntry' has no attribute 'user_id'", "exception": {"type": "AttributeError", "message": "type object 'LedgerEntry' has no attribute 'user_id'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 263, in get_transactions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 651, in get_user_ledger\n    conditions = [LedgerEntry.user_id == user_id]\n                  ^^^^^^^^^^^^^^^^^^^\n", "AttributeError: type object 'LedgerEntry' has no attribute 'user_id'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 354, "function": "get_transactions"}}
{"timestamp": "2025-08-26T17:22:19.904468Z", "level": "ERROR", "trace_id": "1e5982c5-ec55-4931-a99b-02542a952ca9", "module": "main", "message": "Unhandled exception: AttributeError: 'str' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'", "location": {"file": "D:\\dex\\backend\\main.py", "line": 936, "function": "global_exception_handler"}}
{"timestamp": "2025-08-26T17:22:19.920592Z", "level": "ERROR", "trace_id": "1e5982c5-ec55-4931-a99b-02542a952ca9", "module": "app.api.ledger", "message": "Unexpected error calculating portfolio summary: type object 'LedgerEntry' has no attribute 'user_id'", "exception": {"type": "AttributeError", "message": "type object 'LedgerEntry' has no attribute 'user_id'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 409, in get_portfolio_summary\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 651, in get_user_ledger\n    conditions = [LedgerEntry.user_id == user_id]\n                  ^^^^^^^^^^^^^^^^^^^\n", "AttributeError: type object 'LedgerEntry' has no attribute 'user_id'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 456, "function": "get_portfolio_summary"}}
{"timestamp": "2025-08-26T17:22:49.893867Z", "level": "ERROR", "trace_id": "1e5982c5-ec55-4931-a99b-02542a952ca9", "module": "app.api.ledger", "message": "Unexpected error fetching positions: type object 'LedgerEntry' has no attribute 'user_id'", "exception": {"type": "AttributeError", "message": "type object 'LedgerEntry' has no attribute 'user_id'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 130, in get_positions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 651, in get_user_ledger\n    conditions = [LedgerEntry.user_id == user_id]\n                  ^^^^^^^^^^^^^^^^^^^\n", "AttributeError: type object 'LedgerEntry' has no attribute 'user_id'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 189, "function": "get_positions"}}
{"timestamp": "2025-08-26T17:22:49.931180Z", "level": "ERROR", "trace_id": "1e5982c5-ec55-4931-a99b-02542a952ca9", "module": "app.api.ledger", "message": "Unexpected error fetching transactions: type object 'LedgerEntry' has no attribute 'user_id'", "exception": {"type": "AttributeError", "message": "type object 'LedgerEntry' has no attribute 'user_id'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 263, in get_transactions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 651, in get_user_ledger\n    conditions = [LedgerEntry.user_id == user_id]\n                  ^^^^^^^^^^^^^^^^^^^\n", "AttributeError: type object 'LedgerEntry' has no attribute 'user_id'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 354, "function": "get_transactions"}}
{"timestamp": "2025-08-26T17:22:49.932706Z", "level": "ERROR", "trace_id": "1e5982c5-ec55-4931-a99b-02542a952ca9", "module": "main", "message": "Request validation error: 'str' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'", "location": {"file": "D:\\dex\\backend\\main.py", "line": 139, "function": "dispatch"}}
{"timestamp": "2025-08-26T17:22:49.939237Z", "level": "ERROR", "trace_id": "1e5982c5-ec55-4931-a99b-02542a952ca9", "module": "app.api.ledger", "message": "Unexpected error fetching transactions: type object 'LedgerEntry' has no attribute 'user_id'", "exception": {"type": "AttributeError", "message": "type object 'LedgerEntry' has no attribute 'user_id'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 263, in get_transactions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 651, in get_user_ledger\n    conditions = [LedgerEntry.user_id == user_id]\n                  ^^^^^^^^^^^^^^^^^^^\n", "AttributeError: type object 'LedgerEntry' has no attribute 'user_id'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 354, "function": "get_transactions"}}
{"timestamp": "2025-08-26T17:22:49.941070Z", "level": "ERROR", "trace_id": "1e5982c5-ec55-4931-a99b-02542a952ca9", "module": "main", "message": "Unhandled exception: AttributeError: 'str' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'", "location": {"file": "D:\\dex\\backend\\main.py", "line": 936, "function": "global_exception_handler"}}
{"timestamp": "2025-08-26T17:22:49.976674Z", "level": "ERROR", "trace_id": "1e5982c5-ec55-4931-a99b-02542a952ca9", "module": "app.api.ledger", "message": "Unexpected error calculating portfolio summary: type object 'LedgerEntry' has no attribute 'user_id'", "exception": {"type": "AttributeError", "message": "type object 'LedgerEntry' has no attribute 'user_id'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 409, in get_portfolio_summary\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 651, in get_user_ledger\n    conditions = [LedgerEntry.user_id == user_id]\n                  ^^^^^^^^^^^^^^^^^^^\n", "AttributeError: type object 'LedgerEntry' has no attribute 'user_id'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 456, "function": "get_portfolio_summary"}}
{"timestamp": "2025-08-26T17:23:19.900931Z", "level": "ERROR", "trace_id": "1e5982c5-ec55-4931-a99b-02542a952ca9", "module": "app.api.ledger", "message": "Unexpected error fetching positions: type object 'LedgerEntry' has no attribute 'user_id'", "exception": {"type": "AttributeError", "message": "type object 'LedgerEntry' has no attribute 'user_id'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 130, in get_positions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 651, in get_user_ledger\n    conditions = [LedgerEntry.user_id == user_id]\n                  ^^^^^^^^^^^^^^^^^^^\n", "AttributeError: type object 'LedgerEntry' has no attribute 'user_id'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 189, "function": "get_positions"}}
{"timestamp": "2025-08-26T17:23:19.915350Z", "level": "ERROR", "trace_id": "1e5982c5-ec55-4931-a99b-02542a952ca9", "module": "app.api.ledger", "message": "Unexpected error fetching transactions: type object 'LedgerEntry' has no attribute 'user_id'", "exception": {"type": "AttributeError", "message": "type object 'LedgerEntry' has no attribute 'user_id'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 263, in get_transactions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 651, in get_user_ledger\n    conditions = [LedgerEntry.user_id == user_id]\n                  ^^^^^^^^^^^^^^^^^^^\n", "AttributeError: type object 'LedgerEntry' has no attribute 'user_id'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 354, "function": "get_transactions"}}
{"timestamp": "2025-08-26T17:23:19.917126Z", "level": "ERROR", "trace_id": "1e5982c5-ec55-4931-a99b-02542a952ca9", "module": "main", "message": "Request validation error: 'str' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'", "location": {"file": "D:\\dex\\backend\\main.py", "line": 139, "function": "dispatch"}}
{"timestamp": "2025-08-26T17:23:19.923594Z", "level": "ERROR", "trace_id": "1e5982c5-ec55-4931-a99b-02542a952ca9", "module": "app.api.ledger", "message": "Unexpected error fetching transactions: type object 'LedgerEntry' has no attribute 'user_id'", "exception": {"type": "AttributeError", "message": "type object 'LedgerEntry' has no attribute 'user_id'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 263, in get_transactions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 651, in get_user_ledger\n    conditions = [LedgerEntry.user_id == user_id]\n                  ^^^^^^^^^^^^^^^^^^^\n", "AttributeError: type object 'LedgerEntry' has no attribute 'user_id'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 354, "function": "get_transactions"}}
{"timestamp": "2025-08-26T17:23:19.924591Z", "level": "ERROR", "trace_id": "1e5982c5-ec55-4931-a99b-02542a952ca9", "module": "main", "message": "Unhandled exception: AttributeError: 'str' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'", "location": {"file": "D:\\dex\\backend\\main.py", "line": 936, "function": "global_exception_handler"}}
{"timestamp": "2025-08-26T17:23:19.940143Z", "level": "ERROR", "trace_id": "1e5982c5-ec55-4931-a99b-02542a952ca9", "module": "app.api.ledger", "message": "Unexpected error calculating portfolio summary: type object 'LedgerEntry' has no attribute 'user_id'", "exception": {"type": "AttributeError", "message": "type object 'LedgerEntry' has no attribute 'user_id'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 409, in get_portfolio_summary\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 651, in get_user_ledger\n    conditions = [LedgerEntry.user_id == user_id]\n                  ^^^^^^^^^^^^^^^^^^^\n", "AttributeError: type object 'LedgerEntry' has no attribute 'user_id'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 456, "function": "get_portfolio_summary"}}
{"timestamp": "2025-08-26T17:23:49.905024Z", "level": "ERROR", "trace_id": "1e5982c5-ec55-4931-a99b-02542a952ca9", "module": "app.api.ledger", "message": "Unexpected error fetching positions: type object 'LedgerEntry' has no attribute 'user_id'", "exception": {"type": "AttributeError", "message": "type object 'LedgerEntry' has no attribute 'user_id'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 130, in get_positions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 651, in get_user_ledger\n    conditions = [LedgerEntry.user_id == user_id]\n                  ^^^^^^^^^^^^^^^^^^^\n", "AttributeError: type object 'LedgerEntry' has no attribute 'user_id'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 189, "function": "get_positions"}}
{"timestamp": "2025-08-26T17:23:49.933371Z", "level": "ERROR", "trace_id": "1e5982c5-ec55-4931-a99b-02542a952ca9", "module": "app.api.ledger", "message": "Unexpected error fetching transactions: type object 'LedgerEntry' has no attribute 'user_id'", "exception": {"type": "AttributeError", "message": "type object 'LedgerEntry' has no attribute 'user_id'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 263, in get_transactions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 651, in get_user_ledger\n    conditions = [LedgerEntry.user_id == user_id]\n                  ^^^^^^^^^^^^^^^^^^^\n", "AttributeError: type object 'LedgerEntry' has no attribute 'user_id'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 354, "function": "get_transactions"}}
{"timestamp": "2025-08-26T17:23:49.935371Z", "level": "ERROR", "trace_id": "1e5982c5-ec55-4931-a99b-02542a952ca9", "module": "main", "message": "Request validation error: 'str' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'", "location": {"file": "D:\\dex\\backend\\main.py", "line": 139, "function": "dispatch"}}
{"timestamp": "2025-08-26T17:23:49.941307Z", "level": "ERROR", "trace_id": "1e5982c5-ec55-4931-a99b-02542a952ca9", "module": "app.api.ledger", "message": "Unexpected error fetching transactions: type object 'LedgerEntry' has no attribute 'user_id'", "exception": {"type": "AttributeError", "message": "type object 'LedgerEntry' has no attribute 'user_id'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 263, in get_transactions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 651, in get_user_ledger\n    conditions = [LedgerEntry.user_id == user_id]\n                  ^^^^^^^^^^^^^^^^^^^\n", "AttributeError: type object 'LedgerEntry' has no attribute 'user_id'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 354, "function": "get_transactions"}}
{"timestamp": "2025-08-26T17:23:49.942856Z", "level": "ERROR", "trace_id": "1e5982c5-ec55-4931-a99b-02542a952ca9", "module": "main", "message": "Unhandled exception: AttributeError: 'str' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'", "location": {"file": "D:\\dex\\backend\\main.py", "line": 936, "function": "global_exception_handler"}}
{"timestamp": "2025-08-26T17:23:50.005255Z", "level": "ERROR", "trace_id": "1e5982c5-ec55-4931-a99b-02542a952ca9", "module": "app.api.ledger", "message": "Unexpected error calculating portfolio summary: type object 'LedgerEntry' has no attribute 'user_id'", "exception": {"type": "AttributeError", "message": "type object 'LedgerEntry' has no attribute 'user_id'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 409, in get_portfolio_summary\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 651, in get_user_ledger\n    conditions = [LedgerEntry.user_id == user_id]\n                  ^^^^^^^^^^^^^^^^^^^\n", "AttributeError: type object 'LedgerEntry' has no attribute 'user_id'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 456, "function": "get_portfolio_summary"}}
{"timestamp": "2025-08-26T17:23:57.526645Z", "level": "ERROR", "trace_id": "ea0bf459-29f3-430d-88e1-de83b5f1621b", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T17:23:57.526645Z", "level": "ERROR", "trace_id": "ea0bf459-29f3-430d-88e1-de83b5f1621b", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T17:24:19.916197Z", "level": "ERROR", "trace_id": "ea0bf459-29f3-430d-88e1-de83b5f1621b", "module": "app.api.ledger", "message": "Unexpected error fetching positions: type object 'LedgerEntry' has no attribute 'user_id'", "exception": {"type": "AttributeError", "message": "type object 'LedgerEntry' has no attribute 'user_id'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 130, in get_positions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 651, in get_user_ledger\n    conditions = [LedgerEntry.user_id == user_id]\n                  ^^^^^^^^^^^^^^^^^^^\n", "AttributeError: type object 'LedgerEntry' has no attribute 'user_id'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 189, "function": "get_positions"}}
{"timestamp": "2025-08-26T17:24:19.938177Z", "level": "ERROR", "trace_id": "ea0bf459-29f3-430d-88e1-de83b5f1621b", "module": "app.api.ledger", "message": "Unexpected error fetching transactions: type object 'LedgerEntry' has no attribute 'user_id'", "exception": {"type": "AttributeError", "message": "type object 'LedgerEntry' has no attribute 'user_id'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 263, in get_transactions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 651, in get_user_ledger\n    conditions = [LedgerEntry.user_id == user_id]\n                  ^^^^^^^^^^^^^^^^^^^\n", "AttributeError: type object 'LedgerEntry' has no attribute 'user_id'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 354, "function": "get_transactions"}}
{"timestamp": "2025-08-26T17:24:19.939004Z", "level": "ERROR", "trace_id": "ea0bf459-29f3-430d-88e1-de83b5f1621b", "module": "main", "message": "Request validation error: 'str' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'", "location": {"file": "D:\\dex\\backend\\main.py", "line": 139, "function": "dispatch"}}
{"timestamp": "2025-08-26T17:24:19.945088Z", "level": "ERROR", "trace_id": "ea0bf459-29f3-430d-88e1-de83b5f1621b", "module": "app.api.ledger", "message": "Unexpected error fetching transactions: type object 'LedgerEntry' has no attribute 'user_id'", "exception": {"type": "AttributeError", "message": "type object 'LedgerEntry' has no attribute 'user_id'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 263, in get_transactions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 651, in get_user_ledger\n    conditions = [LedgerEntry.user_id == user_id]\n                  ^^^^^^^^^^^^^^^^^^^\n", "AttributeError: type object 'LedgerEntry' has no attribute 'user_id'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 354, "function": "get_transactions"}}
{"timestamp": "2025-08-26T17:24:19.946137Z", "level": "ERROR", "trace_id": "ea0bf459-29f3-430d-88e1-de83b5f1621b", "module": "main", "message": "Unhandled exception: AttributeError: 'str' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'", "location": {"file": "D:\\dex\\backend\\main.py", "line": 936, "function": "global_exception_handler"}}
{"timestamp": "2025-08-26T17:24:19.981901Z", "level": "ERROR", "trace_id": "ea0bf459-29f3-430d-88e1-de83b5f1621b", "module": "app.api.ledger", "message": "Unexpected error calculating portfolio summary: type object 'LedgerEntry' has no attribute 'user_id'", "exception": {"type": "AttributeError", "message": "type object 'LedgerEntry' has no attribute 'user_id'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 409, in get_portfolio_summary\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 651, in get_user_ledger\n    conditions = [LedgerEntry.user_id == user_id]\n                  ^^^^^^^^^^^^^^^^^^^\n", "AttributeError: type object 'LedgerEntry' has no attribute 'user_id'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 456, "function": "get_portfolio_summary"}}
{"timestamp": "2025-08-26T17:24:34.777176Z", "level": "ERROR", "trace_id": "92595906-3b50-4c62-a501-bfff489934c0", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T17:24:34.777176Z", "level": "ERROR", "trace_id": "92595906-3b50-4c62-a501-bfff489934c0", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T17:24:58.372058Z", "level": "ERROR", "trace_id": "2480dd42-58f1-4ce2-ae48-a8413d8ddb7c", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T17:24:58.372058Z", "level": "ERROR", "trace_id": "2480dd42-58f1-4ce2-ae48-a8413d8ddb7c", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T17:24:59.190061Z", "level": "ERROR", "trace_id": "2480dd42-58f1-4ce2-ae48-a8413d8ddb7c", "module": "app.api.ledger", "message": "Unexpected error fetching transactions: type object 'LedgerEntry' has no attribute 'created_at'", "exception": {"type": "AttributeError", "message": "type object 'LedgerEntry' has no attribute 'created_at'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 263, in get_transactions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 661, in get_user_ledger\n    .order_by(desc(LedgerEntry.created_at))\n                   ^^^^^^^^^^^^^^^^^^^^^^\n", "AttributeError: type object 'LedgerEntry' has no attribute 'created_at'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 354, "function": "get_transactions"}}
{"timestamp": "2025-08-26T17:24:59.191058Z", "level": "ERROR", "trace_id": "2480dd42-58f1-4ce2-ae48-a8413d8ddb7c", "module": "main", "message": "Request validation error: 'str' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'", "location": {"file": "D:\\dex\\backend\\main.py", "line": 139, "function": "dispatch"}}
{"timestamp": "2025-08-26T17:24:59.197549Z", "level": "ERROR", "trace_id": "2480dd42-58f1-4ce2-ae48-a8413d8ddb7c", "module": "app.api.ledger", "message": "Unexpected error fetching transactions: type object 'LedgerEntry' has no attribute 'created_at'", "exception": {"type": "AttributeError", "message": "type object 'LedgerEntry' has no attribute 'created_at'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 263, in get_transactions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 661, in get_user_ledger\n    .order_by(desc(LedgerEntry.created_at))\n                   ^^^^^^^^^^^^^^^^^^^^^^\n", "AttributeError: type object 'LedgerEntry' has no attribute 'created_at'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 354, "function": "get_transactions"}}
{"timestamp": "2025-08-26T17:24:59.198552Z", "level": "ERROR", "trace_id": "2480dd42-58f1-4ce2-ae48-a8413d8ddb7c", "module": "main", "message": "Unhandled exception: AttributeError: 'str' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'", "location": {"file": "D:\\dex\\backend\\main.py", "line": 936, "function": "global_exception_handler"}}
{"timestamp": "2025-08-26T17:24:59.216799Z", "level": "ERROR", "trace_id": "2480dd42-58f1-4ce2-ae48-a8413d8ddb7c", "module": "app.api.ledger", "message": "Unexpected error calculating portfolio summary: type object 'LedgerEntry' has no attribute 'created_at'", "exception": {"type": "AttributeError", "message": "type object 'LedgerEntry' has no attribute 'created_at'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 409, in get_portfolio_summary\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 661, in get_user_ledger\n    .order_by(desc(LedgerEntry.created_at))\n                   ^^^^^^^^^^^^^^^^^^^^^^\n", "AttributeError: type object 'LedgerEntry' has no attribute 'created_at'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 456, "function": "get_portfolio_summary"}}
{"timestamp": "2025-08-26T17:25:09.090986Z", "level": "ERROR", "trace_id": "2480dd42-58f1-4ce2-ae48-a8413d8ddb7c", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T17:25:09.092030Z", "level": "ERROR", "trace_id": "2480dd42-58f1-4ce2-ae48-a8413d8ddb7c", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T17:25:09.185392Z", "level": "ERROR", "trace_id": "2480dd42-58f1-4ce2-ae48-a8413d8ddb7c", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T17:26:13.941879Z", "level": "ERROR", "trace_id": "f626b601-c586-4295-b1bf-56fa299b4993", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T17:26:13.941879Z", "level": "ERROR", "trace_id": "f626b601-c586-4295-b1bf-56fa299b4993", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T17:26:21.106165Z", "level": "ERROR", "trace_id": "d2ebf9ad-0f08-44af-8a07-2c99bcfe4d91", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T17:26:21.106673Z", "level": "ERROR", "trace_id": "d2ebf9ad-0f08-44af-8a07-2c99bcfe4d91", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T17:26:36.585023Z", "level": "ERROR", "trace_id": "9276dba6-0cbe-4af9-9c4f-24576b6de2eb", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T17:26:36.585023Z", "level": "ERROR", "trace_id": "9276dba6-0cbe-4af9-9c4f-24576b6de2eb", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T17:26:55.065455Z", "level": "ERROR", "trace_id": "5cd07497-e2ea-40c5-96ff-ae6ace3965ec", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T17:26:55.066131Z", "level": "ERROR", "trace_id": "5cd07497-e2ea-40c5-96ff-ae6ace3965ec", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T17:27:11.898006Z", "level": "ERROR", "trace_id": "bb3c930d-e9c2-438f-8ef8-c7703dae9f4b", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T17:27:11.898530Z", "level": "ERROR", "trace_id": "bb3c930d-e9c2-438f-8ef8-c7703dae9f4b", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T17:28:08.278253Z", "level": "ERROR", "trace_id": "3852d154-5f3c-4b58-ac9b-77bff5b29261", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T17:28:08.278911Z", "level": "ERROR", "trace_id": "3852d154-5f3c-4b58-ac9b-77bff5b29261", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T17:28:42.138216Z", "level": "ERROR", "trace_id": "771e6100-5700-4a62-8e31-c8421ea14dd3", "module": "app.api", "message": "\u274c Database Operations API registration failed: unexpected indent (models.py, line 414)", "location": {"file": "D:\\dex\\backend\\app\\api\\__init__.py", "line": 51, "function": "_register_router"}}
{"timestamp": "2025-08-26T17:28:42.394177Z", "level": "ERROR", "trace_id": "771e6100-5700-4a62-8e31-c8421ea14dd3", "module": "app.api", "message": "\u274c Ledger & Portfolio Tracking API registration failed: unexpected indent (models.py, line 414)", "location": {"file": "D:\\dex\\backend\\app\\api\\__init__.py", "line": 51, "function": "_register_router"}}
{"timestamp": "2025-08-26T17:28:42.419614Z", "level": "ERROR", "trace_id": "771e6100-5700-4a62-8e31-c8421ea14dd3", "module": "app.api", "message": "\ud83d\udea8 PORTFOLIO LIMITED: Ledger router failed - portfolio will use demo data", "location": {"file": "D:\\dex\\backend\\app\\api\\__init__.py", "line": 148, "function": "<module>"}}
{"timestamp": "2025-08-26T17:28:46.544093Z", "level": "ERROR", "trace_id": "771e6100-5700-4a62-8e31-c8421ea14dd3", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T17:28:46.544093Z", "level": "ERROR", "trace_id": "771e6100-5700-4a62-8e31-c8421ea14dd3", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T17:28:53.515761Z", "level": "ERROR", "trace_id": "ff66273e-ca49-4aaa-a75d-f59c157e7017", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T17:28:53.515761Z", "level": "ERROR", "trace_id": "ff66273e-ca49-4aaa-a75d-f59c157e7017", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T17:29:09.740813Z", "level": "ERROR", "trace_id": "0cbfd85e-6664-4d75-a43e-f7ba00b8772c", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T17:29:09.741135Z", "level": "ERROR", "trace_id": "0cbfd85e-6664-4d75-a43e-f7ba00b8772c", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T17:29:52.752086Z", "level": "ERROR", "trace_id": "0cbfd85e-6664-4d75-a43e-f7ba00b8772c", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T17:29:52.752086Z", "level": "ERROR", "trace_id": "0cbfd85e-6664-4d75-a43e-f7ba00b8772c", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T17:29:52.868283Z", "level": "ERROR", "trace_id": "0cbfd85e-6664-4d75-a43e-f7ba00b8772c", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T17:30:39.588196Z", "level": "ERROR", "trace_id": "0cbfd85e-6664-4d75-a43e-f7ba00b8772c", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T17:30:39.589307Z", "level": "ERROR", "trace_id": "0cbfd85e-6664-4d75-a43e-f7ba00b8772c", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T17:30:39.673664Z", "level": "ERROR", "trace_id": "0cbfd85e-6664-4d75-a43e-f7ba00b8772c", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T17:31:41.137123Z", "level": "ERROR", "trace_id": "3c1b0073-834d-4583-8354-1679e38e2f5b", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T17:31:41.137123Z", "level": "ERROR", "trace_id": "3c1b0073-834d-4583-8354-1679e38e2f5b", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T17:36:13.325680Z", "level": "ERROR", "trace_id": "3c1b0073-834d-4583-8354-1679e38e2f5b", "module": "app.api.websocket", "message": "Error during WebSocket cleanup for test: 'test'", "location": {"file": "D:\\dex\\backend\\app\\api\\websocket.py", "line": 93, "function": "websocket_endpoint"}}
{"timestamp": "2025-08-26T17:36:25.330103Z", "level": "ERROR", "trace_id": "3c1b0073-834d-4583-8354-1679e38e2f5b", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T17:36:25.330642Z", "level": "ERROR", "trace_id": "3c1b0073-834d-4583-8354-1679e38e2f5b", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T17:36:25.445469Z", "level": "ERROR", "trace_id": "3c1b0073-834d-4583-8354-1679e38e2f5b", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T17:46:04.569120Z", "level": "ERROR", "trace_id": "9a502c4f-1318-410a-b86e-cb49f97fb19b", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T17:46:04.569120Z", "level": "ERROR", "trace_id": "9a502c4f-1318-410a-b86e-cb49f97fb19b", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T17:46:11.675772Z", "level": "ERROR", "trace_id": "67ba0f54-9074-4c39-92b7-d4859f5fe9c7", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T17:46:11.676084Z", "level": "ERROR", "trace_id": "67ba0f54-9074-4c39-92b7-d4859f5fe9c7", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T17:47:05.679195Z", "level": "ERROR", "trace_id": "ecfb7a7f-87bb-44d2-b8a6-40b6828c975b", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T17:47:05.679195Z", "level": "ERROR", "trace_id": "ecfb7a7f-87bb-44d2-b8a6-40b6828c975b", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T17:48:20.000785Z", "level": "ERROR", "trace_id": "d5817cfb-ea3c-452e-8e1a-cc2866b8b84d", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T17:48:20.002083Z", "level": "ERROR", "trace_id": "d5817cfb-ea3c-452e-8e1a-cc2866b8b84d", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T17:49:28.955447Z", "level": "ERROR", "trace_id": "9f4c90f9-ed38-425b-a69c-f2dbcf10787a", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T17:49:28.955447Z", "level": "ERROR", "trace_id": "9f4c90f9-ed38-425b-a69c-f2dbcf10787a", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T17:49:29.388907Z", "level": "ERROR", "trace_id": "9f4c90f9-ed38-425b-a69c-f2dbcf10787a", "module": "asyncio", "message": "Task was destroyed but it is pending!\ntask: <Task pending name='Task-10' coro=<BaseSelectorEventLoop._accept_connection2() running at C:\\Users\\acart\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\selector_events.py:222> wait_for=<Future finished result=None>>", "location": {"file": "C:\\Users\\acart\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py", "line": 1785, "function": "default_exception_handler"}}
{"timestamp": "2025-08-26T17:49:35.899853Z", "level": "ERROR", "trace_id": "1b789ed9-1e50-437e-b182-6e2b2d03eb29", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T17:49:35.899853Z", "level": "ERROR", "trace_id": "1b789ed9-1e50-437e-b182-6e2b2d03eb29", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T17:50:18.414898Z", "level": "ERROR", "trace_id": "fe79745b-178d-4f1b-95e5-6bb1e577137b", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T17:50:18.415641Z", "level": "ERROR", "trace_id": "fe79745b-178d-4f1b-95e5-6bb1e577137b", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T17:50:49.296903Z", "level": "ERROR", "trace_id": "64e87dc6-fd21-41cf-b69a-b538d2124f81", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T17:50:49.296903Z", "level": "ERROR", "trace_id": "64e87dc6-fd21-41cf-b69a-b538d2124f81", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T17:51:17.132743Z", "level": "ERROR", "trace_id": "64e87dc6-fd21-41cf-b69a-b538d2124f81", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T17:51:17.132743Z", "level": "ERROR", "trace_id": "64e87dc6-fd21-41cf-b69a-b538d2124f81", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T17:51:17.233636Z", "level": "ERROR", "trace_id": "64e87dc6-fd21-41cf-b69a-b538d2124f81", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T17:54:45.414689Z", "level": "ERROR", "trace_id": "b33de3bf-8b8e-44a7-919a-c111cff5cf7d", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T17:54:45.414689Z", "level": "ERROR", "trace_id": "b33de3bf-8b8e-44a7-919a-c111cff5cf7d", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T17:54:45.924247Z", "level": "ERROR", "trace_id": "b33de3bf-8b8e-44a7-919a-c111cff5cf7d", "module": "asyncio", "message": "Task was destroyed but it is pending!\ntask: <Task pending name='Task-10' coro=<BaseSelectorEventLoop._accept_connection2() done, defined at C:\\Users\\acart\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\selector_events.py:200> wait_for=<Future pending cb=[Task.task_wakeup()]>>", "location": {"file": "C:\\Users\\acart\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py", "line": 1785, "function": "default_exception_handler"}}
{"timestamp": "2025-08-26T17:54:52.390666Z", "level": "ERROR", "trace_id": "0ef97fd6-7a60-4e27-a260-9517f05140e5", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T17:54:52.391816Z", "level": "ERROR", "trace_id": "0ef97fd6-7a60-4e27-a260-9517f05140e5", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T17:55:39.641940Z", "level": "ERROR", "trace_id": "52946a77-d588-4ac1-ada2-68e31cba984e", "module": "app.api", "message": "\ud83d\udea8 PORTFOLIO LIMITED: Ledger router failed - portfolio will use demo data", "location": {"file": "D:\\dex\\backend\\app\\api\\__init__.py", "line": 148, "function": "<module>"}}
{"timestamp": "2025-08-26T17:55:43.776591Z", "level": "ERROR", "trace_id": "52946a77-d588-4ac1-ada2-68e31cba984e", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T17:55:43.776740Z", "level": "ERROR", "trace_id": "52946a77-d588-4ac1-ada2-68e31cba984e", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T17:56:41.140170Z", "level": "ERROR", "trace_id": "4c3695ad-49c4-4457-9407-23def2da509c", "module": "app.api", "message": "\ud83d\udea8 PORTFOLIO LIMITED: Ledger router failed - portfolio will use demo data", "location": {"file": "D:\\dex\\backend\\app\\api\\__init__.py", "line": 148, "function": "<module>"}}
{"timestamp": "2025-08-26T17:56:45.249965Z", "level": "ERROR", "trace_id": "4c3695ad-49c4-4457-9407-23def2da509c", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T17:56:45.249965Z", "level": "ERROR", "trace_id": "4c3695ad-49c4-4457-9407-23def2da509c", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T17:58:55.387944Z", "level": "ERROR", "trace_id": "200930f6-a99c-4bec-ad47-5f4d4f5c2f05", "module": "app.api", "message": "\ud83d\udea8 PORTFOLIO LIMITED: Ledger router failed - portfolio will use demo data", "location": {"file": "D:\\dex\\backend\\app\\api\\__init__.py", "line": 148, "function": "<module>"}}
{"timestamp": "2025-08-26T17:58:59.524585Z", "level": "ERROR", "trace_id": "200930f6-a99c-4bec-ad47-5f4d4f5c2f05", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T17:58:59.525840Z", "level": "ERROR", "trace_id": "200930f6-a99c-4bec-ad47-5f4d4f5c2f05", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T18:00:23.765980Z", "level": "ERROR", "trace_id": "4c5e31a8-c2b3-48f6-bfd1-0db3f740117a", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T18:00:23.766518Z", "level": "ERROR", "trace_id": "4c5e31a8-c2b3-48f6-bfd1-0db3f740117a", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T18:00:30.672080Z", "level": "ERROR", "trace_id": "9695a265-2f04-4b43-a089-05b95a5657bb", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T18:00:30.673043Z", "level": "ERROR", "trace_id": "9695a265-2f04-4b43-a089-05b95a5657bb", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T18:00:50.125712Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T18:00:50.125712Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T18:01:50.788664Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T18:01:50.788664Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T18:01:50.893935Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T18:01:54.827589Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:01:54.837772Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:01:54.877227Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:01:54.886426Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:01:54.893743Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:01:54.904287Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:01:56.928145Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:01:56.942889Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:01:56.999032Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:01:57.027090Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:01:57.035807Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:01:57.096572Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:01:57.104557Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:01:57.116166Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:01:57.122743Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:02:26.923077Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:02:26.938007Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:02:26.954934Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:02:56.936618Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:02:56.976559Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:02:57.009566Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:03:26.946562Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:03:26.967950Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:03:26.986943Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:03:56.953123Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:03:56.995978Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:03:57.033848Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:04:27.447542Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:04:27.466350Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:04:27.481183Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:04:57.463712Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:04:57.477693Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:04:57.492733Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:05:27.472056Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:05:27.485548Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:05:27.500552Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:05:57.479477Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:05:57.494135Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:05:57.508120Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:06:27.488665Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:06:27.501655Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:06:27.519457Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:06:57.501251Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:06:57.524893Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:06:57.535014Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:07:27.506037Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:07:27.531542Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:07:27.542349Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:07:57.506627Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:07:57.524262Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:07:57.535763Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:08:27.523522Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:08:27.586976Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:08:27.599038Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:08:57.525145Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:08:57.541566Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:08:57.555230Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:09:27.537246Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:09:27.579124Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:09:27.610910Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:09:57.538884Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:09:57.552823Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:09:57.572473Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:10:27.544794Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:10:27.557314Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:10:27.574027Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:10:57.545889Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:10:57.557961Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:10:57.572574Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:11:27.560745Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:11:27.587378Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:11:27.598354Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:11:57.570322Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:11:57.584063Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:11:57.603209Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:12:20.553979Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:12:20.568128Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:12:20.575767Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:12:20.608956Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:12:20.634030Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:12:20.648969Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:12:51.238207Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:12:51.251074Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:12:51.265840Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:13:21.245953Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:13:21.260095Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:13:21.275586Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:13:51.364341Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:13:51.377721Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:13:51.391938Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:14:22.240195Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:14:22.253953Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:14:22.267540Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:14:42.183962Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:14:42.190956Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:14:42.248494Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:14:42.255024Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:14:42.272137Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:14:42.278362Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:14:57.707832Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:14:57.714900Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:14:57.754134Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:14:57.761400Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:14:57.771416Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:14:57.778678Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:15:02.332900Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T18:15:02.332900Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T18:15:02.444669Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T18:15:09.844956Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:15:09.852699Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:15:09.891351Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:15:09.906524Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:15:09.925383Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:15:09.932476Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:15:23.246377Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:15:23.254497Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:15:23.336708Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:15:23.342690Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:15:23.363166Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:15:23.369339Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:16:10.398808Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T18:16:10.398879Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T18:16:10.505538Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T18:16:13.892658Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:16:13.899964Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:16:13.933407Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:16:13.974617Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:16:13.982193Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:16:13.992664Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:16:15.308457Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:16:15.323567Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:16:15.367621Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:16:15.443384Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:16:15.458039Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:16:15.473405Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:16:15.487685Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:16:15.725138Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:16:15.732531Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:16:47.213198Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:16:47.232423Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:16:47.246621Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:17:17.225351Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:17:17.243697Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:17:17.258191Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:17:47.545566Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:17:47.565365Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:17:47.579104Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:18:17.570800Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:18:17.587561Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:18:17.601836Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:18:47.581871Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:18:47.602633Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:18:47.616078Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:19:17.551472Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:19:17.568877Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:19:17.584691Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:19:47.552139Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:19:47.606706Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:19:47.635840Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:20:17.545694Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:20:17.563855Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:20:17.577506Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:20:47.554151Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:20:47.572017Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:20:47.586466Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:21:17.576293Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:21:17.592798Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:21:17.607508Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:21:47.599824Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:21:47.616222Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:21:47.630629Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:22:17.565437Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:22:17.581569Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:22:17.596532Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:22:47.590353Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:22:47.609961Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:22:47.623692Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:23:17.588610Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:23:17.604818Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:23:17.618700Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:23:47.598409Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:23:47.616206Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:23:47.631130Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:24:17.615374Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:24:17.631699Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:24:17.646173Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:24:47.613807Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:24:47.641553Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:24:47.654964Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:25:17.615663Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:25:17.632153Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:25:17.645524Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:25:47.633585Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:25:47.650174Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:25:47.664309Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:26:17.654208Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:26:17.670455Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:26:17.689144Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:26:47.647338Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:26:47.667971Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:26:47.681940Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:27:17.630723Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:27:17.651353Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:27:17.685378Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:27:47.636248Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:27:47.656437Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:27:47.672019Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:28:17.657538Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:28:17.677691Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:28:17.691364Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:28:47.668575Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:28:47.686989Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:28:47.699955Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:29:17.685296Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:29:17.706047Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:29:17.721039Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:29:47.674690Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:29:47.691143Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:29:47.704446Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:30:17.674381Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:30:17.694827Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:30:17.707569Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:30:47.716255Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:30:47.732523Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:30:47.746446Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:31:17.709263Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:31:17.728896Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:31:17.743986Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:31:47.725762Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:31:47.742635Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:31:47.758151Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:32:17.707696Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:32:17.727971Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:32:17.742212Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:32:47.697541Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:32:47.714318Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:32:47.728063Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:33:17.728614Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:33:17.747298Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:33:17.763403Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:33:47.724543Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:33:47.748290Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:33:47.763190Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:34:17.714214Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:34:17.733119Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:34:17.747937Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:34:47.742405Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:34:47.758632Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:34:47.773439Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:35:17.783389Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:35:17.801335Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:35:17.815802Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:35:46.307546Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:35:46.322679Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:35:46.339147Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:35:46.377487Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:35:46.385079Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:35:46.398274Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:36:23.223183Z", "level": "ERROR", "trace_id": "145df54d-418b-4c6a-916d-58e5df795d2a", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:36:34.937748Z", "level": "ERROR", "trace_id": "2e39bfb7-9c0f-42a1-a8c8-2d44d85ddbe7", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T18:36:34.938379Z", "level": "ERROR", "trace_id": "2e39bfb7-9c0f-42a1-a8c8-2d44d85ddbe7", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T18:38:07.776794Z", "level": "ERROR", "trace_id": "c054ddb0-c71e-4e00-837f-3f9999fb5602", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T18:38:07.776794Z", "level": "ERROR", "trace_id": "c054ddb0-c71e-4e00-837f-3f9999fb5602", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T18:39:49.760286Z", "level": "ERROR", "trace_id": "c054ddb0-c71e-4e00-837f-3f9999fb5602", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T18:39:49.761387Z", "level": "ERROR", "trace_id": "c054ddb0-c71e-4e00-837f-3f9999fb5602", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T18:39:49.858585Z", "level": "ERROR", "trace_id": "c054ddb0-c71e-4e00-837f-3f9999fb5602", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T18:41:17.083380Z", "level": "ERROR", "trace_id": "c054ddb0-c71e-4e00-837f-3f9999fb5602", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:41:17.092435Z", "level": "ERROR", "trace_id": "c054ddb0-c71e-4e00-837f-3f9999fb5602", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:41:17.141579Z", "level": "ERROR", "trace_id": "c054ddb0-c71e-4e00-837f-3f9999fb5602", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:41:17.174183Z", "level": "ERROR", "trace_id": "c054ddb0-c71e-4e00-837f-3f9999fb5602", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:41:17.180331Z", "level": "ERROR", "trace_id": "c054ddb0-c71e-4e00-837f-3f9999fb5602", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:41:17.204546Z", "level": "ERROR", "trace_id": "c054ddb0-c71e-4e00-837f-3f9999fb5602", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:41:25.779332Z", "level": "ERROR", "trace_id": "c054ddb0-c71e-4e00-837f-3f9999fb5602", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T18:41:25.779332Z", "level": "ERROR", "trace_id": "c054ddb0-c71e-4e00-837f-3f9999fb5602", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T18:41:25.888279Z", "level": "ERROR", "trace_id": "c054ddb0-c71e-4e00-837f-3f9999fb5602", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T18:41:28.264495Z", "level": "ERROR", "trace_id": "c054ddb0-c71e-4e00-837f-3f9999fb5602", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:41:28.271088Z", "level": "ERROR", "trace_id": "c054ddb0-c71e-4e00-837f-3f9999fb5602", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:41:28.297294Z", "level": "ERROR", "trace_id": "c054ddb0-c71e-4e00-837f-3f9999fb5602", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:41:28.305555Z", "level": "ERROR", "trace_id": "c054ddb0-c71e-4e00-837f-3f9999fb5602", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:41:28.344009Z", "level": "ERROR", "trace_id": "c054ddb0-c71e-4e00-837f-3f9999fb5602", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:41:28.350728Z", "level": "ERROR", "trace_id": "c054ddb0-c71e-4e00-837f-3f9999fb5602", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:43:11.456816Z", "level": "ERROR", "trace_id": "c054ddb0-c71e-4e00-837f-3f9999fb5602", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:43:11.472202Z", "level": "ERROR", "trace_id": "c054ddb0-c71e-4e00-837f-3f9999fb5602", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:43:11.563714Z", "level": "ERROR", "trace_id": "c054ddb0-c71e-4e00-837f-3f9999fb5602", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:43:12.458532Z", "level": "ERROR", "trace_id": "c054ddb0-c71e-4e00-837f-3f9999fb5602", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:43:12.474567Z", "level": "ERROR", "trace_id": "c054ddb0-c71e-4e00-837f-3f9999fb5602", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:43:12.543828Z", "level": "ERROR", "trace_id": "c054ddb0-c71e-4e00-837f-3f9999fb5602", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:43:27.678139Z", "level": "ERROR", "trace_id": "c054ddb0-c71e-4e00-837f-3f9999fb5602", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:43:27.685584Z", "level": "ERROR", "trace_id": "c054ddb0-c71e-4e00-837f-3f9999fb5602", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:43:27.711049Z", "level": "ERROR", "trace_id": "c054ddb0-c71e-4e00-837f-3f9999fb5602", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:43:27.720772Z", "level": "ERROR", "trace_id": "c054ddb0-c71e-4e00-837f-3f9999fb5602", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:43:27.762146Z", "level": "ERROR", "trace_id": "c054ddb0-c71e-4e00-837f-3f9999fb5602", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:43:27.769051Z", "level": "ERROR", "trace_id": "c054ddb0-c71e-4e00-837f-3f9999fb5602", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:43:31.894389Z", "level": "ERROR", "trace_id": "c054ddb0-c71e-4e00-837f-3f9999fb5602", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T18:43:31.895418Z", "level": "ERROR", "trace_id": "c054ddb0-c71e-4e00-837f-3f9999fb5602", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T18:43:32.005559Z", "level": "ERROR", "trace_id": "c054ddb0-c71e-4e00-837f-3f9999fb5602", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T18:43:36.594376Z", "level": "ERROR", "trace_id": "c054ddb0-c71e-4e00-837f-3f9999fb5602", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:43:36.600869Z", "level": "ERROR", "trace_id": "c054ddb0-c71e-4e00-837f-3f9999fb5602", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:43:36.616561Z", "level": "ERROR", "trace_id": "c054ddb0-c71e-4e00-837f-3f9999fb5602", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:43:36.624553Z", "level": "ERROR", "trace_id": "c054ddb0-c71e-4e00-837f-3f9999fb5602", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:43:36.675519Z", "level": "ERROR", "trace_id": "c054ddb0-c71e-4e00-837f-3f9999fb5602", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:43:36.683599Z", "level": "ERROR", "trace_id": "c054ddb0-c71e-4e00-837f-3f9999fb5602", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:43:47.884401Z", "level": "ERROR", "trace_id": "c054ddb0-c71e-4e00-837f-3f9999fb5602", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T18:43:47.885460Z", "level": "ERROR", "trace_id": "c054ddb0-c71e-4e00-837f-3f9999fb5602", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T18:43:47.989274Z", "level": "ERROR", "trace_id": "c054ddb0-c71e-4e00-837f-3f9999fb5602", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T18:43:51.196695Z", "level": "ERROR", "trace_id": "c054ddb0-c71e-4e00-837f-3f9999fb5602", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:43:51.204977Z", "level": "ERROR", "trace_id": "c054ddb0-c71e-4e00-837f-3f9999fb5602", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:43:51.240438Z", "level": "ERROR", "trace_id": "c054ddb0-c71e-4e00-837f-3f9999fb5602", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:43:51.278989Z", "level": "ERROR", "trace_id": "c054ddb0-c71e-4e00-837f-3f9999fb5602", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:43:51.286409Z", "level": "ERROR", "trace_id": "c054ddb0-c71e-4e00-837f-3f9999fb5602", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:43:51.300832Z", "level": "ERROR", "trace_id": "c054ddb0-c71e-4e00-837f-3f9999fb5602", "module": "app.core.dependencies", "message": "Authentication system error: 'Settings' object has no attribute 'ENVIRONMENT'", "exception": {"type": "AttributeError", "message": "'Settings' object has no attribute 'ENVIRONMENT'", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\core\\dependencies.py\", line 404, in get_current_user\n    if settings.ENVIRONMENT == 'development':\n       ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\pydantic\\main.py\", line 991, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n", "AttributeError: 'Settings' object has no attribute 'ENVIRONMENT'\n"]}, "location": {"file": "D:\\dex\\backend\\app\\core\\dependencies.py", "line": 460, "function": "get_current_user"}}
{"timestamp": "2025-08-26T18:45:40.125355Z", "level": "ERROR", "trace_id": "567fef48-5c08-4527-af0d-fd82881694e6", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T18:45:40.125355Z", "level": "ERROR", "trace_id": "567fef48-5c08-4527-af0d-fd82881694e6", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T18:46:16.594663Z", "level": "ERROR", "trace_id": "567fef48-5c08-4527-af0d-fd82881694e6", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T18:46:16.594663Z", "level": "ERROR", "trace_id": "567fef48-5c08-4527-af0d-fd82881694e6", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T18:46:16.710736Z", "level": "ERROR", "trace_id": "567fef48-5c08-4527-af0d-fd82881694e6", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T18:55:11.143851Z", "level": "ERROR", "trace_id": "567fef48-5c08-4527-af0d-fd82881694e6", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T18:55:11.144948Z", "level": "ERROR", "trace_id": "567fef48-5c08-4527-af0d-fd82881694e6", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T18:55:11.261461Z", "level": "ERROR", "trace_id": "567fef48-5c08-4527-af0d-fd82881694e6", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T18:55:14.251409Z", "level": "ERROR", "trace_id": "567fef48-5c08-4527-af0d-fd82881694e6", "module": "app.api.ledger", "message": "Database error fetching positions: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "exception": {"type": "NoForeignKeysError", "message": "Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\relationships.py\", line 2434, in _determine_joins\n    self.primaryjoin = join_condition(\n                       ^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\util.py\", line 121, in join_condition\n    return Join._join_condition(\n           ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\selectable.py\", line 1444, in _join_condition\n    raise exc.NoForeignKeysError(\n", "sqlalchemy.exc.NoForeignKeysError: Can't find any foreign key relationships between 'ledger_entries' and 'advanced_orders'.\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 130, in get_positions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 203, in greenlet_spawn\n    result = context.switch(value)\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1633, in _execute_clauseelement\n    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(\n                                                ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 715, in _compile_w_cache\n    compiled_sql = self._compiler(\n                   ^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 323, in _compiler\n    return dialect.statement_compiler(dialect, self, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 1446, in __init__\n    Compiled.__init__(self, dialect, statement, **kwargs)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 886, in __init__\n    self.string = self.process(self.statement, **compile_kwargs)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 932, in process\n    return obj._compiler_dispatch(self, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\visitors.py\", line 138, in _compiler_dispatch\n    return meth(self, **kw)  # type: ignore  # noqa: E501\n           ^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 4781, in visit_select\n    compile_state = select_stmt._compile_state_factory(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\base.py\", line 701, in create_for_statement\n    return klass.create_for_statement(statement, compiler, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 447, in create_for_statement\n    return cls._create_orm_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 1175, in _create_orm_context\n    _QueryEntity.to_compile_state(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2628, in to_compile_state\n    _MapperEntity(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2708, in __init__\n    entity._post_inspect\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 1338, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n                                           ^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2724, in _post_inspect\n    self._check_configure()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2401, in _check_configure\n    _configure_registries({self.registry}, cascade=True)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4218, in _configure_registries\n    _do_configure_registries(registries, cascade)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4259, in _do_configure_registries\n    mapper._post_configure_properties()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2418, in _post_configure_properties\n    prop.init()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\interfaces.py\", line 595, in init\n    self.do_init()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\relationships.py\", line 1657, in do_init\n    self._setup_join_conditions()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\relationships.py\", line 1895, in _setup_join_conditions\n    self._join_condition = jc = JoinCondition(\n                                ^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\relationships.py\", line 2321, in __init__\n    self._determine_joins()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\relationships.py\", line 2455, in _determine_joins\n    raise sa_exc.NoForeignKeysError(\n", "sqlalchemy.exc.NoForeignKeysError: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 172, "function": "get_positions"}}
{"timestamp": "2025-08-26T18:55:14.260076Z", "level": "ERROR", "trace_id": "567fef48-5c08-4527-af0d-fd82881694e6", "module": "app.api.ledger", "message": "Database error calculating portfolio summary: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "exception": {"type": "InvalidRequestError", "message": "One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 409, in get_portfolio_summary\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 203, in greenlet_spawn\n    result = context.switch(value)\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1633, in _execute_clauseelement\n    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(\n                                                ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 715, in _compile_w_cache\n    compiled_sql = self._compiler(\n                   ^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 323, in _compiler\n    return dialect.statement_compiler(dialect, self, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 1446, in __init__\n    Compiled.__init__(self, dialect, statement, **kwargs)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 886, in __init__\n    self.string = self.process(self.statement, **compile_kwargs)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 932, in process\n    return obj._compiler_dispatch(self, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\visitors.py\", line 138, in _compiler_dispatch\n    return meth(self, **kw)  # type: ignore  # noqa: E501\n           ^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 4781, in visit_select\n    compile_state = select_stmt._compile_state_factory(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\base.py\", line 701, in create_for_statement\n    return klass.create_for_statement(statement, compiler, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 447, in create_for_statement\n    return cls._create_orm_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 1175, in _create_orm_context\n    _QueryEntity.to_compile_state(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2628, in to_compile_state\n    _MapperEntity(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2708, in __init__\n    entity._post_inspect\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 1338, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n                                           ^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2724, in _post_inspect\n    self._check_configure()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2401, in _check_configure\n    _configure_registries({self.registry}, cascade=True)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4218, in _configure_registries\n    _do_configure_registries(registries, cascade)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4255, in _do_configure_registries\n    raise e\n", "sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 440, "function": "get_portfolio_summary"}}
{"timestamp": "2025-08-26T18:55:14.265935Z", "level": "ERROR", "trace_id": "567fef48-5c08-4527-af0d-fd82881694e6", "module": "app.api.ledger", "message": "Database error fetching transactions: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "exception": {"type": "InvalidRequestError", "message": "One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 263, in get_transactions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 203, in greenlet_spawn\n    result = context.switch(value)\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1633, in _execute_clauseelement\n    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(\n                                                ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 715, in _compile_w_cache\n    compiled_sql = self._compiler(\n                   ^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 323, in _compiler\n    return dialect.statement_compiler(dialect, self, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 1446, in __init__\n    Compiled.__init__(self, dialect, statement, **kwargs)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 886, in __init__\n    self.string = self.process(self.statement, **compile_kwargs)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 932, in process\n    return obj._compiler_dispatch(self, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\visitors.py\", line 138, in _compiler_dispatch\n    return meth(self, **kw)  # type: ignore  # noqa: E501\n           ^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 4781, in visit_select\n    compile_state = select_stmt._compile_state_factory(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\base.py\", line 701, in create_for_statement\n    return klass.create_for_statement(statement, compiler, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 447, in create_for_statement\n    return cls._create_orm_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 1175, in _create_orm_context\n    _QueryEntity.to_compile_state(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2628, in to_compile_state\n    _MapperEntity(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2708, in __init__\n    entity._post_inspect\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 1338, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n                                           ^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2724, in _post_inspect\n    self._check_configure()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2401, in _check_configure\n    _configure_registries({self.registry}, cascade=True)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4218, in _configure_registries\n    _do_configure_registries(registries, cascade)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4255, in _do_configure_registries\n    raise e\n", "sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 339, "function": "get_transactions"}}
{"timestamp": "2025-08-26T18:55:14.271731Z", "level": "ERROR", "trace_id": "567fef48-5c08-4527-af0d-fd82881694e6", "module": "main", "message": "Request validation error: 'str' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'", "location": {"file": "D:\\dex\\backend\\main.py", "line": 139, "function": "dispatch"}}
{"timestamp": "2025-08-26T18:55:14.308687Z", "level": "ERROR", "trace_id": "567fef48-5c08-4527-af0d-fd82881694e6", "module": "sqlalchemy.pool.impl.StaticPool", "message": "Exception terminating connection <AdaptedConnection <Connection(Thread-2, stopped daemon 19904)>>", "exception": {"type": "CancelledError", "message": "Cancelled by cancel scope 26fa42ec290", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\pool\\base.py\", line 372, in _close_connection\n    self._dialect.do_terminate(connection)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 717, in do_terminate\n    self.do_close(dbapi_connection)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 720, in do_close\n    dbapi_connection.close()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 314, in close\n    self.await_(self._connection.close())\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 168, in close\n    await self._execute(self._conn.close)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "asyncio.exceptions.CancelledError: Cancelled by cancel scope 26fa42ec290\n"]}, "location": {"file": "D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\pool\\base.py", "line": 376, "function": "_close_connection"}}
{"timestamp": "2025-08-26T18:55:14.310239Z", "level": "ERROR", "trace_id": "567fef48-5c08-4527-af0d-fd82881694e6", "module": "main", "message": "Unhandled exception: AttributeError: 'str' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'", "location": {"file": "D:\\dex\\backend\\main.py", "line": 936, "function": "global_exception_handler"}}
{"timestamp": "2025-08-26T18:55:44.262117Z", "level": "ERROR", "trace_id": "567fef48-5c08-4527-af0d-fd82881694e6", "module": "app.api.ledger", "message": "Database error calculating portfolio summary: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "exception": {"type": "InvalidRequestError", "message": "One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 409, in get_portfolio_summary\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 203, in greenlet_spawn\n    result = context.switch(value)\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1633, in _execute_clauseelement\n    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(\n                                                ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 715, in _compile_w_cache\n    compiled_sql = self._compiler(\n                   ^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 323, in _compiler\n    return dialect.statement_compiler(dialect, self, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 1446, in __init__\n    Compiled.__init__(self, dialect, statement, **kwargs)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 886, in __init__\n    self.string = self.process(self.statement, **compile_kwargs)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 932, in process\n    return obj._compiler_dispatch(self, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\visitors.py\", line 138, in _compiler_dispatch\n    return meth(self, **kw)  # type: ignore  # noqa: E501\n           ^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 4781, in visit_select\n    compile_state = select_stmt._compile_state_factory(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\base.py\", line 701, in create_for_statement\n    return klass.create_for_statement(statement, compiler, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 447, in create_for_statement\n    return cls._create_orm_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 1175, in _create_orm_context\n    _QueryEntity.to_compile_state(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2628, in to_compile_state\n    _MapperEntity(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2708, in __init__\n    entity._post_inspect\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 1338, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n                                           ^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2724, in _post_inspect\n    self._check_configure()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2401, in _check_configure\n    _configure_registries({self.registry}, cascade=True)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4218, in _configure_registries\n    _do_configure_registries(registries, cascade)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4255, in _do_configure_registries\n    raise e\n", "sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 440, "function": "get_portfolio_summary"}}
{"timestamp": "2025-08-26T18:55:44.268213Z", "level": "ERROR", "trace_id": "567fef48-5c08-4527-af0d-fd82881694e6", "module": "app.api.ledger", "message": "Database error fetching positions: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "exception": {"type": "InvalidRequestError", "message": "One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 130, in get_positions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 203, in greenlet_spawn\n    result = context.switch(value)\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1633, in _execute_clauseelement\n    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(\n                                                ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 715, in _compile_w_cache\n    compiled_sql = self._compiler(\n                   ^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 323, in _compiler\n    return dialect.statement_compiler(dialect, self, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 1446, in __init__\n    Compiled.__init__(self, dialect, statement, **kwargs)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 886, in __init__\n    self.string = self.process(self.statement, **compile_kwargs)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 932, in process\n    return obj._compiler_dispatch(self, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\visitors.py\", line 138, in _compiler_dispatch\n    return meth(self, **kw)  # type: ignore  # noqa: E501\n           ^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 4781, in visit_select\n    compile_state = select_stmt._compile_state_factory(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\base.py\", line 701, in create_for_statement\n    return klass.create_for_statement(statement, compiler, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 447, in create_for_statement\n    return cls._create_orm_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 1175, in _create_orm_context\n    _QueryEntity.to_compile_state(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2628, in to_compile_state\n    _MapperEntity(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2708, in __init__\n    entity._post_inspect\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 1338, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n                                           ^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2724, in _post_inspect\n    self._check_configure()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2401, in _check_configure\n    _configure_registries({self.registry}, cascade=True)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4218, in _configure_registries\n    _do_configure_registries(registries, cascade)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4255, in _do_configure_registries\n    raise e\n", "sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 172, "function": "get_positions"}}
{"timestamp": "2025-08-26T18:55:44.277689Z", "level": "ERROR", "trace_id": "567fef48-5c08-4527-af0d-fd82881694e6", "module": "app.api.ledger", "message": "Database error fetching transactions: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "exception": {"type": "InvalidRequestError", "message": "One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 263, in get_transactions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 203, in greenlet_spawn\n    result = context.switch(value)\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1633, in _execute_clauseelement\n    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(\n                                                ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 715, in _compile_w_cache\n    compiled_sql = self._compiler(\n                   ^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 323, in _compiler\n    return dialect.statement_compiler(dialect, self, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 1446, in __init__\n    Compiled.__init__(self, dialect, statement, **kwargs)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 886, in __init__\n    self.string = self.process(self.statement, **compile_kwargs)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 932, in process\n    return obj._compiler_dispatch(self, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\visitors.py\", line 138, in _compiler_dispatch\n    return meth(self, **kw)  # type: ignore  # noqa: E501\n           ^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 4781, in visit_select\n    compile_state = select_stmt._compile_state_factory(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\base.py\", line 701, in create_for_statement\n    return klass.create_for_statement(statement, compiler, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 447, in create_for_statement\n    return cls._create_orm_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 1175, in _create_orm_context\n    _QueryEntity.to_compile_state(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2628, in to_compile_state\n    _MapperEntity(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2708, in __init__\n    entity._post_inspect\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 1338, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n                                           ^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2724, in _post_inspect\n    self._check_configure()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2401, in _check_configure\n    _configure_registries({self.registry}, cascade=True)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4218, in _configure_registries\n    _do_configure_registries(registries, cascade)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4255, in _do_configure_registries\n    raise e\n", "sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 339, "function": "get_transactions"}}
{"timestamp": "2025-08-26T18:55:44.282180Z", "level": "ERROR", "trace_id": "567fef48-5c08-4527-af0d-fd82881694e6", "module": "main", "message": "Request validation error: 'str' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'", "location": {"file": "D:\\dex\\backend\\main.py", "line": 139, "function": "dispatch"}}
{"timestamp": "2025-08-26T18:55:44.290232Z", "level": "ERROR", "trace_id": "567fef48-5c08-4527-af0d-fd82881694e6", "module": "sqlalchemy.pool.impl.StaticPool", "message": "Exception terminating connection <AdaptedConnection <Connection(Thread-5, stopped daemon 8848)>>", "exception": {"type": "CancelledError", "message": "Cancelled by cancel scope 26fa4340250", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\pool\\base.py\", line 372, in _close_connection\n    self._dialect.do_terminate(connection)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 717, in do_terminate\n    self.do_close(dbapi_connection)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 720, in do_close\n    dbapi_connection.close()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 314, in close\n    self.await_(self._connection.close())\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 168, in close\n    await self._execute(self._conn.close)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "asyncio.exceptions.CancelledError: Cancelled by cancel scope 26fa4340250\n"]}, "location": {"file": "D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\pool\\base.py", "line": 376, "function": "_close_connection"}}
{"timestamp": "2025-08-26T18:55:44.292647Z", "level": "ERROR", "trace_id": "567fef48-5c08-4527-af0d-fd82881694e6", "module": "main", "message": "Unhandled exception: AttributeError: 'str' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'", "location": {"file": "D:\\dex\\backend\\main.py", "line": 936, "function": "global_exception_handler"}}
{"timestamp": "2025-08-26T18:56:14.991574Z", "level": "ERROR", "trace_id": "567fef48-5c08-4527-af0d-fd82881694e6", "module": "app.api.ledger", "message": "Database error calculating portfolio summary: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "exception": {"type": "InvalidRequestError", "message": "One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 409, in get_portfolio_summary\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 190, in greenlet_spawn\n    result = context.switch(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1633, in _execute_clauseelement\n    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(\n                                                ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 715, in _compile_w_cache\n    compiled_sql = self._compiler(\n                   ^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 323, in _compiler\n    return dialect.statement_compiler(dialect, self, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 1446, in __init__\n    Compiled.__init__(self, dialect, statement, **kwargs)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 886, in __init__\n    self.string = self.process(self.statement, **compile_kwargs)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 932, in process\n    return obj._compiler_dispatch(self, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\visitors.py\", line 138, in _compiler_dispatch\n    return meth(self, **kw)  # type: ignore  # noqa: E501\n           ^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 4781, in visit_select\n    compile_state = select_stmt._compile_state_factory(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\base.py\", line 701, in create_for_statement\n    return klass.create_for_statement(statement, compiler, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 447, in create_for_statement\n    return cls._create_orm_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 1175, in _create_orm_context\n    _QueryEntity.to_compile_state(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2628, in to_compile_state\n    _MapperEntity(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2708, in __init__\n    entity._post_inspect\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 1338, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n                                           ^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2724, in _post_inspect\n    self._check_configure()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2401, in _check_configure\n    _configure_registries({self.registry}, cascade=True)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4218, in _configure_registries\n    _do_configure_registries(registries, cascade)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4255, in _do_configure_registries\n    raise e\n", "sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 440, "function": "get_portfolio_summary"}}
{"timestamp": "2025-08-26T18:56:15.005495Z", "level": "ERROR", "trace_id": "567fef48-5c08-4527-af0d-fd82881694e6", "module": "app.api.ledger", "message": "Database error fetching transactions: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "exception": {"type": "InvalidRequestError", "message": "One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 263, in get_transactions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 203, in greenlet_spawn\n    result = context.switch(value)\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1633, in _execute_clauseelement\n    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(\n                                                ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 715, in _compile_w_cache\n    compiled_sql = self._compiler(\n                   ^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 323, in _compiler\n    return dialect.statement_compiler(dialect, self, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 1446, in __init__\n    Compiled.__init__(self, dialect, statement, **kwargs)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 886, in __init__\n    self.string = self.process(self.statement, **compile_kwargs)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 932, in process\n    return obj._compiler_dispatch(self, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\visitors.py\", line 138, in _compiler_dispatch\n    return meth(self, **kw)  # type: ignore  # noqa: E501\n           ^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 4781, in visit_select\n    compile_state = select_stmt._compile_state_factory(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\base.py\", line 701, in create_for_statement\n    return klass.create_for_statement(statement, compiler, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 447, in create_for_statement\n    return cls._create_orm_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 1175, in _create_orm_context\n    _QueryEntity.to_compile_state(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2628, in to_compile_state\n    _MapperEntity(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2708, in __init__\n    entity._post_inspect\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 1338, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n                                           ^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2724, in _post_inspect\n    self._check_configure()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2401, in _check_configure\n    _configure_registries({self.registry}, cascade=True)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4218, in _configure_registries\n    _do_configure_registries(registries, cascade)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4255, in _do_configure_registries\n    raise e\n", "sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 339, "function": "get_transactions"}}
{"timestamp": "2025-08-26T18:56:15.011816Z", "level": "ERROR", "trace_id": "567fef48-5c08-4527-af0d-fd82881694e6", "module": "main", "message": "Request validation error: 'str' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'", "location": {"file": "D:\\dex\\backend\\main.py", "line": 139, "function": "dispatch"}}
{"timestamp": "2025-08-26T18:56:15.019395Z", "level": "ERROR", "trace_id": "567fef48-5c08-4527-af0d-fd82881694e6", "module": "sqlalchemy.pool.impl.StaticPool", "message": "Exception terminating connection <AdaptedConnection <Connection(Thread-6, stopped daemon 7796)>>", "exception": {"type": "CancelledError", "message": "Cancelled by cancel scope 26fa49f5f10", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\pool\\base.py\", line 372, in _close_connection\n    self._dialect.do_terminate(connection)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 717, in do_terminate\n    self.do_close(dbapi_connection)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 720, in do_close\n    dbapi_connection.close()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 314, in close\n    self.await_(self._connection.close())\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 168, in close\n    await self._execute(self._conn.close)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "asyncio.exceptions.CancelledError: Cancelled by cancel scope 26fa49f5f10\n"]}, "location": {"file": "D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\pool\\base.py", "line": 376, "function": "_close_connection"}}
{"timestamp": "2025-08-26T18:56:15.060615Z", "level": "ERROR", "trace_id": "567fef48-5c08-4527-af0d-fd82881694e6", "module": "app.api.ledger", "message": "Unexpected error fetching positions: Connection closed", "exception": {"type": "ValueError", "message": "Connection closed", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 130, in get_positions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 203, in greenlet_spawn\n    result = context.switch(value)\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2241, in _execute_internal\n    conn = self._connection_for_bind(bind)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2110, in _connection_for_bind\n    return trans._connection_for_bind(engine, execution_options)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"<string>\", line 2, in _connection_for_bind\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\state_changes.py\", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n                ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 1189, in _connection_for_bind\n    conn = bind.connect()\n           ^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 3277, in connect\n    return self._connection_cls(self)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 143, in __init__\n    self._dbapi_connection = engine.raw_connection()\n                             ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 3301, in raw_connection\n    return self.pool.connect()\n           ^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\pool\\base.py\", line 447, in connect\n    return _ConnectionFairy._checkout(self)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\pool\\base.py\", line 1345, in _checkout\n    with util.safe_reraise():\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\pool\\base.py\", line 1342, in _checkout\n    fairy._connection_record.get_connection()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\pool\\base.py\", line 836, in get_connection\n    self.__connect()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\pool\\base.py\", line 913, in __connect\n    )._exec_w_sync_on_first_run(self.dbapi_connection, self)\n      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\event\\attr.py\", line 489, in _exec_w_sync_on_first_run\n    self(*args, **kw)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\event\\attr.py\", line 495, in __call__\n    fn(*args, **kw)\n", "  File \"D:\\dex\\backend\\app\\storage\\database.py\", line 220, in set_sqlite_pragma\n    cursor.execute(\"PRAGMA busy_timeout=30000\")\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 157, in execute\n    self.await_(_cursor.execute(operation))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 115, in _execute\n    raise ValueError(\"Connection closed\")\n", "ValueError: Connection closed\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 189, "function": "get_positions"}}
{"timestamp": "2025-08-26T18:56:15.065321Z", "level": "ERROR", "trace_id": "567fef48-5c08-4527-af0d-fd82881694e6", "module": "main", "message": "Unhandled exception: AttributeError: 'str' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'", "location": {"file": "D:\\dex\\backend\\main.py", "line": 936, "function": "global_exception_handler"}}
{"timestamp": "2025-08-26T18:56:45.008415Z", "level": "ERROR", "trace_id": "567fef48-5c08-4527-af0d-fd82881694e6", "module": "app.api.ledger", "message": "Database error fetching positions: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "exception": {"type": "InvalidRequestError", "message": "One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 130, in get_positions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 203, in greenlet_spawn\n    result = context.switch(value)\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1633, in _execute_clauseelement\n    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(\n                                                ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 715, in _compile_w_cache\n    compiled_sql = self._compiler(\n                   ^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 323, in _compiler\n    return dialect.statement_compiler(dialect, self, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 1446, in __init__\n    Compiled.__init__(self, dialect, statement, **kwargs)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 886, in __init__\n    self.string = self.process(self.statement, **compile_kwargs)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 932, in process\n    return obj._compiler_dispatch(self, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\visitors.py\", line 138, in _compiler_dispatch\n    return meth(self, **kw)  # type: ignore  # noqa: E501\n           ^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 4781, in visit_select\n    compile_state = select_stmt._compile_state_factory(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\base.py\", line 701, in create_for_statement\n    return klass.create_for_statement(statement, compiler, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 447, in create_for_statement\n    return cls._create_orm_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 1175, in _create_orm_context\n    _QueryEntity.to_compile_state(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2628, in to_compile_state\n    _MapperEntity(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2708, in __init__\n    entity._post_inspect\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 1338, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n                                           ^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2724, in _post_inspect\n    self._check_configure()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2401, in _check_configure\n    _configure_registries({self.registry}, cascade=True)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4218, in _configure_registries\n    _do_configure_registries(registries, cascade)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4255, in _do_configure_registries\n    raise e\n", "sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 172, "function": "get_positions"}}
{"timestamp": "2025-08-26T18:56:45.015007Z", "level": "ERROR", "trace_id": "567fef48-5c08-4527-af0d-fd82881694e6", "module": "app.api.ledger", "message": "Database error calculating portfolio summary: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "exception": {"type": "InvalidRequestError", "message": "One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 409, in get_portfolio_summary\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 203, in greenlet_spawn\n    result = context.switch(value)\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1633, in _execute_clauseelement\n    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(\n                                                ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 715, in _compile_w_cache\n    compiled_sql = self._compiler(\n                   ^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 323, in _compiler\n    return dialect.statement_compiler(dialect, self, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 1446, in __init__\n    Compiled.__init__(self, dialect, statement, **kwargs)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 886, in __init__\n    self.string = self.process(self.statement, **compile_kwargs)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 932, in process\n    return obj._compiler_dispatch(self, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\visitors.py\", line 138, in _compiler_dispatch\n    return meth(self, **kw)  # type: ignore  # noqa: E501\n           ^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 4781, in visit_select\n    compile_state = select_stmt._compile_state_factory(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\base.py\", line 701, in create_for_statement\n    return klass.create_for_statement(statement, compiler, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 447, in create_for_statement\n    return cls._create_orm_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 1175, in _create_orm_context\n    _QueryEntity.to_compile_state(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2628, in to_compile_state\n    _MapperEntity(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2708, in __init__\n    entity._post_inspect\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 1338, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n                                           ^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2724, in _post_inspect\n    self._check_configure()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2401, in _check_configure\n    _configure_registries({self.registry}, cascade=True)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4218, in _configure_registries\n    _do_configure_registries(registries, cascade)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4255, in _do_configure_registries\n    raise e\n", "sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 440, "function": "get_portfolio_summary"}}
{"timestamp": "2025-08-26T18:56:45.022127Z", "level": "ERROR", "trace_id": "567fef48-5c08-4527-af0d-fd82881694e6", "module": "app.api.ledger", "message": "Database error fetching transactions: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "exception": {"type": "InvalidRequestError", "message": "One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 263, in get_transactions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 203, in greenlet_spawn\n    result = context.switch(value)\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1633, in _execute_clauseelement\n    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(\n                                                ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 715, in _compile_w_cache\n    compiled_sql = self._compiler(\n                   ^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 323, in _compiler\n    return dialect.statement_compiler(dialect, self, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 1446, in __init__\n    Compiled.__init__(self, dialect, statement, **kwargs)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 886, in __init__\n    self.string = self.process(self.statement, **compile_kwargs)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 932, in process\n    return obj._compiler_dispatch(self, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\visitors.py\", line 138, in _compiler_dispatch\n    return meth(self, **kw)  # type: ignore  # noqa: E501\n           ^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 4781, in visit_select\n    compile_state = select_stmt._compile_state_factory(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\base.py\", line 701, in create_for_statement\n    return klass.create_for_statement(statement, compiler, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 447, in create_for_statement\n    return cls._create_orm_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 1175, in _create_orm_context\n    _QueryEntity.to_compile_state(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2628, in to_compile_state\n    _MapperEntity(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2708, in __init__\n    entity._post_inspect\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 1338, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n                                           ^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2724, in _post_inspect\n    self._check_configure()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2401, in _check_configure\n    _configure_registries({self.registry}, cascade=True)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4218, in _configure_registries\n    _do_configure_registries(registries, cascade)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4255, in _do_configure_registries\n    raise e\n", "sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 339, "function": "get_transactions"}}
{"timestamp": "2025-08-26T18:56:45.027889Z", "level": "ERROR", "trace_id": "567fef48-5c08-4527-af0d-fd82881694e6", "module": "main", "message": "Request validation error: 'str' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'", "location": {"file": "D:\\dex\\backend\\main.py", "line": 139, "function": "dispatch"}}
{"timestamp": "2025-08-26T18:56:45.035812Z", "level": "ERROR", "trace_id": "567fef48-5c08-4527-af0d-fd82881694e6", "module": "sqlalchemy.pool.impl.StaticPool", "message": "Exception terminating connection <AdaptedConnection <Connection(Thread-9, stopped daemon 11200)>>", "exception": {"type": "CancelledError", "message": "Cancelled by cancel scope 26fa4a284d0", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\pool\\base.py\", line 372, in _close_connection\n    self._dialect.do_terminate(connection)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 717, in do_terminate\n    self.do_close(dbapi_connection)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 720, in do_close\n    dbapi_connection.close()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 314, in close\n    self.await_(self._connection.close())\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 168, in close\n    await self._execute(self._conn.close)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "asyncio.exceptions.CancelledError: Cancelled by cancel scope 26fa4a284d0\n"]}, "location": {"file": "D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\pool\\base.py", "line": 376, "function": "_close_connection"}}
{"timestamp": "2025-08-26T18:56:45.037603Z", "level": "ERROR", "trace_id": "567fef48-5c08-4527-af0d-fd82881694e6", "module": "main", "message": "Unhandled exception: AttributeError: 'str' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'", "location": {"file": "D:\\dex\\backend\\main.py", "line": 936, "function": "global_exception_handler"}}
{"timestamp": "2025-08-26T18:57:15.019169Z", "level": "ERROR", "trace_id": "567fef48-5c08-4527-af0d-fd82881694e6", "module": "app.api.ledger", "message": "Database error calculating portfolio summary: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "exception": {"type": "InvalidRequestError", "message": "One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 409, in get_portfolio_summary\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 203, in greenlet_spawn\n    result = context.switch(value)\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1633, in _execute_clauseelement\n    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(\n                                                ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 715, in _compile_w_cache\n    compiled_sql = self._compiler(\n                   ^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 323, in _compiler\n    return dialect.statement_compiler(dialect, self, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 1446, in __init__\n    Compiled.__init__(self, dialect, statement, **kwargs)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 886, in __init__\n    self.string = self.process(self.statement, **compile_kwargs)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 932, in process\n    return obj._compiler_dispatch(self, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\visitors.py\", line 138, in _compiler_dispatch\n    return meth(self, **kw)  # type: ignore  # noqa: E501\n           ^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 4781, in visit_select\n    compile_state = select_stmt._compile_state_factory(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\base.py\", line 701, in create_for_statement\n    return klass.create_for_statement(statement, compiler, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 447, in create_for_statement\n    return cls._create_orm_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 1175, in _create_orm_context\n    _QueryEntity.to_compile_state(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2628, in to_compile_state\n    _MapperEntity(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2708, in __init__\n    entity._post_inspect\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 1338, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n                                           ^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2724, in _post_inspect\n    self._check_configure()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2401, in _check_configure\n    _configure_registries({self.registry}, cascade=True)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4218, in _configure_registries\n    _do_configure_registries(registries, cascade)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4255, in _do_configure_registries\n    raise e\n", "sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 440, "function": "get_portfolio_summary"}}
{"timestamp": "2025-08-26T18:57:15.026404Z", "level": "ERROR", "trace_id": "567fef48-5c08-4527-af0d-fd82881694e6", "module": "app.api.ledger", "message": "Database error fetching positions: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "exception": {"type": "InvalidRequestError", "message": "One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 130, in get_positions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 203, in greenlet_spawn\n    result = context.switch(value)\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1633, in _execute_clauseelement\n    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(\n                                                ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 715, in _compile_w_cache\n    compiled_sql = self._compiler(\n                   ^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 323, in _compiler\n    return dialect.statement_compiler(dialect, self, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 1446, in __init__\n    Compiled.__init__(self, dialect, statement, **kwargs)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 886, in __init__\n    self.string = self.process(self.statement, **compile_kwargs)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 932, in process\n    return obj._compiler_dispatch(self, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\visitors.py\", line 138, in _compiler_dispatch\n    return meth(self, **kw)  # type: ignore  # noqa: E501\n           ^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 4781, in visit_select\n    compile_state = select_stmt._compile_state_factory(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\base.py\", line 701, in create_for_statement\n    return klass.create_for_statement(statement, compiler, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 447, in create_for_statement\n    return cls._create_orm_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 1175, in _create_orm_context\n    _QueryEntity.to_compile_state(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2628, in to_compile_state\n    _MapperEntity(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2708, in __init__\n    entity._post_inspect\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 1338, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n                                           ^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2724, in _post_inspect\n    self._check_configure()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2401, in _check_configure\n    _configure_registries({self.registry}, cascade=True)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4218, in _configure_registries\n    _do_configure_registries(registries, cascade)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4255, in _do_configure_registries\n    raise e\n", "sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 172, "function": "get_positions"}}
{"timestamp": "2025-08-26T18:57:15.035142Z", "level": "ERROR", "trace_id": "567fef48-5c08-4527-af0d-fd82881694e6", "module": "app.api.ledger", "message": "Database error fetching transactions: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "exception": {"type": "InvalidRequestError", "message": "One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 263, in get_transactions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 203, in greenlet_spawn\n    result = context.switch(value)\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1633, in _execute_clauseelement\n    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(\n                                                ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 715, in _compile_w_cache\n    compiled_sql = self._compiler(\n                   ^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 323, in _compiler\n    return dialect.statement_compiler(dialect, self, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 1446, in __init__\n    Compiled.__init__(self, dialect, statement, **kwargs)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 886, in __init__\n    self.string = self.process(self.statement, **compile_kwargs)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 932, in process\n    return obj._compiler_dispatch(self, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\visitors.py\", line 138, in _compiler_dispatch\n    return meth(self, **kw)  # type: ignore  # noqa: E501\n           ^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 4781, in visit_select\n    compile_state = select_stmt._compile_state_factory(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\base.py\", line 701, in create_for_statement\n    return klass.create_for_statement(statement, compiler, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 447, in create_for_statement\n    return cls._create_orm_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 1175, in _create_orm_context\n    _QueryEntity.to_compile_state(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2628, in to_compile_state\n    _MapperEntity(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2708, in __init__\n    entity._post_inspect\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 1338, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n                                           ^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2724, in _post_inspect\n    self._check_configure()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2401, in _check_configure\n    _configure_registries({self.registry}, cascade=True)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4218, in _configure_registries\n    _do_configure_registries(registries, cascade)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4255, in _do_configure_registries\n    raise e\n", "sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 339, "function": "get_transactions"}}
{"timestamp": "2025-08-26T18:57:15.039494Z", "level": "ERROR", "trace_id": "567fef48-5c08-4527-af0d-fd82881694e6", "module": "main", "message": "Request validation error: 'str' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'", "location": {"file": "D:\\dex\\backend\\main.py", "line": 139, "function": "dispatch"}}
{"timestamp": "2025-08-26T18:57:15.048534Z", "level": "ERROR", "trace_id": "567fef48-5c08-4527-af0d-fd82881694e6", "module": "sqlalchemy.pool.impl.StaticPool", "message": "Exception terminating connection <AdaptedConnection <Connection(Thread-12, stopped daemon 20780)>>", "exception": {"type": "CancelledError", "message": "Cancelled by cancel scope 26fa4a51250", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\pool\\base.py\", line 372, in _close_connection\n    self._dialect.do_terminate(connection)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 717, in do_terminate\n    self.do_close(dbapi_connection)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 720, in do_close\n    dbapi_connection.close()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 314, in close\n    self.await_(self._connection.close())\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 168, in close\n    await self._execute(self._conn.close)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "asyncio.exceptions.CancelledError: Cancelled by cancel scope 26fa4a51250\n"]}, "location": {"file": "D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\pool\\base.py", "line": 376, "function": "_close_connection"}}
{"timestamp": "2025-08-26T18:57:15.051181Z", "level": "ERROR", "trace_id": "567fef48-5c08-4527-af0d-fd82881694e6", "module": "main", "message": "Unhandled exception: AttributeError: 'str' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'", "location": {"file": "D:\\dex\\backend\\main.py", "line": 936, "function": "global_exception_handler"}}
{"timestamp": "2025-08-26T18:57:45.007049Z", "level": "ERROR", "trace_id": "567fef48-5c08-4527-af0d-fd82881694e6", "module": "app.api.ledger", "message": "Database error calculating portfolio summary: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "exception": {"type": "InvalidRequestError", "message": "One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 409, in get_portfolio_summary\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 190, in greenlet_spawn\n    result = context.switch(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1633, in _execute_clauseelement\n    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(\n                                                ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 715, in _compile_w_cache\n    compiled_sql = self._compiler(\n                   ^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 323, in _compiler\n    return dialect.statement_compiler(dialect, self, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 1446, in __init__\n    Compiled.__init__(self, dialect, statement, **kwargs)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 886, in __init__\n    self.string = self.process(self.statement, **compile_kwargs)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 932, in process\n    return obj._compiler_dispatch(self, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\visitors.py\", line 138, in _compiler_dispatch\n    return meth(self, **kw)  # type: ignore  # noqa: E501\n           ^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 4781, in visit_select\n    compile_state = select_stmt._compile_state_factory(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\base.py\", line 701, in create_for_statement\n    return klass.create_for_statement(statement, compiler, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 447, in create_for_statement\n    return cls._create_orm_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 1175, in _create_orm_context\n    _QueryEntity.to_compile_state(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2628, in to_compile_state\n    _MapperEntity(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2708, in __init__\n    entity._post_inspect\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 1338, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n                                           ^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2724, in _post_inspect\n    self._check_configure()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2401, in _check_configure\n    _configure_registries({self.registry}, cascade=True)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4218, in _configure_registries\n    _do_configure_registries(registries, cascade)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4255, in _do_configure_registries\n    raise e\n", "sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 440, "function": "get_portfolio_summary"}}
{"timestamp": "2025-08-26T18:57:45.021308Z", "level": "ERROR", "trace_id": "567fef48-5c08-4527-af0d-fd82881694e6", "module": "app.api.ledger", "message": "Database error fetching transactions: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "exception": {"type": "InvalidRequestError", "message": "One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 263, in get_transactions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 203, in greenlet_spawn\n    result = context.switch(value)\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1633, in _execute_clauseelement\n    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(\n                                                ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 715, in _compile_w_cache\n    compiled_sql = self._compiler(\n                   ^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 323, in _compiler\n    return dialect.statement_compiler(dialect, self, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 1446, in __init__\n    Compiled.__init__(self, dialect, statement, **kwargs)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 886, in __init__\n    self.string = self.process(self.statement, **compile_kwargs)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 932, in process\n    return obj._compiler_dispatch(self, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\visitors.py\", line 138, in _compiler_dispatch\n    return meth(self, **kw)  # type: ignore  # noqa: E501\n           ^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 4781, in visit_select\n    compile_state = select_stmt._compile_state_factory(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\base.py\", line 701, in create_for_statement\n    return klass.create_for_statement(statement, compiler, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 447, in create_for_statement\n    return cls._create_orm_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 1175, in _create_orm_context\n    _QueryEntity.to_compile_state(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2628, in to_compile_state\n    _MapperEntity(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2708, in __init__\n    entity._post_inspect\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 1338, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n                                           ^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2724, in _post_inspect\n    self._check_configure()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2401, in _check_configure\n    _configure_registries({self.registry}, cascade=True)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4218, in _configure_registries\n    _do_configure_registries(registries, cascade)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4255, in _do_configure_registries\n    raise e\n", "sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 339, "function": "get_transactions"}}
{"timestamp": "2025-08-26T18:57:45.025640Z", "level": "ERROR", "trace_id": "567fef48-5c08-4527-af0d-fd82881694e6", "module": "main", "message": "Request validation error: 'str' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'", "location": {"file": "D:\\dex\\backend\\main.py", "line": 139, "function": "dispatch"}}
{"timestamp": "2025-08-26T18:57:45.033502Z", "level": "ERROR", "trace_id": "567fef48-5c08-4527-af0d-fd82881694e6", "module": "sqlalchemy.pool.impl.StaticPool", "message": "Exception terminating connection <AdaptedConnection <Connection(Thread-13, stopped daemon 16280)>>", "exception": {"type": "CancelledError", "message": "Cancelled by cancel scope 26fa4a75ed0", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\pool\\base.py\", line 372, in _close_connection\n    self._dialect.do_terminate(connection)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 717, in do_terminate\n    self.do_close(dbapi_connection)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 720, in do_close\n    dbapi_connection.close()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 314, in close\n    self.await_(self._connection.close())\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 168, in close\n    await self._execute(self._conn.close)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "asyncio.exceptions.CancelledError: Cancelled by cancel scope 26fa4a75ed0\n"]}, "location": {"file": "D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\pool\\base.py", "line": 376, "function": "_close_connection"}}
{"timestamp": "2025-08-26T18:57:45.037628Z", "level": "ERROR", "trace_id": "567fef48-5c08-4527-af0d-fd82881694e6", "module": "app.api.ledger", "message": "Database error fetching positions: (sqlite3.OperationalError) no active connection\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no active connection\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 154, in execute\n    _cursor: AsyncIODBAPICursor = self.await_(self._connection.cursor())  # type: ignore[arg-type] # noqa: E501\n                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 151, in cursor\n    return Cursor(self, await self._execute(self._conn.cursor))\n                                            ^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 73, in _conn\n    raise ValueError(\"no active connection\")\n", "ValueError: no active connection\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 143, in __init__\n    self._dbapi_connection = engine.raw_connection()\n                             ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 3301, in raw_connection\n    return self.pool.connect()\n           ^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\pool\\base.py\", line 447, in connect\n    return _ConnectionFairy._checkout(self)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\pool\\base.py\", line 1345, in _checkout\n    with util.safe_reraise():\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\pool\\base.py\", line 1342, in _checkout\n    fairy._connection_record.get_connection()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\pool\\base.py\", line 836, in get_connection\n    self.__connect()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\pool\\base.py\", line 913, in __connect\n    )._exec_w_sync_on_first_run(self.dbapi_connection, self)\n      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\event\\attr.py\", line 489, in _exec_w_sync_on_first_run\n    self(*args, **kw)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\event\\attr.py\", line 495, in __call__\n    fn(*args, **kw)\n", "  File \"D:\\dex\\backend\\app\\storage\\database.py\", line 220, in set_sqlite_pragma\n    cursor.execute(\"PRAGMA busy_timeout=30000\")\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 333, in _handle_exception\n    raise self.dbapi.sqlite.OperationalError(\n", "sqlite3.OperationalError: no active connection\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 130, in get_positions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 203, in greenlet_spawn\n    result = context.switch(value)\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2241, in _execute_internal\n    conn = self._connection_for_bind(bind)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2110, in _connection_for_bind\n    return trans._connection_for_bind(engine, execution_options)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"<string>\", line 2, in _connection_for_bind\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\state_changes.py\", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n                ^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 1189, in _connection_for_bind\n    conn = bind.connect()\n           ^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 3277, in connect\n    return self._connection_cls(self)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 145, in __init__\n    Connection._handle_dbapi_exception_noconnection(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2440, in _handle_dbapi_exception_noconnection\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 143, in __init__\n    self._dbapi_connection = engine.raw_connection()\n                             ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 3301, in raw_connection\n    return self.pool.connect()\n           ^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\pool\\base.py\", line 447, in connect\n    return _ConnectionFairy._checkout(self)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\pool\\base.py\", line 1345, in _checkout\n    with util.safe_reraise():\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\pool\\base.py\", line 1342, in _checkout\n    fairy._connection_record.get_connection()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\pool\\base.py\", line 836, in get_connection\n    self.__connect()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\pool\\base.py\", line 913, in __connect\n    )._exec_w_sync_on_first_run(self.dbapi_connection, self)\n      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\event\\attr.py\", line 489, in _exec_w_sync_on_first_run\n    self(*args, **kw)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\event\\attr.py\", line 495, in __call__\n    fn(*args, **kw)\n", "  File \"D:\\dex\\backend\\app\\storage\\database.py\", line 220, in set_sqlite_pragma\n    cursor.execute(\"PRAGMA busy_timeout=30000\")\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 333, in _handle_exception\n    raise self.dbapi.sqlite.OperationalError(\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no active connection\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 172, "function": "get_positions"}}
{"timestamp": "2025-08-26T18:57:45.043987Z", "level": "ERROR", "trace_id": "567fef48-5c08-4527-af0d-fd82881694e6", "module": "main", "message": "Unhandled exception: AttributeError: 'str' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'", "location": {"file": "D:\\dex\\backend\\main.py", "line": 936, "function": "global_exception_handler"}}
{"timestamp": "2025-08-26T18:58:15.028039Z", "level": "ERROR", "trace_id": "567fef48-5c08-4527-af0d-fd82881694e6", "module": "app.api.ledger", "message": "Database error calculating portfolio summary: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "exception": {"type": "InvalidRequestError", "message": "One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 409, in get_portfolio_summary\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 203, in greenlet_spawn\n    result = context.switch(value)\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1633, in _execute_clauseelement\n    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(\n                                                ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 715, in _compile_w_cache\n    compiled_sql = self._compiler(\n                   ^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 323, in _compiler\n    return dialect.statement_compiler(dialect, self, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 1446, in __init__\n    Compiled.__init__(self, dialect, statement, **kwargs)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 886, in __init__\n    self.string = self.process(self.statement, **compile_kwargs)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 932, in process\n    return obj._compiler_dispatch(self, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\visitors.py\", line 138, in _compiler_dispatch\n    return meth(self, **kw)  # type: ignore  # noqa: E501\n           ^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 4781, in visit_select\n    compile_state = select_stmt._compile_state_factory(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\base.py\", line 701, in create_for_statement\n    return klass.create_for_statement(statement, compiler, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 447, in create_for_statement\n    return cls._create_orm_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 1175, in _create_orm_context\n    _QueryEntity.to_compile_state(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2628, in to_compile_state\n    _MapperEntity(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2708, in __init__\n    entity._post_inspect\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 1338, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n                                           ^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2724, in _post_inspect\n    self._check_configure()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2401, in _check_configure\n    _configure_registries({self.registry}, cascade=True)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4218, in _configure_registries\n    _do_configure_registries(registries, cascade)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4255, in _do_configure_registries\n    raise e\n", "sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 440, "function": "get_portfolio_summary"}}
{"timestamp": "2025-08-26T18:58:15.033269Z", "level": "ERROR", "trace_id": "567fef48-5c08-4527-af0d-fd82881694e6", "module": "app.api.ledger", "message": "Database error fetching positions: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "exception": {"type": "InvalidRequestError", "message": "One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 130, in get_positions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 203, in greenlet_spawn\n    result = context.switch(value)\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1633, in _execute_clauseelement\n    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(\n                                                ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 715, in _compile_w_cache\n    compiled_sql = self._compiler(\n                   ^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 323, in _compiler\n    return dialect.statement_compiler(dialect, self, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 1446, in __init__\n    Compiled.__init__(self, dialect, statement, **kwargs)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 886, in __init__\n    self.string = self.process(self.statement, **compile_kwargs)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 932, in process\n    return obj._compiler_dispatch(self, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\visitors.py\", line 138, in _compiler_dispatch\n    return meth(self, **kw)  # type: ignore  # noqa: E501\n           ^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 4781, in visit_select\n    compile_state = select_stmt._compile_state_factory(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\base.py\", line 701, in create_for_statement\n    return klass.create_for_statement(statement, compiler, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 447, in create_for_statement\n    return cls._create_orm_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 1175, in _create_orm_context\n    _QueryEntity.to_compile_state(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2628, in to_compile_state\n    _MapperEntity(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2708, in __init__\n    entity._post_inspect\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 1338, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n                                           ^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2724, in _post_inspect\n    self._check_configure()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2401, in _check_configure\n    _configure_registries({self.registry}, cascade=True)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4218, in _configure_registries\n    _do_configure_registries(registries, cascade)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4255, in _do_configure_registries\n    raise e\n", "sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 172, "function": "get_positions"}}
{"timestamp": "2025-08-26T18:58:15.041689Z", "level": "ERROR", "trace_id": "567fef48-5c08-4527-af0d-fd82881694e6", "module": "app.api.ledger", "message": "Database error fetching transactions: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "exception": {"type": "InvalidRequestError", "message": "One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 263, in get_transactions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 203, in greenlet_spawn\n    result = context.switch(value)\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1633, in _execute_clauseelement\n    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(\n                                                ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 715, in _compile_w_cache\n    compiled_sql = self._compiler(\n                   ^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 323, in _compiler\n    return dialect.statement_compiler(dialect, self, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 1446, in __init__\n    Compiled.__init__(self, dialect, statement, **kwargs)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 886, in __init__\n    self.string = self.process(self.statement, **compile_kwargs)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 932, in process\n    return obj._compiler_dispatch(self, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\visitors.py\", line 138, in _compiler_dispatch\n    return meth(self, **kw)  # type: ignore  # noqa: E501\n           ^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 4781, in visit_select\n    compile_state = select_stmt._compile_state_factory(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\base.py\", line 701, in create_for_statement\n    return klass.create_for_statement(statement, compiler, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 447, in create_for_statement\n    return cls._create_orm_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 1175, in _create_orm_context\n    _QueryEntity.to_compile_state(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2628, in to_compile_state\n    _MapperEntity(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2708, in __init__\n    entity._post_inspect\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 1338, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n                                           ^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2724, in _post_inspect\n    self._check_configure()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2401, in _check_configure\n    _configure_registries({self.registry}, cascade=True)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4218, in _configure_registries\n    _do_configure_registries(registries, cascade)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4255, in _do_configure_registries\n    raise e\n", "sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 339, "function": "get_transactions"}}
{"timestamp": "2025-08-26T18:58:15.046756Z", "level": "ERROR", "trace_id": "567fef48-5c08-4527-af0d-fd82881694e6", "module": "main", "message": "Request validation error: 'str' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'", "location": {"file": "D:\\dex\\backend\\main.py", "line": 139, "function": "dispatch"}}
{"timestamp": "2025-08-26T18:58:15.054519Z", "level": "ERROR", "trace_id": "567fef48-5c08-4527-af0d-fd82881694e6", "module": "sqlalchemy.pool.impl.StaticPool", "message": "Exception terminating connection <AdaptedConnection <Connection(Thread-16, stopped daemon 16116)>>", "exception": {"type": "CancelledError", "message": "Cancelled by cancel scope 26fa4a74ed0", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\pool\\base.py\", line 372, in _close_connection\n    self._dialect.do_terminate(connection)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 717, in do_terminate\n    self.do_close(dbapi_connection)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 720, in do_close\n    dbapi_connection.close()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 314, in close\n    self.await_(self._connection.close())\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 168, in close\n    await self._execute(self._conn.close)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "asyncio.exceptions.CancelledError: Cancelled by cancel scope 26fa4a74ed0\n"]}, "location": {"file": "D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\pool\\base.py", "line": 376, "function": "_close_connection"}}
{"timestamp": "2025-08-26T18:58:15.056523Z", "level": "ERROR", "trace_id": "567fef48-5c08-4527-af0d-fd82881694e6", "module": "main", "message": "Unhandled exception: AttributeError: 'str' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'", "location": {"file": "D:\\dex\\backend\\main.py", "line": 936, "function": "global_exception_handler"}}
{"timestamp": "2025-08-26T18:58:22.519048Z", "level": "ERROR", "trace_id": "fa033fd7-503e-418f-bf87-af1feb40978f", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T18:58:22.519048Z", "level": "ERROR", "trace_id": "fa033fd7-503e-418f-bf87-af1feb40978f", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T18:58:38.429244Z", "level": "ERROR", "trace_id": "7985dc37-bfcb-4f13-a4fd-07fa3bdcd664", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T18:58:38.429750Z", "level": "ERROR", "trace_id": "7985dc37-bfcb-4f13-a4fd-07fa3bdcd664", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T18:58:45.043367Z", "level": "ERROR", "trace_id": "7985dc37-bfcb-4f13-a4fd-07fa3bdcd664", "module": "app.api.ledger", "message": "Database error fetching positions: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "exception": {"type": "NoForeignKeysError", "message": "Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\relationships.py\", line 2434, in _determine_joins\n    self.primaryjoin = join_condition(\n                       ^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\util.py\", line 121, in join_condition\n    return Join._join_condition(\n           ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\selectable.py\", line 1444, in _join_condition\n    raise exc.NoForeignKeysError(\n", "sqlalchemy.exc.NoForeignKeysError: Can't find any foreign key relationships between 'ledger_entries' and 'advanced_orders'.\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 131, in get_positions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 203, in greenlet_spawn\n    result = context.switch(value)\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1633, in _execute_clauseelement\n    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(\n                                                ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 715, in _compile_w_cache\n    compiled_sql = self._compiler(\n                   ^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 323, in _compiler\n    return dialect.statement_compiler(dialect, self, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 1446, in __init__\n    Compiled.__init__(self, dialect, statement, **kwargs)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 886, in __init__\n    self.string = self.process(self.statement, **compile_kwargs)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 932, in process\n    return obj._compiler_dispatch(self, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\visitors.py\", line 138, in _compiler_dispatch\n    return meth(self, **kw)  # type: ignore  # noqa: E501\n           ^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 4781, in visit_select\n    compile_state = select_stmt._compile_state_factory(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\base.py\", line 701, in create_for_statement\n    return klass.create_for_statement(statement, compiler, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 447, in create_for_statement\n    return cls._create_orm_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 1175, in _create_orm_context\n    _QueryEntity.to_compile_state(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2628, in to_compile_state\n    _MapperEntity(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2708, in __init__\n    entity._post_inspect\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 1338, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n                                           ^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2724, in _post_inspect\n    self._check_configure()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2401, in _check_configure\n    _configure_registries({self.registry}, cascade=True)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4218, in _configure_registries\n    _do_configure_registries(registries, cascade)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4259, in _do_configure_registries\n    mapper._post_configure_properties()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2418, in _post_configure_properties\n    prop.init()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\interfaces.py\", line 595, in init\n    self.do_init()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\relationships.py\", line 1657, in do_init\n    self._setup_join_conditions()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\relationships.py\", line 1895, in _setup_join_conditions\n    self._join_condition = jc = JoinCondition(\n                                ^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\relationships.py\", line 2321, in __init__\n    self._determine_joins()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\relationships.py\", line 2455, in _determine_joins\n    raise sa_exc.NoForeignKeysError(\n", "sqlalchemy.exc.NoForeignKeysError: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 173, "function": "get_positions"}}
{"timestamp": "2025-08-26T18:58:45.051295Z", "level": "ERROR", "trace_id": "7985dc37-bfcb-4f13-a4fd-07fa3bdcd664", "module": "app.api.ledger", "message": "Database error calculating portfolio summary: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "exception": {"type": "InvalidRequestError", "message": "One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 410, in get_portfolio_summary\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 203, in greenlet_spawn\n    result = context.switch(value)\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1633, in _execute_clauseelement\n    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(\n                                                ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 715, in _compile_w_cache\n    compiled_sql = self._compiler(\n                   ^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 323, in _compiler\n    return dialect.statement_compiler(dialect, self, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 1446, in __init__\n    Compiled.__init__(self, dialect, statement, **kwargs)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 886, in __init__\n    self.string = self.process(self.statement, **compile_kwargs)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 932, in process\n    return obj._compiler_dispatch(self, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\visitors.py\", line 138, in _compiler_dispatch\n    return meth(self, **kw)  # type: ignore  # noqa: E501\n           ^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 4781, in visit_select\n    compile_state = select_stmt._compile_state_factory(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\base.py\", line 701, in create_for_statement\n    return klass.create_for_statement(statement, compiler, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 447, in create_for_statement\n    return cls._create_orm_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 1175, in _create_orm_context\n    _QueryEntity.to_compile_state(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2628, in to_compile_state\n    _MapperEntity(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2708, in __init__\n    entity._post_inspect\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 1338, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n                                           ^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2724, in _post_inspect\n    self._check_configure()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2401, in _check_configure\n    _configure_registries({self.registry}, cascade=True)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4218, in _configure_registries\n    _do_configure_registries(registries, cascade)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4255, in _do_configure_registries\n    raise e\n", "sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 441, "function": "get_portfolio_summary"}}
{"timestamp": "2025-08-26T18:58:45.068209Z", "level": "ERROR", "trace_id": "7985dc37-bfcb-4f13-a4fd-07fa3bdcd664", "module": "app.api.ledger", "message": "Database error fetching transactions: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "exception": {"type": "InvalidRequestError", "message": "One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 264, in get_transactions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 203, in greenlet_spawn\n    result = context.switch(value)\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1633, in _execute_clauseelement\n    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(\n                                                ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 715, in _compile_w_cache\n    compiled_sql = self._compiler(\n                   ^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 323, in _compiler\n    return dialect.statement_compiler(dialect, self, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 1446, in __init__\n    Compiled.__init__(self, dialect, statement, **kwargs)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 886, in __init__\n    self.string = self.process(self.statement, **compile_kwargs)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 932, in process\n    return obj._compiler_dispatch(self, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\visitors.py\", line 138, in _compiler_dispatch\n    return meth(self, **kw)  # type: ignore  # noqa: E501\n           ^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 4781, in visit_select\n    compile_state = select_stmt._compile_state_factory(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\base.py\", line 701, in create_for_statement\n    return klass.create_for_statement(statement, compiler, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 447, in create_for_statement\n    return cls._create_orm_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 1175, in _create_orm_context\n    _QueryEntity.to_compile_state(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2628, in to_compile_state\n    _MapperEntity(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2708, in __init__\n    entity._post_inspect\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 1338, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n                                           ^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2724, in _post_inspect\n    self._check_configure()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2401, in _check_configure\n    _configure_registries({self.registry}, cascade=True)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4218, in _configure_registries\n    _do_configure_registries(registries, cascade)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4255, in _do_configure_registries\n    raise e\n", "sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 340, "function": "get_transactions"}}
{"timestamp": "2025-08-26T18:58:45.073335Z", "level": "ERROR", "trace_id": "7985dc37-bfcb-4f13-a4fd-07fa3bdcd664", "module": "main", "message": "Request validation error: 'str' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'", "location": {"file": "D:\\dex\\backend\\main.py", "line": 139, "function": "dispatch"}}
{"timestamp": "2025-08-26T18:58:45.081759Z", "level": "ERROR", "trace_id": "7985dc37-bfcb-4f13-a4fd-07fa3bdcd664", "module": "sqlalchemy.pool.impl.StaticPool", "message": "Exception terminating connection <AdaptedConnection <Connection(Thread-2, stopped daemon 22048)>>", "exception": {"type": "CancelledError", "message": "Cancelled by cancel scope 1e3049ab890", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\pool\\base.py\", line 372, in _close_connection\n    self._dialect.do_terminate(connection)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 717, in do_terminate\n    self.do_close(dbapi_connection)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 720, in do_close\n    dbapi_connection.close()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 314, in close\n    self.await_(self._connection.close())\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 168, in close\n    await self._execute(self._conn.close)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "asyncio.exceptions.CancelledError: Cancelled by cancel scope 1e3049ab890\n"]}, "location": {"file": "D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\pool\\base.py", "line": 376, "function": "_close_connection"}}
{"timestamp": "2025-08-26T18:58:45.083265Z", "level": "ERROR", "trace_id": "7985dc37-bfcb-4f13-a4fd-07fa3bdcd664", "module": "main", "message": "Unhandled exception: AttributeError: 'str' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'", "location": {"file": "D:\\dex\\backend\\main.py", "line": 936, "function": "global_exception_handler"}}
{"timestamp": "2025-08-26T18:59:15.035635Z", "level": "ERROR", "trace_id": "7985dc37-bfcb-4f13-a4fd-07fa3bdcd664", "module": "app.api.ledger", "message": "Database error calculating portfolio summary: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "exception": {"type": "InvalidRequestError", "message": "One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 410, in get_portfolio_summary\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 203, in greenlet_spawn\n    result = context.switch(value)\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1633, in _execute_clauseelement\n    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(\n                                                ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 715, in _compile_w_cache\n    compiled_sql = self._compiler(\n                   ^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 323, in _compiler\n    return dialect.statement_compiler(dialect, self, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 1446, in __init__\n    Compiled.__init__(self, dialect, statement, **kwargs)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 886, in __init__\n    self.string = self.process(self.statement, **compile_kwargs)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 932, in process\n    return obj._compiler_dispatch(self, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\visitors.py\", line 138, in _compiler_dispatch\n    return meth(self, **kw)  # type: ignore  # noqa: E501\n           ^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 4781, in visit_select\n    compile_state = select_stmt._compile_state_factory(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\base.py\", line 701, in create_for_statement\n    return klass.create_for_statement(statement, compiler, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 447, in create_for_statement\n    return cls._create_orm_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 1175, in _create_orm_context\n    _QueryEntity.to_compile_state(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2628, in to_compile_state\n    _MapperEntity(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2708, in __init__\n    entity._post_inspect\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 1338, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n                                           ^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2724, in _post_inspect\n    self._check_configure()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2401, in _check_configure\n    _configure_registries({self.registry}, cascade=True)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4218, in _configure_registries\n    _do_configure_registries(registries, cascade)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4255, in _do_configure_registries\n    raise e\n", "sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 441, "function": "get_portfolio_summary"}}
{"timestamp": "2025-08-26T18:59:15.041936Z", "level": "ERROR", "trace_id": "7985dc37-bfcb-4f13-a4fd-07fa3bdcd664", "module": "app.api.ledger", "message": "Database error fetching positions: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "exception": {"type": "InvalidRequestError", "message": "One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 131, in get_positions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 203, in greenlet_spawn\n    result = context.switch(value)\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1633, in _execute_clauseelement\n    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(\n                                                ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 715, in _compile_w_cache\n    compiled_sql = self._compiler(\n                   ^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 323, in _compiler\n    return dialect.statement_compiler(dialect, self, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 1446, in __init__\n    Compiled.__init__(self, dialect, statement, **kwargs)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 886, in __init__\n    self.string = self.process(self.statement, **compile_kwargs)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 932, in process\n    return obj._compiler_dispatch(self, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\visitors.py\", line 138, in _compiler_dispatch\n    return meth(self, **kw)  # type: ignore  # noqa: E501\n           ^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 4781, in visit_select\n    compile_state = select_stmt._compile_state_factory(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\base.py\", line 701, in create_for_statement\n    return klass.create_for_statement(statement, compiler, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 447, in create_for_statement\n    return cls._create_orm_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 1175, in _create_orm_context\n    _QueryEntity.to_compile_state(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2628, in to_compile_state\n    _MapperEntity(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2708, in __init__\n    entity._post_inspect\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 1338, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n                                           ^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2724, in _post_inspect\n    self._check_configure()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2401, in _check_configure\n    _configure_registries({self.registry}, cascade=True)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4218, in _configure_registries\n    _do_configure_registries(registries, cascade)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4255, in _do_configure_registries\n    raise e\n", "sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 173, "function": "get_positions"}}
{"timestamp": "2025-08-26T18:59:15.049280Z", "level": "ERROR", "trace_id": "7985dc37-bfcb-4f13-a4fd-07fa3bdcd664", "module": "app.api.ledger", "message": "Database error fetching transactions: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "exception": {"type": "InvalidRequestError", "message": "One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 264, in get_transactions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 203, in greenlet_spawn\n    result = context.switch(value)\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1633, in _execute_clauseelement\n    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(\n                                                ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 715, in _compile_w_cache\n    compiled_sql = self._compiler(\n                   ^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 323, in _compiler\n    return dialect.statement_compiler(dialect, self, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 1446, in __init__\n    Compiled.__init__(self, dialect, statement, **kwargs)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 886, in __init__\n    self.string = self.process(self.statement, **compile_kwargs)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 932, in process\n    return obj._compiler_dispatch(self, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\visitors.py\", line 138, in _compiler_dispatch\n    return meth(self, **kw)  # type: ignore  # noqa: E501\n           ^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 4781, in visit_select\n    compile_state = select_stmt._compile_state_factory(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\base.py\", line 701, in create_for_statement\n    return klass.create_for_statement(statement, compiler, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 447, in create_for_statement\n    return cls._create_orm_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 1175, in _create_orm_context\n    _QueryEntity.to_compile_state(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2628, in to_compile_state\n    _MapperEntity(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2708, in __init__\n    entity._post_inspect\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 1338, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n                                           ^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2724, in _post_inspect\n    self._check_configure()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2401, in _check_configure\n    _configure_registries({self.registry}, cascade=True)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4218, in _configure_registries\n    _do_configure_registries(registries, cascade)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4255, in _do_configure_registries\n    raise e\n", "sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 340, "function": "get_transactions"}}
{"timestamp": "2025-08-26T18:59:15.053842Z", "level": "ERROR", "trace_id": "7985dc37-bfcb-4f13-a4fd-07fa3bdcd664", "module": "main", "message": "Request validation error: 'str' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'", "location": {"file": "D:\\dex\\backend\\main.py", "line": 139, "function": "dispatch"}}
{"timestamp": "2025-08-26T18:59:15.060256Z", "level": "ERROR", "trace_id": "7985dc37-bfcb-4f13-a4fd-07fa3bdcd664", "module": "sqlalchemy.pool.impl.StaticPool", "message": "Exception terminating connection <AdaptedConnection <Connection(Thread-5, stopped daemon 2664)>>", "exception": {"type": "CancelledError", "message": "Cancelled by cancel scope 1e304b98490", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\pool\\base.py\", line 372, in _close_connection\n    self._dialect.do_terminate(connection)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 717, in do_terminate\n    self.do_close(dbapi_connection)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 720, in do_close\n    dbapi_connection.close()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 314, in close\n    self.await_(self._connection.close())\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 168, in close\n    await self._execute(self._conn.close)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "asyncio.exceptions.CancelledError: Cancelled by cancel scope 1e304b98490\n"]}, "location": {"file": "D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\pool\\base.py", "line": 376, "function": "_close_connection"}}
{"timestamp": "2025-08-26T18:59:15.062451Z", "level": "ERROR", "trace_id": "7985dc37-bfcb-4f13-a4fd-07fa3bdcd664", "module": "main", "message": "Unhandled exception: AttributeError: 'str' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'", "location": {"file": "D:\\dex\\backend\\main.py", "line": 936, "function": "global_exception_handler"}}
{"timestamp": "2025-08-26T18:59:35.536957Z", "level": "ERROR", "trace_id": "7d817a56-a9eb-4a92-86e4-b5e2a2f242d2", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T18:59:35.536957Z", "level": "ERROR", "trace_id": "7d817a56-a9eb-4a92-86e4-b5e2a2f242d2", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T18:59:42.502199Z", "level": "ERROR", "trace_id": "d09b6c46-c320-482c-9875-a89cd5e08e10", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T18:59:42.502199Z", "level": "ERROR", "trace_id": "d09b6c46-c320-482c-9875-a89cd5e08e10", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T18:59:51.379374Z", "level": "ERROR", "trace_id": "71fd3fa5-c68c-4af7-82dd-c7c1e30ddcff", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T18:59:51.379374Z", "level": "ERROR", "trace_id": "71fd3fa5-c68c-4af7-82dd-c7c1e30ddcff", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T18:59:58.428599Z", "level": "ERROR", "trace_id": "c12a3d3f-95a9-42dd-a749-99f7dfc47697", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T18:59:58.428599Z", "level": "ERROR", "trace_id": "c12a3d3f-95a9-42dd-a749-99f7dfc47697", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T19:00:05.454212Z", "level": "ERROR", "trace_id": "fa9a3a76-9015-4dc7-8c32-b084a74dd143", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T19:00:05.454212Z", "level": "ERROR", "trace_id": "fa9a3a76-9015-4dc7-8c32-b084a74dd143", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T19:00:12.386190Z", "level": "ERROR", "trace_id": "4ef0eb8f-a75d-4602-ba1e-276885c3c891", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T19:00:12.387318Z", "level": "ERROR", "trace_id": "4ef0eb8f-a75d-4602-ba1e-276885c3c891", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T19:00:12.862814Z", "level": "ERROR", "trace_id": "4ef0eb8f-a75d-4602-ba1e-276885c3c891", "module": "app.api.ledger", "message": "Database error fetching positions: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "exception": {"type": "NoForeignKeysError", "message": "Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\relationships.py\", line 2434, in _determine_joins\n    self.primaryjoin = join_condition(\n                       ^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\util.py\", line 121, in join_condition\n    return Join._join_condition(\n           ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\selectable.py\", line 1444, in _join_condition\n    raise exc.NoForeignKeysError(\n", "sqlalchemy.exc.NoForeignKeysError: Can't find any foreign key relationships between 'ledger_entries' and 'advanced_orders'.\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 131, in get_positions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 203, in greenlet_spawn\n    result = context.switch(value)\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1633, in _execute_clauseelement\n    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(\n                                                ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 715, in _compile_w_cache\n    compiled_sql = self._compiler(\n                   ^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 323, in _compiler\n    return dialect.statement_compiler(dialect, self, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 1446, in __init__\n    Compiled.__init__(self, dialect, statement, **kwargs)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 886, in __init__\n    self.string = self.process(self.statement, **compile_kwargs)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 932, in process\n    return obj._compiler_dispatch(self, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\visitors.py\", line 138, in _compiler_dispatch\n    return meth(self, **kw)  # type: ignore  # noqa: E501\n           ^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 4781, in visit_select\n    compile_state = select_stmt._compile_state_factory(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\base.py\", line 701, in create_for_statement\n    return klass.create_for_statement(statement, compiler, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 447, in create_for_statement\n    return cls._create_orm_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 1175, in _create_orm_context\n    _QueryEntity.to_compile_state(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2628, in to_compile_state\n    _MapperEntity(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2708, in __init__\n    entity._post_inspect\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 1338, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n                                           ^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2724, in _post_inspect\n    self._check_configure()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2401, in _check_configure\n    _configure_registries({self.registry}, cascade=True)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4218, in _configure_registries\n    _do_configure_registries(registries, cascade)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4259, in _do_configure_registries\n    mapper._post_configure_properties()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2418, in _post_configure_properties\n    prop.init()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\interfaces.py\", line 595, in init\n    self.do_init()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\relationships.py\", line 1657, in do_init\n    self._setup_join_conditions()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\relationships.py\", line 1895, in _setup_join_conditions\n    self._join_condition = jc = JoinCondition(\n                                ^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\relationships.py\", line 2321, in __init__\n    self._determine_joins()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\relationships.py\", line 2455, in _determine_joins\n    raise sa_exc.NoForeignKeysError(\n", "sqlalchemy.exc.NoForeignKeysError: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 173, "function": "get_positions"}}
{"timestamp": "2025-08-26T19:00:12.870182Z", "level": "ERROR", "trace_id": "4ef0eb8f-a75d-4602-ba1e-276885c3c891", "module": "app.api.ledger", "message": "Database error calculating portfolio summary: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "exception": {"type": "InvalidRequestError", "message": "One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 410, in get_portfolio_summary\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 203, in greenlet_spawn\n    result = context.switch(value)\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1633, in _execute_clauseelement\n    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(\n                                                ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 715, in _compile_w_cache\n    compiled_sql = self._compiler(\n                   ^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 323, in _compiler\n    return dialect.statement_compiler(dialect, self, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 1446, in __init__\n    Compiled.__init__(self, dialect, statement, **kwargs)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 886, in __init__\n    self.string = self.process(self.statement, **compile_kwargs)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 932, in process\n    return obj._compiler_dispatch(self, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\visitors.py\", line 138, in _compiler_dispatch\n    return meth(self, **kw)  # type: ignore  # noqa: E501\n           ^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 4781, in visit_select\n    compile_state = select_stmt._compile_state_factory(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\base.py\", line 701, in create_for_statement\n    return klass.create_for_statement(statement, compiler, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 447, in create_for_statement\n    return cls._create_orm_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 1175, in _create_orm_context\n    _QueryEntity.to_compile_state(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2628, in to_compile_state\n    _MapperEntity(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2708, in __init__\n    entity._post_inspect\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 1338, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n                                           ^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2724, in _post_inspect\n    self._check_configure()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2401, in _check_configure\n    _configure_registries({self.registry}, cascade=True)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4218, in _configure_registries\n    _do_configure_registries(registries, cascade)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4255, in _do_configure_registries\n    raise e\n", "sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 441, "function": "get_portfolio_summary"}}
{"timestamp": "2025-08-26T19:00:15.896951Z", "level": "ERROR", "trace_id": "4ef0eb8f-a75d-4602-ba1e-276885c3c891", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T19:00:15.897526Z", "level": "ERROR", "trace_id": "4ef0eb8f-a75d-4602-ba1e-276885c3c891", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T19:00:16.004512Z", "level": "ERROR", "trace_id": "4ef0eb8f-a75d-4602-ba1e-276885c3c891", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T19:00:19.208288Z", "level": "ERROR", "trace_id": "4ef0eb8f-a75d-4602-ba1e-276885c3c891", "module": "app.api.ledger", "message": "Database error fetching positions: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "exception": {"type": "InvalidRequestError", "message": "One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 131, in get_positions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 203, in greenlet_spawn\n    result = context.switch(value)\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1633, in _execute_clauseelement\n    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(\n                                                ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 715, in _compile_w_cache\n    compiled_sql = self._compiler(\n                   ^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 323, in _compiler\n    return dialect.statement_compiler(dialect, self, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 1446, in __init__\n    Compiled.__init__(self, dialect, statement, **kwargs)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 886, in __init__\n    self.string = self.process(self.statement, **compile_kwargs)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 932, in process\n    return obj._compiler_dispatch(self, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\visitors.py\", line 138, in _compiler_dispatch\n    return meth(self, **kw)  # type: ignore  # noqa: E501\n           ^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 4781, in visit_select\n    compile_state = select_stmt._compile_state_factory(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\base.py\", line 701, in create_for_statement\n    return klass.create_for_statement(statement, compiler, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 447, in create_for_statement\n    return cls._create_orm_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 1175, in _create_orm_context\n    _QueryEntity.to_compile_state(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2628, in to_compile_state\n    _MapperEntity(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2708, in __init__\n    entity._post_inspect\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 1338, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n                                           ^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2724, in _post_inspect\n    self._check_configure()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2401, in _check_configure\n    _configure_registries({self.registry}, cascade=True)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4218, in _configure_registries\n    _do_configure_registries(registries, cascade)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4255, in _do_configure_registries\n    raise e\n", "sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 173, "function": "get_positions"}}
{"timestamp": "2025-08-26T19:00:19.214065Z", "level": "ERROR", "trace_id": "4ef0eb8f-a75d-4602-ba1e-276885c3c891", "module": "app.api.ledger", "message": "Database error calculating portfolio summary: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "exception": {"type": "InvalidRequestError", "message": "One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 410, in get_portfolio_summary\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 203, in greenlet_spawn\n    result = context.switch(value)\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1633, in _execute_clauseelement\n    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(\n                                                ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 715, in _compile_w_cache\n    compiled_sql = self._compiler(\n                   ^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 323, in _compiler\n    return dialect.statement_compiler(dialect, self, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 1446, in __init__\n    Compiled.__init__(self, dialect, statement, **kwargs)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 886, in __init__\n    self.string = self.process(self.statement, **compile_kwargs)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 932, in process\n    return obj._compiler_dispatch(self, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\visitors.py\", line 138, in _compiler_dispatch\n    return meth(self, **kw)  # type: ignore  # noqa: E501\n           ^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 4781, in visit_select\n    compile_state = select_stmt._compile_state_factory(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\base.py\", line 701, in create_for_statement\n    return klass.create_for_statement(statement, compiler, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 447, in create_for_statement\n    return cls._create_orm_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 1175, in _create_orm_context\n    _QueryEntity.to_compile_state(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2628, in to_compile_state\n    _MapperEntity(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2708, in __init__\n    entity._post_inspect\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 1338, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n                                           ^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2724, in _post_inspect\n    self._check_configure()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2401, in _check_configure\n    _configure_registries({self.registry}, cascade=True)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4218, in _configure_registries\n    _do_configure_registries(registries, cascade)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4255, in _do_configure_registries\n    raise e\n", "sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 441, "function": "get_portfolio_summary"}}
{"timestamp": "2025-08-26T19:00:19.219931Z", "level": "ERROR", "trace_id": "4ef0eb8f-a75d-4602-ba1e-276885c3c891", "module": "app.api.ledger", "message": "Database error fetching transactions: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "exception": {"type": "InvalidRequestError", "message": "One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 264, in get_transactions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 203, in greenlet_spawn\n    result = context.switch(value)\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1633, in _execute_clauseelement\n    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(\n                                                ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 715, in _compile_w_cache\n    compiled_sql = self._compiler(\n                   ^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 323, in _compiler\n    return dialect.statement_compiler(dialect, self, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 1446, in __init__\n    Compiled.__init__(self, dialect, statement, **kwargs)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 886, in __init__\n    self.string = self.process(self.statement, **compile_kwargs)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 932, in process\n    return obj._compiler_dispatch(self, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\visitors.py\", line 138, in _compiler_dispatch\n    return meth(self, **kw)  # type: ignore  # noqa: E501\n           ^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 4781, in visit_select\n    compile_state = select_stmt._compile_state_factory(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\base.py\", line 701, in create_for_statement\n    return klass.create_for_statement(statement, compiler, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 447, in create_for_statement\n    return cls._create_orm_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 1175, in _create_orm_context\n    _QueryEntity.to_compile_state(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2628, in to_compile_state\n    _MapperEntity(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2708, in __init__\n    entity._post_inspect\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 1338, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n                                           ^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2724, in _post_inspect\n    self._check_configure()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2401, in _check_configure\n    _configure_registries({self.registry}, cascade=True)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4218, in _configure_registries\n    _do_configure_registries(registries, cascade)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4255, in _do_configure_registries\n    raise e\n", "sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 340, "function": "get_transactions"}}
{"timestamp": "2025-08-26T19:00:49.223335Z", "level": "ERROR", "trace_id": "4ef0eb8f-a75d-4602-ba1e-276885c3c891", "module": "app.api.ledger", "message": "Database error fetching positions: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "exception": {"type": "InvalidRequestError", "message": "One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 131, in get_positions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 203, in greenlet_spawn\n    result = context.switch(value)\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1633, in _execute_clauseelement\n    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(\n                                                ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 715, in _compile_w_cache\n    compiled_sql = self._compiler(\n                   ^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 323, in _compiler\n    return dialect.statement_compiler(dialect, self, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 1446, in __init__\n    Compiled.__init__(self, dialect, statement, **kwargs)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 886, in __init__\n    self.string = self.process(self.statement, **compile_kwargs)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 932, in process\n    return obj._compiler_dispatch(self, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\visitors.py\", line 138, in _compiler_dispatch\n    return meth(self, **kw)  # type: ignore  # noqa: E501\n           ^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 4781, in visit_select\n    compile_state = select_stmt._compile_state_factory(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\base.py\", line 701, in create_for_statement\n    return klass.create_for_statement(statement, compiler, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 447, in create_for_statement\n    return cls._create_orm_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 1175, in _create_orm_context\n    _QueryEntity.to_compile_state(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2628, in to_compile_state\n    _MapperEntity(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2708, in __init__\n    entity._post_inspect\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 1338, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n                                           ^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2724, in _post_inspect\n    self._check_configure()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2401, in _check_configure\n    _configure_registries({self.registry}, cascade=True)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4218, in _configure_registries\n    _do_configure_registries(registries, cascade)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4255, in _do_configure_registries\n    raise e\n", "sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 173, "function": "get_positions"}}
{"timestamp": "2025-08-26T19:00:49.230789Z", "level": "ERROR", "trace_id": "4ef0eb8f-a75d-4602-ba1e-276885c3c891", "module": "app.api.ledger", "message": "Database error calculating portfolio summary: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "exception": {"type": "InvalidRequestError", "message": "One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 410, in get_portfolio_summary\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 203, in greenlet_spawn\n    result = context.switch(value)\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1633, in _execute_clauseelement\n    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(\n                                                ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 715, in _compile_w_cache\n    compiled_sql = self._compiler(\n                   ^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 323, in _compiler\n    return dialect.statement_compiler(dialect, self, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 1446, in __init__\n    Compiled.__init__(self, dialect, statement, **kwargs)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 886, in __init__\n    self.string = self.process(self.statement, **compile_kwargs)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 932, in process\n    return obj._compiler_dispatch(self, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\visitors.py\", line 138, in _compiler_dispatch\n    return meth(self, **kw)  # type: ignore  # noqa: E501\n           ^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 4781, in visit_select\n    compile_state = select_stmt._compile_state_factory(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\base.py\", line 701, in create_for_statement\n    return klass.create_for_statement(statement, compiler, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 447, in create_for_statement\n    return cls._create_orm_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 1175, in _create_orm_context\n    _QueryEntity.to_compile_state(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2628, in to_compile_state\n    _MapperEntity(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2708, in __init__\n    entity._post_inspect\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 1338, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n                                           ^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2724, in _post_inspect\n    self._check_configure()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2401, in _check_configure\n    _configure_registries({self.registry}, cascade=True)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4218, in _configure_registries\n    _do_configure_registries(registries, cascade)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4255, in _do_configure_registries\n    raise e\n", "sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 441, "function": "get_portfolio_summary"}}
{"timestamp": "2025-08-26T19:00:49.237824Z", "level": "ERROR", "trace_id": "4ef0eb8f-a75d-4602-ba1e-276885c3c891", "module": "app.api.ledger", "message": "Database error fetching transactions: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "exception": {"type": "InvalidRequestError", "message": "One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 264, in get_transactions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 203, in greenlet_spawn\n    result = context.switch(value)\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1633, in _execute_clauseelement\n    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(\n                                                ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 715, in _compile_w_cache\n    compiled_sql = self._compiler(\n                   ^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 323, in _compiler\n    return dialect.statement_compiler(dialect, self, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 1446, in __init__\n    Compiled.__init__(self, dialect, statement, **kwargs)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 886, in __init__\n    self.string = self.process(self.statement, **compile_kwargs)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 932, in process\n    return obj._compiler_dispatch(self, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\visitors.py\", line 138, in _compiler_dispatch\n    return meth(self, **kw)  # type: ignore  # noqa: E501\n           ^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 4781, in visit_select\n    compile_state = select_stmt._compile_state_factory(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\base.py\", line 701, in create_for_statement\n    return klass.create_for_statement(statement, compiler, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 447, in create_for_statement\n    return cls._create_orm_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 1175, in _create_orm_context\n    _QueryEntity.to_compile_state(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2628, in to_compile_state\n    _MapperEntity(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2708, in __init__\n    entity._post_inspect\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 1338, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n                                           ^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2724, in _post_inspect\n    self._check_configure()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2401, in _check_configure\n    _configure_registries({self.registry}, cascade=True)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4218, in _configure_registries\n    _do_configure_registries(registries, cascade)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4255, in _do_configure_registries\n    raise e\n", "sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 340, "function": "get_transactions"}}
{"timestamp": "2025-08-26T19:01:19.233150Z", "level": "ERROR", "trace_id": "4ef0eb8f-a75d-4602-ba1e-276885c3c891", "module": "app.api.ledger", "message": "Database error fetching transactions: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "exception": {"type": "InvalidRequestError", "message": "One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 264, in get_transactions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 203, in greenlet_spawn\n    result = context.switch(value)\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1633, in _execute_clauseelement\n    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(\n                                                ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 715, in _compile_w_cache\n    compiled_sql = self._compiler(\n                   ^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 323, in _compiler\n    return dialect.statement_compiler(dialect, self, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 1446, in __init__\n    Compiled.__init__(self, dialect, statement, **kwargs)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 886, in __init__\n    self.string = self.process(self.statement, **compile_kwargs)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 932, in process\n    return obj._compiler_dispatch(self, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\visitors.py\", line 138, in _compiler_dispatch\n    return meth(self, **kw)  # type: ignore  # noqa: E501\n           ^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 4781, in visit_select\n    compile_state = select_stmt._compile_state_factory(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\base.py\", line 701, in create_for_statement\n    return klass.create_for_statement(statement, compiler, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 447, in create_for_statement\n    return cls._create_orm_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 1175, in _create_orm_context\n    _QueryEntity.to_compile_state(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2628, in to_compile_state\n    _MapperEntity(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2708, in __init__\n    entity._post_inspect\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 1338, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n                                           ^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2724, in _post_inspect\n    self._check_configure()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2401, in _check_configure\n    _configure_registries({self.registry}, cascade=True)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4218, in _configure_registries\n    _do_configure_registries(registries, cascade)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4255, in _do_configure_registries\n    raise e\n", "sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 340, "function": "get_transactions"}}
{"timestamp": "2025-08-26T19:01:19.240511Z", "level": "ERROR", "trace_id": "4ef0eb8f-a75d-4602-ba1e-276885c3c891", "module": "app.api.ledger", "message": "Database error fetching positions: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "exception": {"type": "InvalidRequestError", "message": "One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 131, in get_positions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 203, in greenlet_spawn\n    result = context.switch(value)\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1633, in _execute_clauseelement\n    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(\n                                                ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 715, in _compile_w_cache\n    compiled_sql = self._compiler(\n                   ^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 323, in _compiler\n    return dialect.statement_compiler(dialect, self, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 1446, in __init__\n    Compiled.__init__(self, dialect, statement, **kwargs)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 886, in __init__\n    self.string = self.process(self.statement, **compile_kwargs)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 932, in process\n    return obj._compiler_dispatch(self, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\visitors.py\", line 138, in _compiler_dispatch\n    return meth(self, **kw)  # type: ignore  # noqa: E501\n           ^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 4781, in visit_select\n    compile_state = select_stmt._compile_state_factory(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\base.py\", line 701, in create_for_statement\n    return klass.create_for_statement(statement, compiler, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 447, in create_for_statement\n    return cls._create_orm_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 1175, in _create_orm_context\n    _QueryEntity.to_compile_state(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2628, in to_compile_state\n    _MapperEntity(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2708, in __init__\n    entity._post_inspect\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 1338, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n                                           ^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2724, in _post_inspect\n    self._check_configure()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2401, in _check_configure\n    _configure_registries({self.registry}, cascade=True)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4218, in _configure_registries\n    _do_configure_registries(registries, cascade)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4255, in _do_configure_registries\n    raise e\n", "sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 173, "function": "get_positions"}}
{"timestamp": "2025-08-26T19:01:19.246666Z", "level": "ERROR", "trace_id": "4ef0eb8f-a75d-4602-ba1e-276885c3c891", "module": "app.api.ledger", "message": "Database error calculating portfolio summary: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "exception": {"type": "InvalidRequestError", "message": "One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 410, in get_portfolio_summary\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 203, in greenlet_spawn\n    result = context.switch(value)\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1633, in _execute_clauseelement\n    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(\n                                                ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 715, in _compile_w_cache\n    compiled_sql = self._compiler(\n                   ^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 323, in _compiler\n    return dialect.statement_compiler(dialect, self, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 1446, in __init__\n    Compiled.__init__(self, dialect, statement, **kwargs)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 886, in __init__\n    self.string = self.process(self.statement, **compile_kwargs)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 932, in process\n    return obj._compiler_dispatch(self, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\visitors.py\", line 138, in _compiler_dispatch\n    return meth(self, **kw)  # type: ignore  # noqa: E501\n           ^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 4781, in visit_select\n    compile_state = select_stmt._compile_state_factory(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\base.py\", line 701, in create_for_statement\n    return klass.create_for_statement(statement, compiler, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 447, in create_for_statement\n    return cls._create_orm_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 1175, in _create_orm_context\n    _QueryEntity.to_compile_state(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2628, in to_compile_state\n    _MapperEntity(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2708, in __init__\n    entity._post_inspect\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 1338, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n                                           ^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2724, in _post_inspect\n    self._check_configure()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2401, in _check_configure\n    _configure_registries({self.registry}, cascade=True)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4218, in _configure_registries\n    _do_configure_registries(registries, cascade)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4255, in _do_configure_registries\n    raise e\n", "sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 441, "function": "get_portfolio_summary"}}
{"timestamp": "2025-08-26T19:01:49.229270Z", "level": "ERROR", "trace_id": "4ef0eb8f-a75d-4602-ba1e-276885c3c891", "module": "app.api.ledger", "message": "Database error fetching positions: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "exception": {"type": "InvalidRequestError", "message": "One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 131, in get_positions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 203, in greenlet_spawn\n    result = context.switch(value)\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1633, in _execute_clauseelement\n    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(\n                                                ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 715, in _compile_w_cache\n    compiled_sql = self._compiler(\n                   ^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 323, in _compiler\n    return dialect.statement_compiler(dialect, self, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 1446, in __init__\n    Compiled.__init__(self, dialect, statement, **kwargs)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 886, in __init__\n    self.string = self.process(self.statement, **compile_kwargs)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 932, in process\n    return obj._compiler_dispatch(self, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\visitors.py\", line 138, in _compiler_dispatch\n    return meth(self, **kw)  # type: ignore  # noqa: E501\n           ^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 4781, in visit_select\n    compile_state = select_stmt._compile_state_factory(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\base.py\", line 701, in create_for_statement\n    return klass.create_for_statement(statement, compiler, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 447, in create_for_statement\n    return cls._create_orm_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 1175, in _create_orm_context\n    _QueryEntity.to_compile_state(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2628, in to_compile_state\n    _MapperEntity(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2708, in __init__\n    entity._post_inspect\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 1338, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n                                           ^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2724, in _post_inspect\n    self._check_configure()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2401, in _check_configure\n    _configure_registries({self.registry}, cascade=True)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4218, in _configure_registries\n    _do_configure_registries(registries, cascade)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4255, in _do_configure_registries\n    raise e\n", "sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 173, "function": "get_positions"}}
{"timestamp": "2025-08-26T19:01:49.235981Z", "level": "ERROR", "trace_id": "4ef0eb8f-a75d-4602-ba1e-276885c3c891", "module": "app.api.ledger", "message": "Database error fetching transactions: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "exception": {"type": "InvalidRequestError", "message": "One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 264, in get_transactions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 203, in greenlet_spawn\n    result = context.switch(value)\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1633, in _execute_clauseelement\n    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(\n                                                ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 715, in _compile_w_cache\n    compiled_sql = self._compiler(\n                   ^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 323, in _compiler\n    return dialect.statement_compiler(dialect, self, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 1446, in __init__\n    Compiled.__init__(self, dialect, statement, **kwargs)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 886, in __init__\n    self.string = self.process(self.statement, **compile_kwargs)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 932, in process\n    return obj._compiler_dispatch(self, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\visitors.py\", line 138, in _compiler_dispatch\n    return meth(self, **kw)  # type: ignore  # noqa: E501\n           ^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 4781, in visit_select\n    compile_state = select_stmt._compile_state_factory(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\base.py\", line 701, in create_for_statement\n    return klass.create_for_statement(statement, compiler, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 447, in create_for_statement\n    return cls._create_orm_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 1175, in _create_orm_context\n    _QueryEntity.to_compile_state(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2628, in to_compile_state\n    _MapperEntity(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2708, in __init__\n    entity._post_inspect\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 1338, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n                                           ^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2724, in _post_inspect\n    self._check_configure()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2401, in _check_configure\n    _configure_registries({self.registry}, cascade=True)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4218, in _configure_registries\n    _do_configure_registries(registries, cascade)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4255, in _do_configure_registries\n    raise e\n", "sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 340, "function": "get_transactions"}}
{"timestamp": "2025-08-26T19:01:49.243585Z", "level": "ERROR", "trace_id": "4ef0eb8f-a75d-4602-ba1e-276885c3c891", "module": "app.api.ledger", "message": "Database error calculating portfolio summary: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "exception": {"type": "InvalidRequestError", "message": "One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 410, in get_portfolio_summary\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 203, in greenlet_spawn\n    result = context.switch(value)\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1633, in _execute_clauseelement\n    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(\n                                                ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 715, in _compile_w_cache\n    compiled_sql = self._compiler(\n                   ^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 323, in _compiler\n    return dialect.statement_compiler(dialect, self, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 1446, in __init__\n    Compiled.__init__(self, dialect, statement, **kwargs)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 886, in __init__\n    self.string = self.process(self.statement, **compile_kwargs)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 932, in process\n    return obj._compiler_dispatch(self, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\visitors.py\", line 138, in _compiler_dispatch\n    return meth(self, **kw)  # type: ignore  # noqa: E501\n           ^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 4781, in visit_select\n    compile_state = select_stmt._compile_state_factory(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\base.py\", line 701, in create_for_statement\n    return klass.create_for_statement(statement, compiler, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 447, in create_for_statement\n    return cls._create_orm_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 1175, in _create_orm_context\n    _QueryEntity.to_compile_state(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2628, in to_compile_state\n    _MapperEntity(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2708, in __init__\n    entity._post_inspect\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 1338, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n                                           ^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2724, in _post_inspect\n    self._check_configure()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2401, in _check_configure\n    _configure_registries({self.registry}, cascade=True)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4218, in _configure_registries\n    _do_configure_registries(registries, cascade)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4255, in _do_configure_registries\n    raise e\n", "sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 441, "function": "get_portfolio_summary"}}
{"timestamp": "2025-08-26T19:02:19.236261Z", "level": "ERROR", "trace_id": "4ef0eb8f-a75d-4602-ba1e-276885c3c891", "module": "app.api.ledger", "message": "Database error fetching transactions: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "exception": {"type": "InvalidRequestError", "message": "One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 264, in get_transactions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 203, in greenlet_spawn\n    result = context.switch(value)\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1633, in _execute_clauseelement\n    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(\n                                                ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 715, in _compile_w_cache\n    compiled_sql = self._compiler(\n                   ^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 323, in _compiler\n    return dialect.statement_compiler(dialect, self, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 1446, in __init__\n    Compiled.__init__(self, dialect, statement, **kwargs)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 886, in __init__\n    self.string = self.process(self.statement, **compile_kwargs)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 932, in process\n    return obj._compiler_dispatch(self, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\visitors.py\", line 138, in _compiler_dispatch\n    return meth(self, **kw)  # type: ignore  # noqa: E501\n           ^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 4781, in visit_select\n    compile_state = select_stmt._compile_state_factory(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\base.py\", line 701, in create_for_statement\n    return klass.create_for_statement(statement, compiler, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 447, in create_for_statement\n    return cls._create_orm_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 1175, in _create_orm_context\n    _QueryEntity.to_compile_state(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2628, in to_compile_state\n    _MapperEntity(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2708, in __init__\n    entity._post_inspect\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 1338, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n                                           ^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2724, in _post_inspect\n    self._check_configure()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2401, in _check_configure\n    _configure_registries({self.registry}, cascade=True)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4218, in _configure_registries\n    _do_configure_registries(registries, cascade)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4255, in _do_configure_registries\n    raise e\n", "sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 340, "function": "get_transactions"}}
{"timestamp": "2025-08-26T19:02:19.241932Z", "level": "ERROR", "trace_id": "4ef0eb8f-a75d-4602-ba1e-276885c3c891", "module": "app.api.ledger", "message": "Database error fetching positions: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "exception": {"type": "InvalidRequestError", "message": "One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 131, in get_positions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 203, in greenlet_spawn\n    result = context.switch(value)\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1633, in _execute_clauseelement\n    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(\n                                                ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 715, in _compile_w_cache\n    compiled_sql = self._compiler(\n                   ^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 323, in _compiler\n    return dialect.statement_compiler(dialect, self, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 1446, in __init__\n    Compiled.__init__(self, dialect, statement, **kwargs)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 886, in __init__\n    self.string = self.process(self.statement, **compile_kwargs)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 932, in process\n    return obj._compiler_dispatch(self, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\visitors.py\", line 138, in _compiler_dispatch\n    return meth(self, **kw)  # type: ignore  # noqa: E501\n           ^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 4781, in visit_select\n    compile_state = select_stmt._compile_state_factory(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\base.py\", line 701, in create_for_statement\n    return klass.create_for_statement(statement, compiler, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 447, in create_for_statement\n    return cls._create_orm_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 1175, in _create_orm_context\n    _QueryEntity.to_compile_state(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2628, in to_compile_state\n    _MapperEntity(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2708, in __init__\n    entity._post_inspect\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 1338, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n                                           ^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2724, in _post_inspect\n    self._check_configure()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2401, in _check_configure\n    _configure_registries({self.registry}, cascade=True)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4218, in _configure_registries\n    _do_configure_registries(registries, cascade)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4255, in _do_configure_registries\n    raise e\n", "sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 173, "function": "get_positions"}}
{"timestamp": "2025-08-26T19:02:19.248455Z", "level": "ERROR", "trace_id": "4ef0eb8f-a75d-4602-ba1e-276885c3c891", "module": "app.api.ledger", "message": "Database error calculating portfolio summary: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "exception": {"type": "InvalidRequestError", "message": "One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 410, in get_portfolio_summary\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 203, in greenlet_spawn\n    result = context.switch(value)\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1633, in _execute_clauseelement\n    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(\n                                                ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 715, in _compile_w_cache\n    compiled_sql = self._compiler(\n                   ^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 323, in _compiler\n    return dialect.statement_compiler(dialect, self, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 1446, in __init__\n    Compiled.__init__(self, dialect, statement, **kwargs)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 886, in __init__\n    self.string = self.process(self.statement, **compile_kwargs)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 932, in process\n    return obj._compiler_dispatch(self, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\visitors.py\", line 138, in _compiler_dispatch\n    return meth(self, **kw)  # type: ignore  # noqa: E501\n           ^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 4781, in visit_select\n    compile_state = select_stmt._compile_state_factory(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\base.py\", line 701, in create_for_statement\n    return klass.create_for_statement(statement, compiler, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 447, in create_for_statement\n    return cls._create_orm_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 1175, in _create_orm_context\n    _QueryEntity.to_compile_state(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2628, in to_compile_state\n    _MapperEntity(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2708, in __init__\n    entity._post_inspect\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 1338, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n                                           ^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2724, in _post_inspect\n    self._check_configure()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2401, in _check_configure\n    _configure_registries({self.registry}, cascade=True)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4218, in _configure_registries\n    _do_configure_registries(registries, cascade)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4255, in _do_configure_registries\n    raise e\n", "sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 441, "function": "get_portfolio_summary"}}
{"timestamp": "2025-08-26T19:02:49.392469Z", "level": "ERROR", "trace_id": "4ef0eb8f-a75d-4602-ba1e-276885c3c891", "module": "app.api.ledger", "message": "Database error fetching positions: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "exception": {"type": "InvalidRequestError", "message": "One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 131, in get_positions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 203, in greenlet_spawn\n    result = context.switch(value)\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1633, in _execute_clauseelement\n    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(\n                                                ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 715, in _compile_w_cache\n    compiled_sql = self._compiler(\n                   ^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 323, in _compiler\n    return dialect.statement_compiler(dialect, self, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 1446, in __init__\n    Compiled.__init__(self, dialect, statement, **kwargs)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 886, in __init__\n    self.string = self.process(self.statement, **compile_kwargs)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 932, in process\n    return obj._compiler_dispatch(self, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\visitors.py\", line 138, in _compiler_dispatch\n    return meth(self, **kw)  # type: ignore  # noqa: E501\n           ^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 4781, in visit_select\n    compile_state = select_stmt._compile_state_factory(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\base.py\", line 701, in create_for_statement\n    return klass.create_for_statement(statement, compiler, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 447, in create_for_statement\n    return cls._create_orm_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 1175, in _create_orm_context\n    _QueryEntity.to_compile_state(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2628, in to_compile_state\n    _MapperEntity(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2708, in __init__\n    entity._post_inspect\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 1338, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n                                           ^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2724, in _post_inspect\n    self._check_configure()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2401, in _check_configure\n    _configure_registries({self.registry}, cascade=True)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4218, in _configure_registries\n    _do_configure_registries(registries, cascade)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4255, in _do_configure_registries\n    raise e\n", "sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 173, "function": "get_positions"}}
{"timestamp": "2025-08-26T19:02:49.399504Z", "level": "ERROR", "trace_id": "4ef0eb8f-a75d-4602-ba1e-276885c3c891", "module": "app.api.ledger", "message": "Database error fetching transactions: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "exception": {"type": "InvalidRequestError", "message": "One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 264, in get_transactions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 203, in greenlet_spawn\n    result = context.switch(value)\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1633, in _execute_clauseelement\n    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(\n                                                ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 715, in _compile_w_cache\n    compiled_sql = self._compiler(\n                   ^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 323, in _compiler\n    return dialect.statement_compiler(dialect, self, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 1446, in __init__\n    Compiled.__init__(self, dialect, statement, **kwargs)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 886, in __init__\n    self.string = self.process(self.statement, **compile_kwargs)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 932, in process\n    return obj._compiler_dispatch(self, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\visitors.py\", line 138, in _compiler_dispatch\n    return meth(self, **kw)  # type: ignore  # noqa: E501\n           ^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 4781, in visit_select\n    compile_state = select_stmt._compile_state_factory(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\base.py\", line 701, in create_for_statement\n    return klass.create_for_statement(statement, compiler, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 447, in create_for_statement\n    return cls._create_orm_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 1175, in _create_orm_context\n    _QueryEntity.to_compile_state(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2628, in to_compile_state\n    _MapperEntity(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2708, in __init__\n    entity._post_inspect\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 1338, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n                                           ^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2724, in _post_inspect\n    self._check_configure()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2401, in _check_configure\n    _configure_registries({self.registry}, cascade=True)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4218, in _configure_registries\n    _do_configure_registries(registries, cascade)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4255, in _do_configure_registries\n    raise e\n", "sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 340, "function": "get_transactions"}}
{"timestamp": "2025-08-26T19:02:49.405339Z", "level": "ERROR", "trace_id": "4ef0eb8f-a75d-4602-ba1e-276885c3c891", "module": "app.api.ledger", "message": "Database error calculating portfolio summary: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "exception": {"type": "InvalidRequestError", "message": "One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 410, in get_portfolio_summary\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 203, in greenlet_spawn\n    result = context.switch(value)\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1633, in _execute_clauseelement\n    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(\n                                                ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 715, in _compile_w_cache\n    compiled_sql = self._compiler(\n                   ^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 323, in _compiler\n    return dialect.statement_compiler(dialect, self, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 1446, in __init__\n    Compiled.__init__(self, dialect, statement, **kwargs)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 886, in __init__\n    self.string = self.process(self.statement, **compile_kwargs)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 932, in process\n    return obj._compiler_dispatch(self, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\visitors.py\", line 138, in _compiler_dispatch\n    return meth(self, **kw)  # type: ignore  # noqa: E501\n           ^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\compiler.py\", line 4781, in visit_select\n    compile_state = select_stmt._compile_state_factory(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\base.py\", line 701, in create_for_statement\n    return klass.create_for_statement(statement, compiler, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 447, in create_for_statement\n    return cls._create_orm_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 1175, in _create_orm_context\n    _QueryEntity.to_compile_state(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2628, in to_compile_state\n    _MapperEntity(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 2708, in __init__\n    entity._post_inspect\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 1338, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n                                           ^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2724, in _post_inspect\n    self._check_configure()\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 2401, in _check_configure\n    _configure_registries({self.registry}, cascade=True)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4218, in _configure_registries\n    _do_configure_registries(registries, cascade)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py\", line 4255, in _do_configure_registries\n    raise e\n", "sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[LedgerEntry(ledger_entries)]'. Original exception was: Could not determine join condition between parent/child tables on relationship LedgerEntry.orders - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 441, "function": "get_portfolio_summary"}}
{"timestamp": "2025-08-26T19:03:15.465209Z", "level": "ERROR", "trace_id": "32c541cc-4be5-4229-bf3c-08f1b1fdfb97", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T19:03:15.465536Z", "level": "ERROR", "trace_id": "32c541cc-4be5-4229-bf3c-08f1b1fdfb97", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T19:03:22.472804Z", "level": "ERROR", "trace_id": "5c2fe6c0-6ca0-40bf-9c4a-53f6c7246dea", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T19:03:22.472804Z", "level": "ERROR", "trace_id": "5c2fe6c0-6ca0-40bf-9c4a-53f6c7246dea", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T19:03:22.956892Z", "level": "ERROR", "trace_id": "5c2fe6c0-6ca0-40bf-9c4a-53f6c7246dea", "module": "app.api.ledger", "message": "Database error fetching positions: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such column: ledger_entries.timestamp\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 131, in get_positions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 173, "function": "get_positions"}}
{"timestamp": "2025-08-26T19:03:22.967830Z", "level": "ERROR", "trace_id": "5c2fe6c0-6ca0-40bf-9c4a-53f6c7246dea", "module": "app.api.ledger", "message": "Database error fetching transactions: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such column: ledger_entries.timestamp\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 264, in get_transactions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 340, "function": "get_transactions"}}
{"timestamp": "2025-08-26T19:03:22.976936Z", "level": "ERROR", "trace_id": "5c2fe6c0-6ca0-40bf-9c4a-53f6c7246dea", "module": "app.api.ledger", "message": "Database error calculating portfolio summary: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such column: ledger_entries.timestamp\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 410, in get_portfolio_summary\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 441, "function": "get_portfolio_summary"}}
{"timestamp": "2025-08-26T19:03:50.845056Z", "level": "ERROR", "trace_id": "4fd03a37-44a5-4511-bd0b-74d3ae27c829", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T19:03:50.846332Z", "level": "ERROR", "trace_id": "4fd03a37-44a5-4511-bd0b-74d3ae27c829", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T19:03:51.469024Z", "level": "ERROR", "trace_id": "4fd03a37-44a5-4511-bd0b-74d3ae27c829", "module": "app.api.ledger", "message": "Database error calculating portfolio summary: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such column: ledger_entries.timestamp\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 410, in get_portfolio_summary\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 441, "function": "get_portfolio_summary"}}
{"timestamp": "2025-08-26T19:03:51.477466Z", "level": "ERROR", "trace_id": "4fd03a37-44a5-4511-bd0b-74d3ae27c829", "module": "app.api.ledger", "message": "Database error fetching transactions: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such column: ledger_entries.timestamp\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 264, in get_transactions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 340, "function": "get_transactions"}}
{"timestamp": "2025-08-26T19:03:51.486153Z", "level": "ERROR", "trace_id": "4fd03a37-44a5-4511-bd0b-74d3ae27c829", "module": "app.api.ledger", "message": "Database error fetching positions: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such column: ledger_entries.timestamp\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 131, in get_positions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 173, "function": "get_positions"}}
{"timestamp": "2025-08-26T19:04:19.416742Z", "level": "ERROR", "trace_id": "4fd03a37-44a5-4511-bd0b-74d3ae27c829", "module": "app.api.ledger", "message": "Database error fetching positions: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such column: ledger_entries.timestamp\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 131, in get_positions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 173, "function": "get_positions"}}
{"timestamp": "2025-08-26T19:04:19.425791Z", "level": "ERROR", "trace_id": "4fd03a37-44a5-4511-bd0b-74d3ae27c829", "module": "app.api.ledger", "message": "Database error fetching transactions: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such column: ledger_entries.timestamp\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 264, in get_transactions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 340, "function": "get_transactions"}}
{"timestamp": "2025-08-26T19:04:19.435240Z", "level": "ERROR", "trace_id": "4fd03a37-44a5-4511-bd0b-74d3ae27c829", "module": "app.api.ledger", "message": "Database error calculating portfolio summary: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such column: ledger_entries.timestamp\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 410, in get_portfolio_summary\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 441, "function": "get_portfolio_summary"}}
{"timestamp": "2025-08-26T19:04:49.420554Z", "level": "ERROR", "trace_id": "4fd03a37-44a5-4511-bd0b-74d3ae27c829", "module": "app.api.ledger", "message": "Database error fetching positions: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such column: ledger_entries.timestamp\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 131, in get_positions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 173, "function": "get_positions"}}
{"timestamp": "2025-08-26T19:04:49.429745Z", "level": "ERROR", "trace_id": "4fd03a37-44a5-4511-bd0b-74d3ae27c829", "module": "app.api.ledger", "message": "Database error fetching transactions: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such column: ledger_entries.timestamp\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 264, in get_transactions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 340, "function": "get_transactions"}}
{"timestamp": "2025-08-26T19:04:49.439796Z", "level": "ERROR", "trace_id": "4fd03a37-44a5-4511-bd0b-74d3ae27c829", "module": "app.api.ledger", "message": "Database error calculating portfolio summary: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such column: ledger_entries.timestamp\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 410, in get_portfolio_summary\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 441, "function": "get_portfolio_summary"}}
{"timestamp": "2025-08-26T19:05:19.847217Z", "level": "ERROR", "trace_id": "4fd03a37-44a5-4511-bd0b-74d3ae27c829", "module": "app.api.ledger", "message": "Database error fetching positions: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such column: ledger_entries.timestamp\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 131, in get_positions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 173, "function": "get_positions"}}
{"timestamp": "2025-08-26T19:05:19.858699Z", "level": "ERROR", "trace_id": "4fd03a37-44a5-4511-bd0b-74d3ae27c829", "module": "app.api.ledger", "message": "Database error fetching transactions: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such column: ledger_entries.timestamp\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 264, in get_transactions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 340, "function": "get_transactions"}}
{"timestamp": "2025-08-26T19:05:19.868459Z", "level": "ERROR", "trace_id": "4fd03a37-44a5-4511-bd0b-74d3ae27c829", "module": "app.api.ledger", "message": "Database error calculating portfolio summary: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such column: ledger_entries.timestamp\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 410, in get_portfolio_summary\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 441, "function": "get_portfolio_summary"}}
{"timestamp": "2025-08-26T19:05:38.831591Z", "level": "ERROR", "trace_id": "71008baa-1fd9-4935-894e-01edb3844f6e", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T19:05:38.832728Z", "level": "ERROR", "trace_id": "71008baa-1fd9-4935-894e-01edb3844f6e", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T19:05:45.845015Z", "level": "ERROR", "trace_id": "95d1cbc6-70f7-4a9d-a3a6-221959f98f40", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T19:05:45.845015Z", "level": "ERROR", "trace_id": "95d1cbc6-70f7-4a9d-a3a6-221959f98f40", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T19:05:49.880517Z", "level": "ERROR", "trace_id": "95d1cbc6-70f7-4a9d-a3a6-221959f98f40", "module": "app.api.ledger", "message": "Database error fetching positions: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such column: ledger_entries.timestamp\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 131, in get_positions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 173, "function": "get_positions"}}
{"timestamp": "2025-08-26T19:05:49.890976Z", "level": "ERROR", "trace_id": "95d1cbc6-70f7-4a9d-a3a6-221959f98f40", "module": "app.api.ledger", "message": "Database error fetching transactions: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such column: ledger_entries.timestamp\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 264, in get_transactions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 340, "function": "get_transactions"}}
{"timestamp": "2025-08-26T19:05:49.899216Z", "level": "ERROR", "trace_id": "95d1cbc6-70f7-4a9d-a3a6-221959f98f40", "module": "app.api.ledger", "message": "Database error calculating portfolio summary: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such column: ledger_entries.timestamp\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 410, in get_portfolio_summary\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 441, "function": "get_portfolio_summary"}}
{"timestamp": "2025-08-26T19:06:00.991608Z", "level": "ERROR", "trace_id": "28bae34a-d167-46ee-91ea-65766cf69ee7", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T19:06:00.992870Z", "level": "ERROR", "trace_id": "28bae34a-d167-46ee-91ea-65766cf69ee7", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T19:06:19.885282Z", "level": "ERROR", "trace_id": "28bae34a-d167-46ee-91ea-65766cf69ee7", "module": "app.api.ledger", "message": "Database error calculating portfolio summary: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such column: ledger_entries.timestamp\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 410, in get_portfolio_summary\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 441, "function": "get_portfolio_summary"}}
{"timestamp": "2025-08-26T19:06:19.894668Z", "level": "ERROR", "trace_id": "28bae34a-d167-46ee-91ea-65766cf69ee7", "module": "app.api.ledger", "message": "Database error fetching transactions: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such column: ledger_entries.timestamp\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 264, in get_transactions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 340, "function": "get_transactions"}}
{"timestamp": "2025-08-26T19:06:19.902445Z", "level": "ERROR", "trace_id": "28bae34a-d167-46ee-91ea-65766cf69ee7", "module": "app.api.ledger", "message": "Database error fetching positions: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such column: ledger_entries.timestamp\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 131, in get_positions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 173, "function": "get_positions"}}
{"timestamp": "2025-08-26T19:06:49.951026Z", "level": "ERROR", "trace_id": "28bae34a-d167-46ee-91ea-65766cf69ee7", "module": "app.api.ledger", "message": "Database error fetching positions: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such column: ledger_entries.timestamp\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 131, in get_positions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 173, "function": "get_positions"}}
{"timestamp": "2025-08-26T19:06:49.960385Z", "level": "ERROR", "trace_id": "28bae34a-d167-46ee-91ea-65766cf69ee7", "module": "app.api.ledger", "message": "Database error calculating portfolio summary: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such column: ledger_entries.timestamp\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 410, in get_portfolio_summary\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 441, "function": "get_portfolio_summary"}}
{"timestamp": "2025-08-26T19:06:49.968388Z", "level": "ERROR", "trace_id": "28bae34a-d167-46ee-91ea-65766cf69ee7", "module": "app.api.ledger", "message": "Database error fetching transactions: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such column: ledger_entries.timestamp\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 264, in get_transactions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 340, "function": "get_transactions"}}
{"timestamp": "2025-08-26T19:07:20.124433Z", "level": "ERROR", "trace_id": "28bae34a-d167-46ee-91ea-65766cf69ee7", "module": "app.api.ledger", "message": "Database error fetching positions: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such column: ledger_entries.timestamp\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 131, in get_positions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 173, "function": "get_positions"}}
{"timestamp": "2025-08-26T19:07:20.134417Z", "level": "ERROR", "trace_id": "28bae34a-d167-46ee-91ea-65766cf69ee7", "module": "app.api.ledger", "message": "Database error fetching transactions: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such column: ledger_entries.timestamp\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 264, in get_transactions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 340, "function": "get_transactions"}}
{"timestamp": "2025-08-26T19:07:20.143565Z", "level": "ERROR", "trace_id": "28bae34a-d167-46ee-91ea-65766cf69ee7", "module": "app.api.ledger", "message": "Database error calculating portfolio summary: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such column: ledger_entries.timestamp\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 410, in get_portfolio_summary\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 441, "function": "get_portfolio_summary"}}
{"timestamp": "2025-08-26T19:07:46.938214Z", "level": "ERROR", "trace_id": "a1398b3b-b70b-4f4c-b949-7b3efb69cf5e", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T19:07:46.938214Z", "level": "ERROR", "trace_id": "a1398b3b-b70b-4f4c-b949-7b3efb69cf5e", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T19:07:50.154964Z", "level": "ERROR", "trace_id": "a1398b3b-b70b-4f4c-b949-7b3efb69cf5e", "module": "app.api.ledger", "message": "Database error fetching transactions: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such column: ledger_entries.timestamp\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 264, in get_transactions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 340, "function": "get_transactions"}}
{"timestamp": "2025-08-26T19:07:50.164231Z", "level": "ERROR", "trace_id": "a1398b3b-b70b-4f4c-b949-7b3efb69cf5e", "module": "app.api.ledger", "message": "Database error calculating portfolio summary: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such column: ledger_entries.timestamp\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 410, in get_portfolio_summary\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 441, "function": "get_portfolio_summary"}}
{"timestamp": "2025-08-26T19:07:50.171779Z", "level": "ERROR", "trace_id": "a1398b3b-b70b-4f4c-b949-7b3efb69cf5e", "module": "app.api.ledger", "message": "Database error fetching positions: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such column: ledger_entries.timestamp\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 131, in get_positions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 173, "function": "get_positions"}}
{"timestamp": "2025-08-26T19:08:06.236883Z", "level": "ERROR", "trace_id": "1ea6c0ee-38ca-4056-9945-211fb5c74889", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T19:08:06.237428Z", "level": "ERROR", "trace_id": "1ea6c0ee-38ca-4056-9945-211fb5c74889", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T19:08:16.307384Z", "level": "ERROR", "trace_id": "bf191a2c-df07-48b5-88cd-92a214210371", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T19:08:16.307384Z", "level": "ERROR", "trace_id": "bf191a2c-df07-48b5-88cd-92a214210371", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T19:08:23.305920Z", "level": "ERROR", "trace_id": "290ff426-1e05-401e-83f0-e41adefdef17", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T19:08:23.305920Z", "level": "ERROR", "trace_id": "290ff426-1e05-401e-83f0-e41adefdef17", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T19:08:23.800899Z", "level": "ERROR", "trace_id": "290ff426-1e05-401e-83f0-e41adefdef17", "module": "app.api.ledger", "message": "Database error fetching positions: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such column: ledger_entries.timestamp\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 131, in get_positions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 173, "function": "get_positions"}}
{"timestamp": "2025-08-26T19:08:23.811734Z", "level": "ERROR", "trace_id": "290ff426-1e05-401e-83f0-e41adefdef17", "module": "app.api.ledger", "message": "Database error fetching transactions: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such column: ledger_entries.timestamp\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 264, in get_transactions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 340, "function": "get_transactions"}}
{"timestamp": "2025-08-26T19:08:23.821915Z", "level": "ERROR", "trace_id": "290ff426-1e05-401e-83f0-e41adefdef17", "module": "app.api.ledger", "message": "Database error calculating portfolio summary: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such column: ledger_entries.timestamp\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 410, in get_portfolio_summary\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: ledger_entries.timestamp\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.timestamp, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 441, "function": "get_portfolio_summary"}}
{"timestamp": "2025-08-26T19:08:26.762744Z", "level": "ERROR", "trace_id": "7fd1d0f5-3d8c-47af-8dc6-1e90353b04c9", "module": "app.api", "message": "\u274c Database Operations API missing router attribute: type object 'LedgerEntry' has no attribute 'timestamp'", "location": {"file": "D:\\dex\\backend\\app\\api\\__init__.py", "line": 48, "function": "_register_router"}}
{"timestamp": "2025-08-26T19:08:27.074249Z", "level": "ERROR", "trace_id": "7fd1d0f5-3d8c-47af-8dc6-1e90353b04c9", "module": "app.api", "message": "\u274c Ledger & Portfolio Tracking API missing router attribute: type object 'LedgerEntry' has no attribute 'timestamp'", "location": {"file": "D:\\dex\\backend\\app\\api\\__init__.py", "line": 48, "function": "_register_router"}}
{"timestamp": "2025-08-26T19:08:27.101799Z", "level": "ERROR", "trace_id": "7fd1d0f5-3d8c-47af-8dc6-1e90353b04c9", "module": "app.api", "message": "\ud83d\udea8 PORTFOLIO LIMITED: Ledger router failed - portfolio will use demo data", "location": {"file": "D:\\dex\\backend\\app\\api\\__init__.py", "line": 148, "function": "<module>"}}
{"timestamp": "2025-08-26T19:08:31.216601Z", "level": "ERROR", "trace_id": "7fd1d0f5-3d8c-47af-8dc6-1e90353b04c9", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T19:08:31.216601Z", "level": "ERROR", "trace_id": "7fd1d0f5-3d8c-47af-8dc6-1e90353b04c9", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T19:08:31.289774Z", "level": "ERROR", "trace_id": "7fd1d0f5-3d8c-47af-8dc6-1e90353b04c9", "module": "main", "message": "Wallet registry initialization failed: type object 'LedgerEntry' has no attribute 'timestamp'", "location": {"file": "D:\\dex\\backend\\main.py", "line": 528, "function": "lifespan"}}
{"timestamp": "2025-08-26T19:09:26.297375Z", "level": "ERROR", "trace_id": "102fcab2-7491-4c76-b422-02c92291a488", "module": "app.api", "message": "\u274c Database Operations API missing router attribute: type object 'LedgerEntry' has no attribute 'timestamp'", "location": {"file": "D:\\dex\\backend\\app\\api\\__init__.py", "line": 48, "function": "_register_router"}}
{"timestamp": "2025-08-26T19:09:26.598776Z", "level": "ERROR", "trace_id": "102fcab2-7491-4c76-b422-02c92291a488", "module": "app.api", "message": "\u274c Ledger & Portfolio Tracking API missing router attribute: type object 'LedgerEntry' has no attribute 'timestamp'", "location": {"file": "D:\\dex\\backend\\app\\api\\__init__.py", "line": 48, "function": "_register_router"}}
{"timestamp": "2025-08-26T19:09:26.624504Z", "level": "ERROR", "trace_id": "102fcab2-7491-4c76-b422-02c92291a488", "module": "app.api", "message": "\ud83d\udea8 PORTFOLIO LIMITED: Ledger router failed - portfolio will use demo data", "location": {"file": "D:\\dex\\backend\\app\\api\\__init__.py", "line": 148, "function": "<module>"}}
{"timestamp": "2025-08-26T19:09:30.731174Z", "level": "ERROR", "trace_id": "102fcab2-7491-4c76-b422-02c92291a488", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T19:09:30.731174Z", "level": "ERROR", "trace_id": "102fcab2-7491-4c76-b422-02c92291a488", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T19:09:30.807095Z", "level": "ERROR", "trace_id": "102fcab2-7491-4c76-b422-02c92291a488", "module": "main", "message": "Wallet registry initialization failed: type object 'LedgerEntry' has no attribute 'timestamp'", "location": {"file": "D:\\dex\\backend\\main.py", "line": 528, "function": "lifespan"}}
{"timestamp": "2025-08-26T19:10:37.050091Z", "level": "ERROR", "trace_id": "3e1699cf-c474-4837-8657-85bef8bdca22", "module": "app.api", "message": "\u274c Database Operations API missing router attribute: type object 'LedgerEntry' has no attribute 'timestamp'", "location": {"file": "D:\\dex\\backend\\app\\api\\__init__.py", "line": 48, "function": "_register_router"}}
{"timestamp": "2025-08-26T19:10:37.358497Z", "level": "ERROR", "trace_id": "3e1699cf-c474-4837-8657-85bef8bdca22", "module": "app.api", "message": "\u274c Ledger & Portfolio Tracking API missing router attribute: type object 'LedgerEntry' has no attribute 'timestamp'", "location": {"file": "D:\\dex\\backend\\app\\api\\__init__.py", "line": 48, "function": "_register_router"}}
{"timestamp": "2025-08-26T19:10:37.383807Z", "level": "ERROR", "trace_id": "3e1699cf-c474-4837-8657-85bef8bdca22", "module": "app.api", "message": "\ud83d\udea8 PORTFOLIO LIMITED: Ledger router failed - portfolio will use demo data", "location": {"file": "D:\\dex\\backend\\app\\api\\__init__.py", "line": 148, "function": "<module>"}}
{"timestamp": "2025-08-26T19:10:41.532681Z", "level": "ERROR", "trace_id": "3e1699cf-c474-4837-8657-85bef8bdca22", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T19:10:41.532681Z", "level": "ERROR", "trace_id": "3e1699cf-c474-4837-8657-85bef8bdca22", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T19:10:41.610405Z", "level": "ERROR", "trace_id": "3e1699cf-c474-4837-8657-85bef8bdca22", "module": "main", "message": "Wallet registry initialization failed: type object 'LedgerEntry' has no attribute 'timestamp'", "location": {"file": "D:\\dex\\backend\\main.py", "line": 528, "function": "lifespan"}}
{"timestamp": "2025-08-26T19:10:44.914553Z", "level": "ERROR", "trace_id": "0bab87e9-737b-408c-a466-788f6fdc1e92", "module": "app.api", "message": "\u274c Database Operations API missing router attribute: type object 'LedgerEntry' has no attribute 'timestamp'", "location": {"file": "D:\\dex\\backend\\app\\api\\__init__.py", "line": 48, "function": "_register_router"}}
{"timestamp": "2025-08-26T19:10:45.220094Z", "level": "ERROR", "trace_id": "0bab87e9-737b-408c-a466-788f6fdc1e92", "module": "app.api", "message": "\u274c Ledger & Portfolio Tracking API missing router attribute: type object 'LedgerEntry' has no attribute 'timestamp'", "location": {"file": "D:\\dex\\backend\\app\\api\\__init__.py", "line": 48, "function": "_register_router"}}
{"timestamp": "2025-08-26T19:10:45.246319Z", "level": "ERROR", "trace_id": "0bab87e9-737b-408c-a466-788f6fdc1e92", "module": "app.api", "message": "\ud83d\udea8 PORTFOLIO LIMITED: Ledger router failed - portfolio will use demo data", "location": {"file": "D:\\dex\\backend\\app\\api\\__init__.py", "line": 148, "function": "<module>"}}
{"timestamp": "2025-08-26T19:10:49.360249Z", "level": "ERROR", "trace_id": "0bab87e9-737b-408c-a466-788f6fdc1e92", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T19:10:49.360249Z", "level": "ERROR", "trace_id": "0bab87e9-737b-408c-a466-788f6fdc1e92", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T19:10:49.434634Z", "level": "ERROR", "trace_id": "0bab87e9-737b-408c-a466-788f6fdc1e92", "module": "main", "message": "Wallet registry initialization failed: type object 'LedgerEntry' has no attribute 'timestamp'", "location": {"file": "D:\\dex\\backend\\main.py", "line": 528, "function": "lifespan"}}
{"timestamp": "2025-08-26T19:10:51.969612Z", "level": "ERROR", "trace_id": "8e6466b3-85c8-49fd-8e6d-14ca85efa245", "module": "app.api", "message": "\u274c Database Operations API missing router attribute: type object 'LedgerEntry' has no attribute 'timestamp'", "location": {"file": "D:\\dex\\backend\\app\\api\\__init__.py", "line": 48, "function": "_register_router"}}
{"timestamp": "2025-08-26T19:10:52.289898Z", "level": "ERROR", "trace_id": "8e6466b3-85c8-49fd-8e6d-14ca85efa245", "module": "app.api", "message": "\u274c Ledger & Portfolio Tracking API missing router attribute: type object 'LedgerEntry' has no attribute 'timestamp'", "location": {"file": "D:\\dex\\backend\\app\\api\\__init__.py", "line": 48, "function": "_register_router"}}
{"timestamp": "2025-08-26T19:10:52.315583Z", "level": "ERROR", "trace_id": "8e6466b3-85c8-49fd-8e6d-14ca85efa245", "module": "app.api", "message": "\ud83d\udea8 PORTFOLIO LIMITED: Ledger router failed - portfolio will use demo data", "location": {"file": "D:\\dex\\backend\\app\\api\\__init__.py", "line": 148, "function": "<module>"}}
{"timestamp": "2025-08-26T19:10:56.446879Z", "level": "ERROR", "trace_id": "8e6466b3-85c8-49fd-8e6d-14ca85efa245", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T19:10:56.446879Z", "level": "ERROR", "trace_id": "8e6466b3-85c8-49fd-8e6d-14ca85efa245", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T19:10:56.532779Z", "level": "ERROR", "trace_id": "8e6466b3-85c8-49fd-8e6d-14ca85efa245", "module": "main", "message": "Wallet registry initialization failed: type object 'LedgerEntry' has no attribute 'timestamp'", "location": {"file": "D:\\dex\\backend\\main.py", "line": 528, "function": "lifespan"}}
{"timestamp": "2025-08-26T19:10:59.020024Z", "level": "ERROR", "trace_id": "2b4c91dc-c5e1-49b3-98e1-f05524f43bce", "module": "app.api", "message": "\u274c Database Operations API registration failed: invalid syntax (models.py, line 466)", "location": {"file": "D:\\dex\\backend\\app\\api\\__init__.py", "line": 51, "function": "_register_router"}}
{"timestamp": "2025-08-26T19:10:59.280085Z", "level": "ERROR", "trace_id": "2b4c91dc-c5e1-49b3-98e1-f05524f43bce", "module": "app.api", "message": "\u274c Ledger & Portfolio Tracking API registration failed: invalid syntax (models.py, line 466)", "location": {"file": "D:\\dex\\backend\\app\\api\\__init__.py", "line": 51, "function": "_register_router"}}
{"timestamp": "2025-08-26T19:10:59.304266Z", "level": "ERROR", "trace_id": "2b4c91dc-c5e1-49b3-98e1-f05524f43bce", "module": "app.api", "message": "\ud83d\udea8 PORTFOLIO LIMITED: Ledger router failed - portfolio will use demo data", "location": {"file": "D:\\dex\\backend\\app\\api\\__init__.py", "line": 148, "function": "<module>"}}
{"timestamp": "2025-08-26T19:11:03.436798Z", "level": "ERROR", "trace_id": "2b4c91dc-c5e1-49b3-98e1-f05524f43bce", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T19:11:03.436798Z", "level": "ERROR", "trace_id": "2b4c91dc-c5e1-49b3-98e1-f05524f43bce", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T19:11:03.518579Z", "level": "ERROR", "trace_id": "2b4c91dc-c5e1-49b3-98e1-f05524f43bce", "module": "main", "message": "Wallet registry initialization failed: type object 'LedgerEntry' has no attribute 'timestamp'", "location": {"file": "D:\\dex\\backend\\main.py", "line": 528, "function": "lifespan"}}
{"timestamp": "2025-08-26T19:11:05.914848Z", "level": "ERROR", "trace_id": "6b3fad86-9ef6-4372-b4b6-ed5cf36243ec", "module": "app.api", "message": "\u274c Database Operations API missing router attribute: type object 'LedgerEntry' has no attribute 'timestamp'", "location": {"file": "D:\\dex\\backend\\app\\api\\__init__.py", "line": 48, "function": "_register_router"}}
{"timestamp": "2025-08-26T19:11:06.214141Z", "level": "ERROR", "trace_id": "6b3fad86-9ef6-4372-b4b6-ed5cf36243ec", "module": "app.api", "message": "\u274c Ledger & Portfolio Tracking API missing router attribute: type object 'LedgerEntry' has no attribute 'timestamp'", "location": {"file": "D:\\dex\\backend\\app\\api\\__init__.py", "line": 48, "function": "_register_router"}}
{"timestamp": "2025-08-26T19:11:06.240012Z", "level": "ERROR", "trace_id": "6b3fad86-9ef6-4372-b4b6-ed5cf36243ec", "module": "app.api", "message": "\ud83d\udea8 PORTFOLIO LIMITED: Ledger router failed - portfolio will use demo data", "location": {"file": "D:\\dex\\backend\\app\\api\\__init__.py", "line": 148, "function": "<module>"}}
{"timestamp": "2025-08-26T19:11:10.352124Z", "level": "ERROR", "trace_id": "6b3fad86-9ef6-4372-b4b6-ed5cf36243ec", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T19:11:10.352124Z", "level": "ERROR", "trace_id": "6b3fad86-9ef6-4372-b4b6-ed5cf36243ec", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T19:11:10.422344Z", "level": "ERROR", "trace_id": "6b3fad86-9ef6-4372-b4b6-ed5cf36243ec", "module": "main", "message": "Wallet registry initialization failed: type object 'LedgerEntry' has no attribute 'timestamp'", "location": {"file": "D:\\dex\\backend\\main.py", "line": 528, "function": "lifespan"}}
{"timestamp": "2025-08-26T19:11:12.883039Z", "level": "ERROR", "trace_id": "98b4fd11-1c7c-41e5-8628-5e962998ee99", "module": "app.api", "message": "\u274c Database Operations API missing router attribute: type object 'LedgerEntry' has no attribute 'timestamp'", "location": {"file": "D:\\dex\\backend\\app\\api\\__init__.py", "line": 48, "function": "_register_router"}}
{"timestamp": "2025-08-26T19:11:13.187239Z", "level": "ERROR", "trace_id": "98b4fd11-1c7c-41e5-8628-5e962998ee99", "module": "app.api", "message": "\u274c Ledger & Portfolio Tracking API missing router attribute: type object 'LedgerEntry' has no attribute 'timestamp'", "location": {"file": "D:\\dex\\backend\\app\\api\\__init__.py", "line": 48, "function": "_register_router"}}
{"timestamp": "2025-08-26T19:11:13.212439Z", "level": "ERROR", "trace_id": "98b4fd11-1c7c-41e5-8628-5e962998ee99", "module": "app.api", "message": "\ud83d\udea8 PORTFOLIO LIMITED: Ledger router failed - portfolio will use demo data", "location": {"file": "D:\\dex\\backend\\app\\api\\__init__.py", "line": 148, "function": "<module>"}}
{"timestamp": "2025-08-26T19:11:17.344372Z", "level": "ERROR", "trace_id": "98b4fd11-1c7c-41e5-8628-5e962998ee99", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T19:11:17.344372Z", "level": "ERROR", "trace_id": "98b4fd11-1c7c-41e5-8628-5e962998ee99", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T19:11:17.417150Z", "level": "ERROR", "trace_id": "98b4fd11-1c7c-41e5-8628-5e962998ee99", "module": "main", "message": "Wallet registry initialization failed: type object 'LedgerEntry' has no attribute 'timestamp'", "location": {"file": "D:\\dex\\backend\\main.py", "line": 528, "function": "lifespan"}}
{"timestamp": "2025-08-26T19:14:16.288501Z", "level": "ERROR", "trace_id": "771cc835-0234-4050-aa00-32eaa2b16a80", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T19:14:16.288501Z", "level": "ERROR", "trace_id": "771cc835-0234-4050-aa00-32eaa2b16a80", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T19:14:23.627548Z", "level": "ERROR", "trace_id": "771cc835-0234-4050-aa00-32eaa2b16a80", "module": "app.api.ledger", "message": "Database error calculating portfolio summary: (sqlite3.OperationalError) no such column: ledger_entries.dex\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such column: ledger_entries.dex\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such column: ledger_entries.dex\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 410, in get_portfolio_summary\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: ledger_entries.dex\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 441, "function": "get_portfolio_summary"}}
{"timestamp": "2025-08-26T19:14:23.635059Z", "level": "ERROR", "trace_id": "771cc835-0234-4050-aa00-32eaa2b16a80", "module": "app.api.ledger", "message": "Database error fetching positions: (sqlite3.OperationalError) no such column: ledger_entries.dex\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such column: ledger_entries.dex\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such column: ledger_entries.dex\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 131, in get_positions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: ledger_entries.dex\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 173, "function": "get_positions"}}
{"timestamp": "2025-08-26T19:14:23.643292Z", "level": "ERROR", "trace_id": "771cc835-0234-4050-aa00-32eaa2b16a80", "module": "app.api.ledger", "message": "Database error fetching transactions: (sqlite3.OperationalError) no such column: ledger_entries.dex\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such column: ledger_entries.dex\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such column: ledger_entries.dex\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 264, in get_transactions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: ledger_entries.dex\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 340, "function": "get_transactions"}}
{"timestamp": "2025-08-26T19:14:53.591582Z", "level": "ERROR", "trace_id": "771cc835-0234-4050-aa00-32eaa2b16a80", "module": "app.api.ledger", "message": "Database error calculating portfolio summary: (sqlite3.OperationalError) no such column: ledger_entries.dex\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such column: ledger_entries.dex\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such column: ledger_entries.dex\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 410, in get_portfolio_summary\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: ledger_entries.dex\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 441, "function": "get_portfolio_summary"}}
{"timestamp": "2025-08-26T19:14:53.600799Z", "level": "ERROR", "trace_id": "771cc835-0234-4050-aa00-32eaa2b16a80", "module": "app.api.ledger", "message": "Database error fetching positions: (sqlite3.OperationalError) no such column: ledger_entries.dex\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such column: ledger_entries.dex\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such column: ledger_entries.dex\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 131, in get_positions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: ledger_entries.dex\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 173, "function": "get_positions"}}
{"timestamp": "2025-08-26T19:14:53.610604Z", "level": "ERROR", "trace_id": "771cc835-0234-4050-aa00-32eaa2b16a80", "module": "app.api.ledger", "message": "Database error fetching transactions: (sqlite3.OperationalError) no such column: ledger_entries.dex\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such column: ledger_entries.dex\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such column: ledger_entries.dex\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 264, in get_transactions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: ledger_entries.dex\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 340, "function": "get_transactions"}}
{"timestamp": "2025-08-26T19:16:26.544350Z", "level": "ERROR", "trace_id": "36284bd6-a80f-4e65-a786-ba06b9b5a59e", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T19:16:26.544350Z", "level": "ERROR", "trace_id": "36284bd6-a80f-4e65-a786-ba06b9b5a59e", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T19:16:27.192264Z", "level": "ERROR", "trace_id": "36284bd6-a80f-4e65-a786-ba06b9b5a59e", "module": "app.api.ledger", "message": "Database error calculating portfolio summary: (sqlite3.OperationalError) no such table: ledger_entries\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such table: ledger_entries\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such table: ledger_entries\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 410, in get_portfolio_summary\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: ledger_entries\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 441, "function": "get_portfolio_summary"}}
{"timestamp": "2025-08-26T19:16:27.200357Z", "level": "ERROR", "trace_id": "36284bd6-a80f-4e65-a786-ba06b9b5a59e", "module": "app.api.ledger", "message": "Database error fetching positions: (sqlite3.OperationalError) no such table: ledger_entries\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such table: ledger_entries\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such table: ledger_entries\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 131, in get_positions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: ledger_entries\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 173, "function": "get_positions"}}
{"timestamp": "2025-08-26T19:16:27.210184Z", "level": "ERROR", "trace_id": "36284bd6-a80f-4e65-a786-ba06b9b5a59e", "module": "app.api.ledger", "message": "Database error fetching transactions: (sqlite3.OperationalError) no such table: ledger_entries\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such table: ledger_entries\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such table: ledger_entries\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 264, in get_transactions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: ledger_entries\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 340, "function": "get_transactions"}}
{"timestamp": "2025-08-26T19:16:53.630367Z", "level": "ERROR", "trace_id": "36284bd6-a80f-4e65-a786-ba06b9b5a59e", "module": "app.api.ledger", "message": "Database error fetching positions: (sqlite3.OperationalError) no such table: ledger_entries\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such table: ledger_entries\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such table: ledger_entries\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 131, in get_positions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: ledger_entries\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 173, "function": "get_positions"}}
{"timestamp": "2025-08-26T19:16:53.639236Z", "level": "ERROR", "trace_id": "36284bd6-a80f-4e65-a786-ba06b9b5a59e", "module": "app.api.ledger", "message": "Database error fetching transactions: (sqlite3.OperationalError) no such table: ledger_entries\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such table: ledger_entries\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such table: ledger_entries\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 264, in get_transactions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: ledger_entries\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 340, "function": "get_transactions"}}
{"timestamp": "2025-08-26T19:16:53.649579Z", "level": "ERROR", "trace_id": "36284bd6-a80f-4e65-a786-ba06b9b5a59e", "module": "app.api.ledger", "message": "Database error calculating portfolio summary: (sqlite3.OperationalError) no such table: ledger_entries\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such table: ledger_entries\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such table: ledger_entries\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 410, in get_portfolio_summary\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: ledger_entries\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 441, "function": "get_portfolio_summary"}}
{"timestamp": "2025-08-26T19:17:23.629307Z", "level": "ERROR", "trace_id": "36284bd6-a80f-4e65-a786-ba06b9b5a59e", "module": "app.api.ledger", "message": "Database error fetching transactions: (sqlite3.OperationalError) no such table: ledger_entries\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such table: ledger_entries\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such table: ledger_entries\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 264, in get_transactions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: ledger_entries\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 340, "function": "get_transactions"}}
{"timestamp": "2025-08-26T19:17:23.638011Z", "level": "ERROR", "trace_id": "36284bd6-a80f-4e65-a786-ba06b9b5a59e", "module": "app.api.ledger", "message": "Database error calculating portfolio summary: (sqlite3.OperationalError) no such table: ledger_entries\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such table: ledger_entries\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such table: ledger_entries\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 410, in get_portfolio_summary\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: ledger_entries\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 441, "function": "get_portfolio_summary"}}
{"timestamp": "2025-08-26T19:17:23.645697Z", "level": "ERROR", "trace_id": "36284bd6-a80f-4e65-a786-ba06b9b5a59e", "module": "app.api.ledger", "message": "Database error fetching positions: (sqlite3.OperationalError) no such table: ledger_entries\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such table: ledger_entries\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such table: ledger_entries\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 131, in get_positions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: ledger_entries\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 173, "function": "get_positions"}}
{"timestamp": "2025-08-26T19:17:36.295126Z", "level": "ERROR", "trace_id": "9ef3ecca-6032-448d-abf8-ac979eef2149", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T19:17:36.295126Z", "level": "ERROR", "trace_id": "9ef3ecca-6032-448d-abf8-ac979eef2149", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T19:17:36.320846Z", "level": "ERROR", "trace_id": "9ef3ecca-6032-448d-abf8-ac979eef2149", "module": "app.storage.database", "message": "Failed to create tables: 'DatabaseManager' object has no attribute 'create_tables'", "location": {"file": "D:\\dex\\backend\\app\\storage\\database.py", "line": 439, "function": "create_tables"}}
{"timestamp": "2025-08-26T19:17:36.320846Z", "level": "ERROR", "trace_id": "9ef3ecca-6032-448d-abf8-ac979eef2149", "module": "app.storage.database", "message": "Database initialization failed: 'DatabaseManager' object has no attribute 'create_tables'", "location": {"file": "D:\\dex\\backend\\app\\storage\\database.py", "line": 461, "function": "init_database"}}
{"timestamp": "2025-08-26T19:17:36.321635Z", "level": "ERROR", "trace_id": "9ef3ecca-6032-448d-abf8-ac979eef2149", "module": "main", "message": "Database initialization failed: 'DatabaseManager' object has no attribute 'create_tables'", "location": {"file": "D:\\dex\\backend\\main.py", "line": 511, "function": "lifespan"}}
{"timestamp": "2025-08-26T19:17:36.718530Z", "level": "ERROR", "trace_id": "9ef3ecca-6032-448d-abf8-ac979eef2149", "module": "main", "message": "Startup completed with 1 errors:", "location": {"file": "D:\\dex\\backend\\main.py", "line": 734, "function": "lifespan"}}
{"timestamp": "2025-08-26T19:17:36.718530Z", "level": "ERROR", "trace_id": "9ef3ecca-6032-448d-abf8-ac979eef2149", "module": "main", "message": "  - Database initialization failed: 'DatabaseManager' object has no attribute 'create_tables'", "location": {"file": "D:\\dex\\backend\\main.py", "line": 736, "function": "lifespan"}}
{"timestamp": "2025-08-26T19:17:43.188034Z", "level": "ERROR", "trace_id": "3a5559e9-3439-459f-8b45-2742bff7c5fe", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T19:17:43.188034Z", "level": "ERROR", "trace_id": "3a5559e9-3439-459f-8b45-2742bff7c5fe", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T19:17:53.666375Z", "level": "ERROR", "trace_id": "3a5559e9-3439-459f-8b45-2742bff7c5fe", "module": "app.api.ledger", "message": "Database error fetching positions: (sqlite3.OperationalError) no such table: ledger_entries\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such table: ledger_entries\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such table: ledger_entries\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 131, in get_positions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: ledger_entries\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 173, "function": "get_positions"}}
{"timestamp": "2025-08-26T19:17:53.675471Z", "level": "ERROR", "trace_id": "3a5559e9-3439-459f-8b45-2742bff7c5fe", "module": "app.api.ledger", "message": "Database error calculating portfolio summary: (sqlite3.OperationalError) no such table: ledger_entries\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such table: ledger_entries\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such table: ledger_entries\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 410, in get_portfolio_summary\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: ledger_entries\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 441, "function": "get_portfolio_summary"}}
{"timestamp": "2025-08-26T19:17:53.684150Z", "level": "ERROR", "trace_id": "3a5559e9-3439-459f-8b45-2742bff7c5fe", "module": "app.api.ledger", "message": "Database error fetching transactions: (sqlite3.OperationalError) no such table: ledger_entries\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such table: ledger_entries\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such table: ledger_entries\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 264, in get_transactions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: ledger_entries\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 340, "function": "get_transactions"}}
{"timestamp": "2025-08-26T19:18:23.640699Z", "level": "ERROR", "trace_id": "3a5559e9-3439-459f-8b45-2742bff7c5fe", "module": "app.api.ledger", "message": "Database error fetching transactions: (sqlite3.OperationalError) no such table: ledger_entries\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such table: ledger_entries\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such table: ledger_entries\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 264, in get_transactions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: ledger_entries\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 340, "function": "get_transactions"}}
{"timestamp": "2025-08-26T19:18:23.649665Z", "level": "ERROR", "trace_id": "3a5559e9-3439-459f-8b45-2742bff7c5fe", "module": "app.api.ledger", "message": "Database error calculating portfolio summary: (sqlite3.OperationalError) no such table: ledger_entries\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such table: ledger_entries\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such table: ledger_entries\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 410, in get_portfolio_summary\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: ledger_entries\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 441, "function": "get_portfolio_summary"}}
{"timestamp": "2025-08-26T19:18:23.661250Z", "level": "ERROR", "trace_id": "3a5559e9-3439-459f-8b45-2742bff7c5fe", "module": "app.api.ledger", "message": "Database error fetching positions: (sqlite3.OperationalError) no such table: ledger_entries\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such table: ledger_entries\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such table: ledger_entries\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 131, in get_positions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: ledger_entries\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 173, "function": "get_positions"}}
{"timestamp": "2025-08-26T19:18:53.643087Z", "level": "ERROR", "trace_id": "3a5559e9-3439-459f-8b45-2742bff7c5fe", "module": "app.api.ledger", "message": "Database error fetching positions: (sqlite3.OperationalError) no such table: ledger_entries\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such table: ledger_entries\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such table: ledger_entries\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 131, in get_positions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: ledger_entries\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 173, "function": "get_positions"}}
{"timestamp": "2025-08-26T19:18:53.652245Z", "level": "ERROR", "trace_id": "3a5559e9-3439-459f-8b45-2742bff7c5fe", "module": "app.api.ledger", "message": "Database error fetching transactions: (sqlite3.OperationalError) no such table: ledger_entries\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such table: ledger_entries\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such table: ledger_entries\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 264, in get_transactions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: ledger_entries\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 340, "function": "get_transactions"}}
{"timestamp": "2025-08-26T19:18:53.660975Z", "level": "ERROR", "trace_id": "3a5559e9-3439-459f-8b45-2742bff7c5fe", "module": "app.api.ledger", "message": "Database error calculating portfolio summary: (sqlite3.OperationalError) no such table: ledger_entries\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such table: ledger_entries\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such table: ledger_entries\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 410, in get_portfolio_summary\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: ledger_entries\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 441, "function": "get_portfolio_summary"}}
{"timestamp": "2025-08-26T19:19:05.947530Z", "level": "ERROR", "trace_id": "7020debd-6b75-44b1-a582-3897f6e9b0c5", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T19:19:05.947530Z", "level": "ERROR", "trace_id": "7020debd-6b75-44b1-a582-3897f6e9b0c5", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T19:19:12.861424Z", "level": "ERROR", "trace_id": "7f6425c2-f0e3-41c3-8ea2-85736262a148", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T19:19:12.862422Z", "level": "ERROR", "trace_id": "7f6425c2-f0e3-41c3-8ea2-85736262a148", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T19:19:51.417598Z", "level": "ERROR", "trace_id": "d788b043-8d37-4cc8-b609-e14069737fce", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T19:19:51.417598Z", "level": "ERROR", "trace_id": "d788b043-8d37-4cc8-b609-e14069737fce", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T19:20:33.076974Z", "level": "ERROR", "trace_id": "d788b043-8d37-4cc8-b609-e14069737fce", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T19:20:33.076974Z", "level": "ERROR", "trace_id": "d788b043-8d37-4cc8-b609-e14069737fce", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T19:20:33.176827Z", "level": "ERROR", "trace_id": "d788b043-8d37-4cc8-b609-e14069737fce", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T19:20:58.819602Z", "level": "ERROR", "trace_id": "d788b043-8d37-4cc8-b609-e14069737fce", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T19:20:58.820153Z", "level": "ERROR", "trace_id": "d788b043-8d37-4cc8-b609-e14069737fce", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T19:20:58.922202Z", "level": "ERROR", "trace_id": "d788b043-8d37-4cc8-b609-e14069737fce", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T19:21:14.320632Z", "level": "ERROR", "trace_id": "d788b043-8d37-4cc8-b609-e14069737fce", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T19:21:14.321754Z", "level": "ERROR", "trace_id": "d788b043-8d37-4cc8-b609-e14069737fce", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T19:21:14.433778Z", "level": "ERROR", "trace_id": "d788b043-8d37-4cc8-b609-e14069737fce", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T19:23:12.663930Z", "level": "ERROR", "trace_id": "f790d606-bd13-4c5b-bc99-934e211610ca", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T19:23:12.663930Z", "level": "ERROR", "trace_id": "f790d606-bd13-4c5b-bc99-934e211610ca", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T19:23:19.634959Z", "level": "ERROR", "trace_id": "e0580c5c-fe53-4a50-bb40-2d55b20c425c", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T19:23:19.634959Z", "level": "ERROR", "trace_id": "e0580c5c-fe53-4a50-bb40-2d55b20c425c", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T19:23:32.486132Z", "level": "ERROR", "trace_id": "e0580c5c-fe53-4a50-bb40-2d55b20c425c", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T19:23:32.486132Z", "level": "ERROR", "trace_id": "e0580c5c-fe53-4a50-bb40-2d55b20c425c", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T19:23:32.595113Z", "level": "ERROR", "trace_id": "e0580c5c-fe53-4a50-bb40-2d55b20c425c", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T19:24:18.294833Z", "level": "ERROR", "trace_id": "e0580c5c-fe53-4a50-bb40-2d55b20c425c", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T19:24:18.294833Z", "level": "ERROR", "trace_id": "e0580c5c-fe53-4a50-bb40-2d55b20c425c", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T19:24:18.395846Z", "level": "ERROR", "trace_id": "e0580c5c-fe53-4a50-bb40-2d55b20c425c", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T19:27:33.438910Z", "level": "ERROR", "trace_id": "e0580c5c-fe53-4a50-bb40-2d55b20c425c", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T19:27:33.439418Z", "level": "ERROR", "trace_id": "e0580c5c-fe53-4a50-bb40-2d55b20c425c", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T19:27:33.534971Z", "level": "ERROR", "trace_id": "e0580c5c-fe53-4a50-bb40-2d55b20c425c", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T19:27:36.208923Z", "level": "ERROR", "trace_id": "e0580c5c-fe53-4a50-bb40-2d55b20c425c", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet connection check", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T19:27:36.211464Z", "level": "ERROR", "trace_id": "e0580c5c-fe53-4a50-bb40-2d55b20c425c", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet connection check", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T19:27:45.550274Z", "level": "ERROR", "trace_id": "e0580c5c-fe53-4a50-bb40-2d55b20c425c", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T19:27:45.551362Z", "level": "ERROR", "trace_id": "e0580c5c-fe53-4a50-bb40-2d55b20c425c", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T19:27:45.664122Z", "level": "ERROR", "trace_id": "e0580c5c-fe53-4a50-bb40-2d55b20c425c", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T19:27:47.508877Z", "level": "ERROR", "trace_id": "e0580c5c-fe53-4a50-bb40-2d55b20c425c", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet connection check", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T19:27:47.513260Z", "level": "ERROR", "trace_id": "e0580c5c-fe53-4a50-bb40-2d55b20c425c", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet connection check", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T19:32:28.497171Z", "level": "ERROR", "trace_id": "1a5232c2-dc07-43c3-a848-38fc3fb49792", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T19:32:28.497171Z", "level": "ERROR", "trace_id": "1a5232c2-dc07-43c3-a848-38fc3fb49792", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T19:33:05.870088Z", "level": "ERROR", "trace_id": "1a5232c2-dc07-43c3-a848-38fc3fb49792", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T19:33:05.870088Z", "level": "ERROR", "trace_id": "1a5232c2-dc07-43c3-a848-38fc3fb49792", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T19:33:05.965069Z", "level": "ERROR", "trace_id": "1a5232c2-dc07-43c3-a848-38fc3fb49792", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T19:33:08.102695Z", "level": "ERROR", "trace_id": "1a5232c2-dc07-43c3-a848-38fc3fb49792", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet connection check", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T19:33:08.106705Z", "level": "ERROR", "trace_id": "1a5232c2-dc07-43c3-a848-38fc3fb49792", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet connection check", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T19:38:38.574737Z", "level": "ERROR", "trace_id": "b81b910e-9412-4645-96fb-8740ac5d8ab6", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T19:38:38.574737Z", "level": "ERROR", "trace_id": "b81b910e-9412-4645-96fb-8740ac5d8ab6", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T19:38:56.783179Z", "level": "ERROR", "trace_id": "b81b910e-9412-4645-96fb-8740ac5d8ab6", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T19:38:56.784275Z", "level": "ERROR", "trace_id": "b81b910e-9412-4645-96fb-8740ac5d8ab6", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T19:38:56.884931Z", "level": "ERROR", "trace_id": "b81b910e-9412-4645-96fb-8740ac5d8ab6", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T19:39:08.277869Z", "level": "ERROR", "trace_id": "b81b910e-9412-4645-96fb-8740ac5d8ab6", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet connection check", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T19:39:08.283064Z", "level": "ERROR", "trace_id": "b81b910e-9412-4645-96fb-8740ac5d8ab6", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet connection check", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T19:39:29.294849Z", "level": "ERROR", "trace_id": "b81b910e-9412-4645-96fb-8740ac5d8ab6", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T19:39:29.294849Z", "level": "ERROR", "trace_id": "b81b910e-9412-4645-96fb-8740ac5d8ab6", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T19:39:29.396727Z", "level": "ERROR", "trace_id": "b81b910e-9412-4645-96fb-8740ac5d8ab6", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T19:39:33.676459Z", "level": "ERROR", "trace_id": "b81b910e-9412-4645-96fb-8740ac5d8ab6", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet connection check", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T19:39:33.679070Z", "level": "ERROR", "trace_id": "b81b910e-9412-4645-96fb-8740ac5d8ab6", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet connection check", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T19:39:33.696573Z", "level": "ERROR", "trace_id": "b81b910e-9412-4645-96fb-8740ac5d8ab6", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet connection check", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T19:39:33.699105Z", "level": "ERROR", "trace_id": "b81b910e-9412-4645-96fb-8740ac5d8ab6", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet connection check", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T19:39:38.240995Z", "level": "ERROR", "trace_id": "b81b910e-9412-4645-96fb-8740ac5d8ab6", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T19:39:38.240995Z", "level": "ERROR", "trace_id": "b81b910e-9412-4645-96fb-8740ac5d8ab6", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T19:39:38.348064Z", "level": "ERROR", "trace_id": "b81b910e-9412-4645-96fb-8740ac5d8ab6", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T19:40:29.851232Z", "level": "ERROR", "trace_id": "95e57be4-45d7-4cd3-86d3-4585f7b1c6a6", "module": "app.middleware.rate_limiting", "message": "Failed to connect to Redis: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 167, "function": "connect"}}
{"timestamp": "2025-08-26T19:40:29.851232Z", "level": "ERROR", "trace_id": "95e57be4-45d7-4cd3-86d3-4585f7b1c6a6", "module": "main", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\main.py", "line": 445, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-26T19:42:09.887395Z", "level": "ERROR", "trace_id": "95e57be4-45d7-4cd3-86d3-4585f7b1c6a6", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet connection check", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T19:42:09.890536Z", "level": "ERROR", "trace_id": "95e57be4-45d7-4cd3-86d3-4585f7b1c6a6", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet connection check", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T19:42:47.061854Z", "level": "ERROR", "trace_id": "95e57be4-45d7-4cd3-86d3-4585f7b1c6a6", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T19:42:47.062957Z", "level": "ERROR", "trace_id": "95e57be4-45d7-4cd3-86d3-4585f7b1c6a6", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T19:42:47.177348Z", "level": "ERROR", "trace_id": "95e57be4-45d7-4cd3-86d3-4585f7b1c6a6", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T19:44:08.834770Z", "level": "ERROR", "trace_id": "95e57be4-45d7-4cd3-86d3-4585f7b1c6a6", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet connection check", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-26T19:44:08.838431Z", "level": "ERROR", "trace_id": "95e57be4-45d7-4cd3-86d3-4585f7b1c6a6", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet connection check", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
