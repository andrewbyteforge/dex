{"timestamp": "2025-08-27T15:34:54.615121Z", "level": "ERROR", "trace_id": "a5ac0aeb-0f5a-4595-9b0b-554b4e5e3079", "module": "app.middleware.rate_limiting", "message": "Redis connection failed: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 303, "function": "connect"}}
{"timestamp": "2025-08-27T15:34:54.615121Z", "level": "ERROR", "trace_id": "a5ac0aeb-0f5a-4595-9b0b-554b4e5e3079", "module": "app.core.lifespan", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\app\\core\\lifespan.py", "line": 94, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-27T15:34:55.568859Z", "level": "ERROR", "trace_id": "a5ac0aeb-0f5a-4595-9b0b-554b4e5e3079", "module": "app.discovery.event_processor", "message": "Failed to initialize Market Intelligence: \"Attempt to overwrite 'module' in LogRecord\"", "location": {"file": "D:\\dex\\backend\\app\\discovery\\event_processor.py", "line": 131, "function": "__init__"}}
{"timestamp": "2025-08-27T15:45:23.563296Z", "level": "ERROR", "trace_id": "e7de17c4-e1a0-49dc-a7bd-a87e667ab94f", "module": "app.middleware.rate_limiting", "message": "Redis connection failed: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 303, "function": "connect"}}
{"timestamp": "2025-08-27T15:45:23.565170Z", "level": "ERROR", "trace_id": "e7de17c4-e1a0-49dc-a7bd-a87e667ab94f", "module": "app.core.lifespan", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\app\\core\\lifespan.py", "line": 94, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-27T15:45:24.513707Z", "level": "ERROR", "trace_id": "e7de17c4-e1a0-49dc-a7bd-a87e667ab94f", "module": "app.discovery.event_processor", "message": "Failed to initialize Market Intelligence: \"Attempt to overwrite 'module' in LogRecord\"", "location": {"file": "D:\\dex\\backend\\app\\discovery\\event_processor.py", "line": 131, "function": "__init__"}}
{"timestamp": "2025-08-27T15:53:04.698827Z", "level": "ERROR", "trace_id": "4ced9699-d34c-48a8-bdb0-4c99ee7a3cdd", "module": "app.middleware.rate_limiting", "message": "Redis connection failed: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 303, "function": "connect"}}
{"timestamp": "2025-08-27T15:53:04.699509Z", "level": "ERROR", "trace_id": "4ced9699-d34c-48a8-bdb0-4c99ee7a3cdd", "module": "app.core.lifespan", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\app\\core\\lifespan.py", "line": 94, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-27T15:53:05.638387Z", "level": "ERROR", "trace_id": "4ced9699-d34c-48a8-bdb0-4c99ee7a3cdd", "module": "app.discovery.event_processor", "message": "Failed to initialize Market Intelligence: \"Attempt to overwrite 'module' in LogRecord\"", "location": {"file": "D:\\dex\\backend\\app\\discovery\\event_processor.py", "line": 131, "function": "__init__"}}
{"timestamp": "2025-08-27T15:53:15.395721Z", "level": "ERROR", "trace_id": "96e6874a-2842-424d-9c03-8df6502c2e36", "module": "app.middleware.rate_limiting", "message": "Redis connection failed: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 303, "function": "connect"}}
{"timestamp": "2025-08-27T15:53:15.397897Z", "level": "ERROR", "trace_id": "96e6874a-2842-424d-9c03-8df6502c2e36", "module": "app.core.lifespan", "message": "Failed to initialize Redis rate limiter", "location": {"file": "D:\\dex\\backend\\app\\core\\lifespan.py", "line": 94, "function": "setup_enhanced_rate_limiting"}}
{"timestamp": "2025-08-27T15:53:16.360437Z", "level": "ERROR", "trace_id": "96e6874a-2842-424d-9c03-8df6502c2e36", "module": "app.discovery.event_processor", "message": "Failed to initialize Market Intelligence: \"Attempt to overwrite 'module' in LogRecord\"", "location": {"file": "D:\\dex\\backend\\app\\discovery\\event_processor.py", "line": 131, "function": "__init__"}}
{"timestamp": "2025-08-27T15:54:14.558420Z", "level": "ERROR", "trace_id": "96e6874a-2842-424d-9c03-8df6502c2e36", "module": "app.middleware.rate_limiting", "message": "Redis connection failed: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 303, "function": "connect"}}
{"timestamp": "2025-08-27T15:54:18.643581Z", "level": "ERROR", "trace_id": "96e6874a-2842-424d-9c03-8df6502c2e36", "module": "app.middleware.rate_limiting", "message": "Redis connection failed: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 303, "function": "connect"}}
{"timestamp": "2025-08-27T15:54:27.197031Z", "level": "ERROR", "trace_id": "96e6874a-2842-424d-9c03-8df6502c2e36", "module": "app.middleware.rate_limiting", "message": "Redis connection failed: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 303, "function": "connect"}}
{"timestamp": "2025-08-27T15:54:31.504522Z", "level": "ERROR", "trace_id": "96e6874a-2842-424d-9c03-8df6502c2e36", "module": "app.middleware.rate_limiting", "message": "Redis connection failed: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 303, "function": "connect"}}
{"timestamp": "2025-08-27T15:54:40.833102Z", "level": "ERROR", "trace_id": "96e6874a-2842-424d-9c03-8df6502c2e36", "module": "app.middleware.rate_limiting", "message": "Redis connection failed: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 303, "function": "connect"}}
{"timestamp": "2025-08-27T15:54:44.927599Z", "level": "ERROR", "trace_id": "96e6874a-2842-424d-9c03-8df6502c2e36", "module": "app.middleware.rate_limiting", "message": "Redis connection failed: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 303, "function": "connect"}}
{"timestamp": "2025-08-27T15:55:18.605596Z", "level": "ERROR", "trace_id": "96e6874a-2842-424d-9c03-8df6502c2e36", "module": "app.middleware.rate_limiting", "message": "Redis connection failed: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 303, "function": "connect"}}
{"timestamp": "2025-08-27T15:55:18.608725Z", "level": "ERROR", "trace_id": "96e6874a-2842-424d-9c03-8df6502c2e36", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-27T15:55:18.608725Z", "level": "ERROR", "trace_id": "96e6874a-2842-424d-9c03-8df6502c2e36", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-27T15:55:18.706966Z", "level": "ERROR", "trace_id": "96e6874a-2842-424d-9c03-8df6502c2e36", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-27T15:55:21.865451Z", "level": "ERROR", "trace_id": "96e6874a-2842-424d-9c03-8df6502c2e36", "module": "app.middleware.rate_limiting", "message": "Redis connection failed: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 303, "function": "connect"}}
{"timestamp": "2025-08-27T15:55:21.865959Z", "level": "ERROR", "trace_id": "96e6874a-2842-424d-9c03-8df6502c2e36", "module": "app.middleware.rate_limiting", "message": "Redis connection failed: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 303, "function": "connect"}}
{"timestamp": "2025-08-27T15:55:21.867008Z", "level": "ERROR", "trace_id": "96e6874a-2842-424d-9c03-8df6502c2e36", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet connection check", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-27T15:55:24.984874Z", "level": "ERROR", "trace_id": "96e6874a-2842-424d-9c03-8df6502c2e36", "module": "app.middleware.rate_limiting", "message": "Redis connection failed: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 303, "function": "connect"}}
{"timestamp": "2025-08-27T15:55:27.806863Z", "level": "ERROR", "trace_id": "96e6874a-2842-424d-9c03-8df6502c2e36", "module": "app.middleware.rate_limiting", "message": "Redis connection failed: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 303, "function": "connect"}}
{"timestamp": "2025-08-27T15:55:27.808859Z", "level": "ERROR", "trace_id": "96e6874a-2842-424d-9c03-8df6502c2e36", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration request received", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-27T15:55:27.808859Z", "level": "ERROR", "trace_id": "96e6874a-2842-424d-9c03-8df6502c2e36", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration completed successfully", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-27T15:55:27.890773Z", "level": "ERROR", "trace_id": "96e6874a-2842-424d-9c03-8df6502c2e36", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet registration metrics logged", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-27T15:55:29.050679Z", "level": "ERROR", "trace_id": "96e6874a-2842-424d-9c03-8df6502c2e36", "module": "app.middleware.rate_limiting", "message": "Redis connection failed: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 303, "function": "connect"}}
{"timestamp": "2025-08-27T15:55:30.508687Z", "level": "ERROR", "trace_id": "96e6874a-2842-424d-9c03-8df6502c2e36", "module": "app.middleware.rate_limiting", "message": "Redis connection failed: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 303, "function": "connect"}}
{"timestamp": "2025-08-27T15:55:30.509738Z", "level": "ERROR", "trace_id": "96e6874a-2842-424d-9c03-8df6502c2e36", "module": "app.middleware.rate_limiting", "message": "Redis connection failed: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 303, "function": "connect"}}
{"timestamp": "2025-08-27T15:55:35.603883Z", "level": "ERROR", "trace_id": "96e6874a-2842-424d-9c03-8df6502c2e36", "module": "app.middleware.rate_limiting", "message": "Redis connection failed: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 303, "function": "connect"}}
{"timestamp": "2025-08-27T15:55:35.604894Z", "level": "ERROR", "trace_id": "96e6874a-2842-424d-9c03-8df6502c2e36", "module": "app.middleware.rate_limiting", "message": "Redis connection failed: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 303, "function": "connect"}}
{"timestamp": "2025-08-27T15:55:49.549194Z", "level": "ERROR", "trace_id": "96e6874a-2842-424d-9c03-8df6502c2e36", "module": "app.middleware.rate_limiting", "message": "Redis connection failed: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 303, "function": "connect"}}
{"timestamp": "2025-08-27T15:55:49.553835Z", "level": "ERROR", "trace_id": "96e6874a-2842-424d-9c03-8df6502c2e36", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet connection check", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-27T15:55:49.565113Z", "level": "ERROR", "trace_id": "96e6874a-2842-424d-9c03-8df6502c2e36", "module": "app.middleware.rate_limiting", "message": "Redis connection failed: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 303, "function": "connect"}}
{"timestamp": "2025-08-27T15:55:53.624552Z", "level": "ERROR", "trace_id": "96e6874a-2842-424d-9c03-8df6502c2e36", "module": "app.middleware.rate_limiting", "message": "Redis connection failed: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 303, "function": "connect"}}
{"timestamp": "2025-08-27T15:55:53.627837Z", "level": "ERROR", "trace_id": "96e6874a-2842-424d-9c03-8df6502c2e36", "module": "app.middleware.rate_limiting", "message": "Redis connection failed: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 303, "function": "connect"}}
{"timestamp": "2025-08-27T15:55:53.630057Z", "level": "ERROR", "trace_id": "96e6874a-2842-424d-9c03-8df6502c2e36", "module": "app.middleware.rate_limiting", "message": "Redis connection failed: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 303, "function": "connect"}}
{"timestamp": "2025-08-27T15:55:53.633459Z", "level": "ERROR", "trace_id": "96e6874a-2842-424d-9c03-8df6502c2e36", "module": "app.middleware.rate_limiting", "message": "Redis connection failed: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 303, "function": "connect"}}
{"timestamp": "2025-08-27T15:55:53.635732Z", "level": "ERROR", "trace_id": "96e6874a-2842-424d-9c03-8df6502c2e36", "module": "app.middleware.rate_limiting", "message": "Redis connection failed: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 303, "function": "connect"}}
{"timestamp": "2025-08-27T15:55:53.650209Z", "level": "ERROR", "trace_id": "96e6874a-2842-424d-9c03-8df6502c2e36", "module": "app.api.wallet", "message": "Logging failed: \"Attempt to overwrite 'message' in LogRecord\". Original message: Wallet connection check", "location": {"file": "D:\\dex\\backend\\app\\api\\wallet.py", "line": 198, "function": "log_wallet_operation"}}
{"timestamp": "2025-08-27T15:55:53.694177Z", "level": "ERROR", "trace_id": "96e6874a-2842-424d-9c03-8df6502c2e36", "module": "app.api.ledger", "message": "Database error fetching transactions: (sqlite3.OperationalError) no such column: ledger_entries.execution_mode\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at, ledger_entries.execution_mode \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such column: ledger_entries.execution_mode\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at, ledger_entries.execution_mode \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such column: ledger_entries.execution_mode\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 264, in get_transactions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: ledger_entries.execution_mode\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at, ledger_entries.execution_mode \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 100, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 340, "function": "get_transactions"}}
{"timestamp": "2025-08-27T15:55:53.702599Z", "level": "ERROR", "trace_id": "96e6874a-2842-424d-9c03-8df6502c2e36", "module": "app.api.ledger", "message": "Database error fetching positions: (sqlite3.OperationalError) no such column: ledger_entries.execution_mode\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at, ledger_entries.execution_mode \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such column: ledger_entries.execution_mode\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at, ledger_entries.execution_mode \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such column: ledger_entries.execution_mode\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 131, in get_positions\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: ledger_entries.execution_mode\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at, ledger_entries.execution_mode \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? AND ledger_entries.chain = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 'ethereum', 1000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 173, "function": "get_positions"}}
{"timestamp": "2025-08-27T15:55:53.710045Z", "level": "ERROR", "trace_id": "96e6874a-2842-424d-9c03-8df6502c2e36", "module": "app.api.ledger", "message": "Database error calculating portfolio summary: (sqlite3.OperationalError) no such column: ledger_entries.execution_mode\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at, ledger_entries.execution_mode \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "exception": {"type": "OperationalError", "message": "(sqlite3.OperationalError) no such column: ledger_entries.execution_mode\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at, ledger_entries.execution_mode \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlite3.OperationalError: no such column: ledger_entries.execution_mode\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"D:\\dex\\backend\\app\\api\\ledger.py\", line 410, in get_portfolio_summary\n    ledger_entries = await ledger_repo.get_user_ledger(\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\backend\\app\\storage\\repositories.py\", line 665, in get_user_ledger\n    result = await self.session.execute(stmt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\ext\\asyncio\\session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 177, in execute\n    self._adapt_connection._handle_exception(error)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 337, in _handle_exception\n    raise error\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\dialects\\sqlite\\aiosqlite.py\", line 159, in execute\n    self.await_(_cursor.execute(operation, parameters))\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 40, in execute\n    await self._execute(self._cursor.execute, sql, parameters)\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\cursor.py\", line 32, in _execute\n    return await self._conn._execute(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 122, in _execute\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"D:\\dex\\.venv\\Lib\\site-packages\\aiosqlite\\core.py\", line 105, in run\n    result = function()\n             ^^^^^^^^^^\n", "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: ledger_entries.execution_mode\n[SQL: SELECT ledger_entries.id, ledger_entries.user_id, ledger_entries.trace_id, ledger_entries.created_at, ledger_entries.chain, ledger_entries.dex, ledger_entries.trade_type, ledger_entries.input_token, ledger_entries.input_token_symbol, ledger_entries.output_token, ledger_entries.output_token_symbol, ledger_entries.input_amount, ledger_entries.output_amount, ledger_entries.price, ledger_entries.price_usd, ledger_entries.tx_hash, ledger_entries.block_number, ledger_entries.gas_used, ledger_entries.gas_price, ledger_entries.transaction_fee, ledger_entries.transaction_fee_usd, ledger_entries.status, ledger_entries.error_message, ledger_entries.wallet_address, ledger_entries.realized_pnl, ledger_entries.realized_pnl_usd, ledger_entries.risk_score, ledger_entries.risk_factors, ledger_entries.tags, ledger_entries.notes, ledger_entries.archived, ledger_entries.archived_at, ledger_entries.execution_mode \nFROM ledger_entries \nWHERE ledger_entries.user_id = ? ORDER BY ledger_entries.created_at DESC\n LIMIT ? OFFSET ?]\n[parameters: (1, 5000, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "location": {"file": "D:\\dex\\backend\\app\\api\\ledger.py", "line": 441, "function": "get_portfolio_summary"}}
{"timestamp": "2025-08-27T15:55:53.716856Z", "level": "ERROR", "trace_id": "96e6874a-2842-424d-9c03-8df6502c2e36", "module": "app.core.exception_handlers", "message": "HTTP 500: Database error retrieving transactions: ledger_transactions_17e78400b777", "location": {"file": "D:\\dex\\backend\\app\\core\\exception_handlers.py", "line": 201, "function": "http_exception_handler"}}
{"timestamp": "2025-08-27T15:55:53.716856Z", "level": "ERROR", "trace_id": "96e6874a-2842-424d-9c03-8df6502c2e36", "module": "app.core.exception_handlers", "message": "HTTP 500: Database error retrieving positions: ledger_positions_5676030fc14d", "location": {"file": "D:\\dex\\backend\\app\\core\\exception_handlers.py", "line": 201, "function": "http_exception_handler"}}
{"timestamp": "2025-08-27T15:55:53.717854Z", "level": "ERROR", "trace_id": "96e6874a-2842-424d-9c03-8df6502c2e36", "module": "app.core.exception_handlers", "message": "HTTP 500: Database error calculating summary: portfolio_summary_9e0b4d491e2c", "location": {"file": "D:\\dex\\backend\\app\\core\\exception_handlers.py", "line": 201, "function": "http_exception_handler"}}
{"timestamp": "2025-08-27T15:55:53.720846Z", "level": "ERROR", "trace_id": "96e6874a-2842-424d-9c03-8df6502c2e36", "module": "app.middleware.rate_limiting", "message": "Redis connection failed: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 303, "function": "connect"}}
{"timestamp": "2025-08-27T15:55:57.798302Z", "level": "ERROR", "trace_id": "96e6874a-2842-424d-9c03-8df6502c2e36", "module": "app.middleware.rate_limiting", "message": "Redis connection failed: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 303, "function": "connect"}}
{"timestamp": "2025-08-27T15:55:57.845189Z", "level": "ERROR", "trace_id": "96e6874a-2842-424d-9c03-8df6502c2e36", "module": "app.middleware.rate_limiting", "message": "Redis connection failed: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 303, "function": "connect"}}
{"timestamp": "2025-08-27T15:56:01.918775Z", "level": "ERROR", "trace_id": "96e6874a-2842-424d-9c03-8df6502c2e36", "module": "app.middleware.rate_limiting", "message": "Redis connection failed: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 303, "function": "connect"}}
{"timestamp": "2025-08-27T15:56:01.919822Z", "level": "ERROR", "trace_id": "96e6874a-2842-424d-9c03-8df6502c2e36", "module": "app.middleware.rate_limiting", "message": "Redis connection failed: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 303, "function": "connect"}}
{"timestamp": "2025-08-27T15:56:05.986414Z", "level": "ERROR", "trace_id": "96e6874a-2842-424d-9c03-8df6502c2e36", "module": "app.middleware.rate_limiting", "message": "Redis connection failed: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 303, "function": "connect"}}
{"timestamp": "2025-08-27T15:56:05.986414Z", "level": "ERROR", "trace_id": "96e6874a-2842-424d-9c03-8df6502c2e36", "module": "app.middleware.rate_limiting", "message": "Redis connection failed: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 303, "function": "connect"}}
{"timestamp": "2025-08-27T15:56:06.926356Z", "level": "ERROR", "trace_id": "96e6874a-2842-424d-9c03-8df6502c2e36", "module": "app.middleware.rate_limiting", "message": "Redis connection failed: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 303, "function": "connect"}}
{"timestamp": "2025-08-27T15:56:06.944522Z", "level": "ERROR", "trace_id": "96e6874a-2842-424d-9c03-8df6502c2e36", "module": "app.middleware.rate_limiting", "message": "Redis connection failed: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 303, "function": "connect"}}
{"timestamp": "2025-08-27T15:56:10.060497Z", "level": "ERROR", "trace_id": "96e6874a-2842-424d-9c03-8df6502c2e36", "module": "app.middleware.rate_limiting", "message": "Redis connection failed: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 303, "function": "connect"}}
{"timestamp": "2025-08-27T15:56:12.298727Z", "level": "ERROR", "trace_id": "96e6874a-2842-424d-9c03-8df6502c2e36", "module": "app.middleware.rate_limiting", "message": "Redis connection failed: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 303, "function": "connect"}}
{"timestamp": "2025-08-27T15:56:12.299842Z", "level": "ERROR", "trace_id": "96e6874a-2842-424d-9c03-8df6502c2e36", "module": "app.middleware.rate_limiting", "message": "Redis connection failed: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 303, "function": "connect"}}
{"timestamp": "2025-08-27T15:56:43.100386Z", "level": "ERROR", "trace_id": "96e6874a-2842-424d-9c03-8df6502c2e36", "module": "app.middleware.rate_limiting", "message": "Redis connection failed: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 303, "function": "connect"}}
{"timestamp": "2025-08-27T15:56:47.160385Z", "level": "ERROR", "trace_id": "96e6874a-2842-424d-9c03-8df6502c2e36", "module": "app.middleware.rate_limiting", "message": "Redis connection failed: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.", "location": {"file": "D:\\dex\\backend\\app\\middleware\\rate_limiting.py", "line": 303, "function": "connect"}}
