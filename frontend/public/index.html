<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  <!-- Basic Meta Tags -->
  <title>DEX Sniper Pro - Professional DeFi Trading Platform</title>
  <meta name="description" content="Professional DEX trading and sniping platform for new token pairs across multiple blockchains. Real-time quotes, automated strategies, and advanced analytics." />
  <meta name="keywords" content="DeFi, DEX, trading, crypto, blockchain, sniping, Ethereum, BSC, Polygon, Solana" />
  <meta name="author" content="DEX Sniper Pro" />
  
  <!-- PWA Meta Tags -->
  <link rel="manifest" href="/src/pwa/manifest.json" />
  <meta name="theme-color" content="#0d6efd" />
  <meta name="background-color" content="#ffffff" />
  
  <!-- iOS PWA Meta Tags -->
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <meta name="apple-mobile-web-app-title" content="DEX Sniper Pro" />
  <link rel="apple-touch-icon" href="/icons/icon-192x192.png" />
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/icon-152x152.png" />
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/icon-192x192.png" />
  <link rel="apple-touch-startup-image" href="/icons/icon-512x512.png" />
  
  <!-- Android PWA Meta Tags -->
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="mobile-web-app-status-bar-style" content="default" />
  <meta name="mobile-web-app-title" content="DEX Sniper Pro" />
  
  <!-- Windows Tile -->
  <meta name="msapplication-TileImage" content="/icons/icon-144x144.png" />
  <meta name="msapplication-TileColor" content="#0d6efd" />
  <meta name="msapplication-config" content="/browserconfig.xml" />
  
  <!-- Favicons -->
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
  <link rel="shortcut icon" href="/favicon.ico" />
  
  <!-- Open Graph / Social Media -->
  <meta property="og:type" content="website" />
  <meta property="og:title" content="DEX Sniper Pro - Professional DeFi Trading" />
  <meta property="og:description" content="Trade new token pairs across multiple blockchains with real-time quotes and automated strategies." />
  <meta property="og:image" content="/og-image.png" />
  <meta property="og:url" content="https://dexsniper.pro" />
  <meta property="og:site_name" content="DEX Sniper Pro" />
  
  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="DEX Sniper Pro - Professional DeFi Trading" />
  <meta name="twitter:description" content="Trade new token pairs across multiple blockchains with real-time quotes and automated strategies." />
  <meta name="twitter:image" content="/twitter-image.png" />
  <meta name="twitter:site" content="@dexsniperpro" />
  
  <!-- Performance and Security -->
  <meta name="referrer" content="strict-origin-when-cross-origin" />
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdnjs.cloudflare.com; style-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com; img-src 'self' data: https:; connect-src 'self' ws: wss: https:; font-src 'self' https://cdnjs.cloudflare.com;" />
  
  <!-- Preconnect to external domains for performance -->
  <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin />
  <link rel="dns-prefetch" href="//cdnjs.cloudflare.com" />
  
  <!-- Web App Manifest Hints -->
  <link rel="prefetch" href="/src/pwa/serviceWorker.js" />
  
  <!-- iOS Safari specific -->
  <meta name="format-detection" content="telephone=no" />
  <meta name="apple-touch-fullscreen" content="yes" />
  
  <!-- Disable automatic link detection -->
  <meta name="format-detection" content="address=no" />
  <meta name="format-detection" content="email=no" />
  
  <!-- Accessibility -->
  <meta name="color-scheme" content="light" />
  
  <!-- Critical CSS for fast loading -->
  <style>
    /* Critical above-the-fold styles */
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
        'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
        sans-serif;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      background-color: #ffffff;
      color: #212529;
    }
    
    /* Loading state */
    #root {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    
    /* Initial loading screen */
    .loading-screen {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      background: linear-gradient(135deg, #0d6efd, #6610f2);
      color: white;
    }
    
    .loading-spinner {
      width: 40px;
      height: 40px;
      border: 4px solid rgba(255, 255, 255, 0.3);
      border-top: 4px solid white;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-bottom: 1rem;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    .loading-text {
      font-size: 1.2rem;
      font-weight: 600;
      text-align: center;
    }
    
    /* Hide loading screen when app loads */
    .app-loaded .loading-screen {
      display: none;
    }
    
    /* iOS Safari specific fixes */
    @supports (padding: max(0px)) {
      body {
        padding-left: env(safe-area-inset-left);
        padding-right: env(safe-area-inset-right);
      }
    }
    
    /* Prevent zoom on iOS */
    input[type="text"],
    input[type="number"],
    input[type="email"],
    input[type="password"],
    textarea,
    select {
      font-size: 16px !important;
    }
    
    /* High contrast mode support */
    @media (prefers-contrast: high) {
      .loading-screen {
        background: #000000;
        color: #ffffff;
      }
    }
    
    /* Reduced motion support */
    @media (prefers-reduced-motion: reduce) {
      .loading-spinner {
        animation: none;
      }
      
      .loading-spinner::after {
        content: "Loading...";
        display: block;
        text-align: center;
        margin-top: 1rem;
      }
    }
  </style>
</head>
<body>
  <!-- Skip to main content for accessibility -->
  <a href="#main-content" class="skip-link sr-only sr-only-focusable">
    Skip to main content
  </a>
  
  <!-- Live region for dynamic announcements -->
  <div id="live-region" class="sr-only" aria-live="polite" aria-atomic="true"></div>
  
  <!-- Main app container -->
  <div id="root">
    <!-- Loading screen shown until React loads -->
    <div class="loading-screen">
      <div class="loading-spinner" role="status" aria-label="Loading application"></div>
      <div class="loading-text">
        <div>DEX Sniper Pro</div>
        <div style="font-size: 0.9rem; font-weight: 400; margin-top: 0.5rem; opacity: 0.8;">
          Loading trading interface...
        </div>
      </div>
    </div>
  </div>
  
  <!-- Offline page fallback -->
  <div id="offline-page" style="display: none;">
    <div class="loading-screen">
      <div style="font-size: 3rem; margin-bottom: 1rem;">üì±</div>
      <div class="loading-text">
        <div>You're Offline</div>
        <div style="font-size: 0.9rem; font-weight: 400; margin-top: 0.5rem; opacity: 0.8;">
          Please check your internet connection
        </div>
        <button 
          onclick="window.location.reload()" 
          style="margin-top: 1rem; padding: 0.5rem 1rem; background: white; color: #0d6efd; border: none; border-radius: 0.25rem; font-weight: 600; cursor: pointer;"
        >
          Retry
        </button>
      </div>
    </div>
  </div>
  
  <!-- PWA install prompt placeholder -->
  <div id="pwa-install-prompt"></div>
  
  <!-- Connection status banner -->
  <div id="connection-status" class="connection-status" style="display: none;"></div>
  
  <!-- Error boundary fallback -->
  <script>
    // Global error handler
    window.addEventListener('error', function(e) {
      console.error('Global error:', e.error);
      
      // Show user-friendly error if React fails to load
      if (e.error && e.error.message && e.error.message.includes('React')) {
        document.getElementById('root').innerHTML = `
          <div class="loading-screen">
            <div style="color: #dc3545; font-size: 2rem; margin-bottom: 1rem;">‚ö†Ô∏è</div>
            <div class="loading-text">
              <div>Application Error</div>
              <div style="font-size: 0.9rem; font-weight: 400; margin-top: 0.5rem; opacity: 0.8;">
                Please refresh the page to try again
              </div>
              <button 
                onclick="window.location.reload()" 
                style="margin-top: 1rem; padding: 0.5rem 1rem; background: #dc3545; color: white; border: none; border-radius: 0.25rem; font-weight: 600; cursor: pointer;"
              >
                Refresh Page
              </button>
            </div>
          </div>
        `;
      }
    });
    
    // Handle unhandled promise rejections
    window.addEventListener('unhandledrejection', function(e) {
      console.error('Unhandled promise rejection:', e.reason);
    });
    
    // Network status monitoring
    function updateConnectionStatus() {
      const statusEl = document.getElementById('connection-status');
      if (!statusEl) return;
      
      if (navigator.onLine) {
        statusEl.style.display = 'none';
      } else {
        statusEl.style.display = 'block';
        statusEl.className = 'connection-status offline';
        statusEl.textContent = 'üì± You are offline. Some features may not work.';
      }
    }
    
    window.addEventListener('online', updateConnectionStatus);
    window.addEventListener('offline', updateConnectionStatus);
    
    // Initial check
    updateConnectionStatus();
    
    // Performance monitoring
    window.addEventListener('load', function() {
      // Mark app as loaded for CSS
      document.body.classList.add('app-loaded');
      
      // Log performance metrics
      if ('performance' in window) {
        const perfData = performance.getEntriesByType('navigation')[0];
        console.log('Page load time:', perfData.loadEventEnd - perfData.loadEventStart, 'ms');
      }
    });
  </script>
  
  <!-- Module script for modern browsers -->
  <script type="module" src="/src/main.jsx"></script>
  
  <!-- Fallback for older browsers -->
  <script nomodule>
    document.getElementById('root').innerHTML = `
      <div class="loading-screen">
        <div style="color: #fd7e14; font-size: 2rem; margin-bottom: 1rem;">üîÑ</div>
        <div class="loading-text">
          <div>Browser Update Needed</div>
          <div style="font-size: 0.9rem; font-weight: 400; margin-top: 0.5rem; opacity: 0.8;">
            Please update your browser to use DEX Sniper Pro
          </div>
        </div>
      </div>
    `;
  </script>
</body>
</html>