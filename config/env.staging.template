# DEX Sniper Pro - Staging Environment Configuration  
# File: config/env.staging.template
#
# Staging environment for testing production-like configurations
# with safe defaults and additional debugging capabilities

#=============================================================================
# APPLICATION SETTINGS
#=============================================================================

# Environment identification
ENVIRONMENT=staging
APP_NAME=DEX Sniper Pro (Staging)
DEBUG=false
VERSION=1.0.0-staging

# Security (can use weaker secrets for staging)
JWT_SECRET=staging_jwt_secret_minimum_32_characters_for_testing_only
ENCRYPTION_KEY=staging_encryption_key_minimum_32_characters_for_testing
API_KEYS=staging_api_key_1,staging_api_key_2

#=============================================================================
# SERVER CONFIGURATION
#=============================================================================

# Server settings (single worker for easier debugging)
HOST=127.0.0.1
PORT=8001  # Different port from production
RELOAD=true
WORKERS=1
WORKER_CLASS=uvicorn.workers.UvicornWorker

#=============================================================================
# DATABASE CONFIGURATION
#=============================================================================

# Staging database (separate from production)
DATABASE_URL=sqlite:///./data/dex_sniper_staging.db
DATABASE_ECHO=true  # Enable SQL logging for debugging

# PostgreSQL staging (if using)
# POSTGRES_HOST=localhost
# POSTGRES_PORT=5432
# POSTGRES_DB=dexsniper_staging
# POSTGRES_USER=dexsniper_staging
# POSTGRES_PASSWORD=staging_password

#=============================================================================
# REDIS CONFIGURATION
#=============================================================================

# Staging Redis (different database number)
REDIS_URL=redis://localhost:6379/2
REDIS_PASSWORD=

# Relaxed rate limiting for testing
RATE_LIMIT_ENABLED=true
RATE_LIMIT_STRICT_CALLS=100
RATE_LIMIT_STRICT_PERIOD=60
RATE_LIMIT_NORMAL_CALLS=300
RATE_LIMIT_NORMAL_PERIOD=60

#=============================================================================
# BLOCKCHAIN RPC ENDPOINTS (TESTNETS)
#=============================================================================

# Testnet RPC endpoints - safe for testing
ETHEREUM_RPC_URL=https://sepolia.infura.io/v3/YOUR_INFURA_PROJECT_ID
BSC_RPC_URL=https://data-seed-prebsc-1-s1.binance.org:8545/
POLYGON_RPC_URL=https://rpc-mumbai.maticvigil.com/
BASE_RPC_URL=https://goerli.base.org
ARBITRUM_RPC_URL=https://goerli-rollup.arbitrum.io/rpc/

# WebSocket endpoints (testnets)
ETHEREUM_WS_URL=wss://sepolia.infura.io/ws/v3/YOUR_INFURA_PROJECT_ID

#=============================================================================
# SECURITY SETTINGS
#=============================================================================

# Relaxed CORS for staging
CORS_ORIGINS=http://localhost:3000,http://localhost:3001,http://127.0.0.1:3000,http://127.0.0.1:3001
CORS_ALLOW_CREDENTIALS=true
CORS_MAX_AGE=300

# Security headers (less strict)
SECURITY_HEADERS_ENABLED=true
HSTS_MAX_AGE=86400  # 1 day instead of 1 year

# Generous request limits for testing
MAX_REQUEST_SIZE=52428800  # 50MB
REQUEST_TIMEOUT=60
UPLOAD_MAX_SIZE=20971520   # 20MB

#=============================================================================
# TRADING CONFIGURATION (SAFE DEFAULTS)
#=============================================================================

# Trading features (disabled by default for safety)
MAINNET_ENABLED=false  # Always false in staging
AUTOTRADE_ENABLED=false  # Test manually first

# Conservative risk management
DEFAULT_SLIPPAGE_TOLERANCE=5.0
MAX_SLIPPAGE_TOLERANCE=20.0
DEFAULT_GAS_PRICE_GWEI=10
MAX_GAS_PRICE_GWEI=50

# Small position limits for testing
MAX_POSITION_SIZE_GBP=100
MAX_DAILY_TRADING_GBP=500
MAX_TOTAL_POSITIONS=10

#=============================================================================
# LOGGING CONFIGURATION (VERBOSE)
#=============================================================================

# Detailed logging for debugging
LOG_LEVEL=DEBUG
LOG_RETENTION_DAYS=30  # Shorter retention
LEDGER_RETENTION_DAYS=90

# Log to both file and console
LOG_TO_FILE=true
LOG_TO_CONSOLE=true
LOG_STRUCTURED=true

# Staging log paths
LOG_DIR=./data/staging_logs
ERROR_LOG_FILE=./data/staging_logs/errors.log
ACCESS_LOG_FILE=./data/staging_logs/access.log

#=============================================================================
# MONITORING & METRICS
#=============================================================================

# Health checks
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=10  # More frequent checks

# Metrics
METRICS_ENABLED=true
METRICS_PORT=9091  # Different from production
METRICS_PATH=/metrics

#=============================================================================
# BACKUP CONFIGURATION
#=============================================================================

# Minimal backups for staging
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 6 * * *  # Daily at 6 AM
BACKUP_RETENTION_DAYS=7    # Short retention
BACKUP_COMPRESSION=false   # Faster without compression

BACKUP_DIR=./data/staging_backups

#=============================================================================
# DEVELOPMENT FEATURES (ENABLED FOR TESTING)
#=============================================================================

# Additional debugging features
ENABLE_DEBUG_ROUTES=true
MOCK_BLOCKCHAIN_CALLS=false  # Use real testnet calls
SKIP_SIGNATURE_VERIFICATION=false
ALLOW_LOCALHOST_CORS=true

# Test data settings
CREATE_TEST_DATA=true
RESET_DATABASE_ON_STARTUP=false
SEED_TEST_USERS=true

#=============================================================================
# EXTERNAL SERVICES (TEST KEYS)
#=============================================================================

# Use test API keys where possible
COINGECKO_API_KEY=demo_key_or_your_test_key
DEXSCREENER_API_KEY=

# Test notification services
TELEGRAM_BOT_TOKEN=your_test_telegram_bot_token
DISCORD_WEBHOOK_URL=your_test_discord_webhook

#=============================================================================
# STAGING-SPECIFIC SETTINGS
#=============================================================================

# Performance testing
SIMULATE_SLOW_RESPONSES=false
SIMULATE_NETWORK_ERRORS=false
RATE_LIMIT_BYPASS_HEADER=X-Staging-Bypass

# Test user settings  
DEFAULT_TEST_USER_BALANCE=1000.00
AUTO_CREATE_WALLETS=true
MOCK_SUCCESSFUL_TRADES=false

#=============================================================================
# VALIDATION CHECKLIST FOR STAGING
#=============================================================================

# Before staging tests, ensure:
# [ ] Environment is set to 'staging'
# [ ] Database points to staging instance
# [ ] Using testnet RPC endpoints only
# [ ] MAINNET_ENABLED is false
# [ ] Trading limits are small/safe
# [ ] Logging is verbose (DEBUG level)
# [ ] Test API keys are configured
# [ ] Backup retention is short
# [ ] Debug routes are enabled